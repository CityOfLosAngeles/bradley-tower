/*! 
* DevExtreme (Web Widgets)
* Version: 14.2.3
* Build date: Dec 3, 2014
*
* Copyright (c) 2012 - 2014 Developer Express Inc. ALL RIGHTS RESERVED
* EULA: https://www.devexpress.com/Support/EULAs/DevExtreme.xml
*/
"use strict";if(!DevExpress.MOD_WIDGETS_WEB){if(!DevExpress.MOD_WIDGETS_BASE)throw Error("Required module is not referenced: widgets-base");(function(n,t,i){var u=t.ui,s=u.events,y=t.fx,p=t.utils,w=t.translator,h="dx-accordion",c="dx-accordion-wrapper",o="dx-accordion-item",f="dx-accordion-item-opened",r="dx-accordion-item-title",e="dx-accordion-item-body",l="dxAccordionItemData",a="dxAccordionItemTitleData",v="dxAccordionItemContentData";t.registerComponent("dxAccordion",u,u.CollectionWidget.inherit({_activeStateUnit:"."+o,_setDefaultOptions:function(){this.callBase(),this.option({height:i,itemTitleTemplate:"title",onItemTitleClick:null,onItemTitleHold:null,selectedIndex:0,collapsible:!1,multiple:!1,animationDuration:300,selectionByClick:!0,activeStateEnabled:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{hoverStateEnabled:!0,focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.option("selectionRequired",!this.option("collapsible")),this.option("selectionMode",this.option("multiple")?"multi":"single");var t=this.element();t.addClass(h),this._$container=n("<div>").addClass(c),t.append(this._$container)},_render:function(){this.callBase(),this._attachItemTitleClickAction()},_itemDataKey:function(){return l},_itemClass:function(){return o},_itemContainer:function(){return this._$container},_itemTitles:function(){return this._itemElements().find("."+r)},_itemContents:function(){return this._itemElements().find("."+e)},_getItemData:function(t){return n(t).parent().data(this._itemDataKey())||this.callBase.apply(this,arguments)},_getItemRenderer:function(n){switch(n.type){case"title":return this._itemTitleRender=this._itemTitleRender||this.option("itemTitleRender");case"content":return this._itemContentRender=this._itemContentRender||this.option("itemContentRender");default:return this.callBase()}},_executeItemRenderAction:function(n){n.type||this.callBase.apply(this,arguments)},_itemSelectHandler:function(t){n(t.target).closest("."+e).length||this.callBase.apply(this,arguments)},_renderItemContent:function(t,i,r){r=r||this._itemContainer();var f=this.callBase.apply(this,[t,n.extend({type:"content",template:this.option("itemTemplate")},i),r]),u=f.parent(),e=n("<div>").prependTo(u);return this.callBase.apply(this,[t,n.extend({type:"title",template:this.option("itemTitleTemplate")},i),e]),u},_addItemContentClasses:function(n,t){switch(t.type){case"title":n.addClass(r).data(a,t);break;case"content":n.addClass(e).data(v,t);break;default:this.callBase.apply(this,arguments)}},_attachItemTitleClickAction:function(){var t="."+r,i=s.addNamespace("dxclick",this.NAME);this._itemContainer().off(i,t).on(i,t,n.proxy(this._itemTitleClickHandler,this))},_itemTitleClickHandler:function(n){this._itemJQueryEventHandler(n,"onItemTitleClick")},_renderSelection:function(n,t){this._updateItems(n,t,!0)},_updateSelection:function(n,t){this._updateItems(n,t,!1)},_updateItems:function(t,i,r){var u=this._itemElements();n.each(t,function(n,t){u.eq(t).addClass(f)}),n.each(i,function(n,t){u.eq(t).removeClass(f)}),this._updateItemHeights(r)},_updateItemHeights:function(t){var i=this._itemElements(),u=this._splitFreeSpace(this._calculateFreeSpace());n.each(i,n.proxy(function(i,e){var o=n(e),s=o.children("."+r),c=o.outerHeight(),h=o.hasClass(f)?u+s.outerHeight()||o.height("auto").outerHeight():s.outerHeight();t?o.css("height",h):this._animateItem(o,c,h)},this))},_animateItem:function(t,i,r){DevExpress.fx.animate(t,{type:"slide",from:{height:i},to:{height:r},duration:this.option("animationDuration"),complete:n.proxy(function(){this._deferredAnimate&&this._deferredAnimate.resolveWith(this)},this)})},_splitFreeSpace:function(n){return n?n/this.option("selectedItems").length:n},_calculateFreeSpace:function(){var r=this.option("height"),u,t;if(r!==i&&r!=="auto")return u=this._itemTitles(),t=0,n.each(u,function(i,r){t+=n(r).outerHeight()}),this.element().height()-t},_visibilityChanged:function(n){n&&this._dimensionChanged()},_dimensionChanged:function(){this._updateItemHeights(!0)},_optionChanged:function(n){switch(n.name){case"animationDuration":case"onItemTitleClick":break;case"collapsible":this.option("selectionRequired",!this.option("collapsible"));break;case"itemTitleTemplate":case"itemContentTemplate":case"onItemTitleHold":case"height":this._invalidate();break;case"itemTitleRender":this._itemTitleRender=null,this._invalidate();break;case"itemContentRender":this._itemContentRender=null,this._invalidate();break;case"multiple":this.option("selectionMode",n.value?"multi":"single");break;default:this.callBase(n)}},expandItem:function(t){return this._deferredAnimate=n.Deferred(),this.selectItem(t),this._deferredAnimate.promise()},collapseItem:function(t){return this._deferredAnimate=n.Deferred(),this.unselectItem(t),this._deferredAnimate.promise()}}))})(jQuery,DevExpress),function(n,t,i){var s=t.ui,r=t.utils,e=s.events,v=t.Class,u=4,y="dx-pager",o="dx-page",p="dx-pages",h="dx-selection",w="dx-separator",b="dx-page-sizes",c="dx-page-size",k="dx-navigate-button",l="dx-prev-button",a="dx-next-button",d="dx-info",g="dx-button-disable",f=v.inherit({ctor:function(t,i){var r=this;r.index=i,r._$page=n("<div />").text(t).addClass(o)},value:function(n){var i=this,t;if(r.isDefined(n))i._$page.text(n);else return t=i._$page.text(),r.isNumber(t)?parseInt(t):t},select:function(n){this._$page.toggleClass(h,n)},render:function(n,t){t?this._$page.prependTo(n):this._$page.appendTo(n)}});t.registerComponent("dxPager",s,t.DOMComponent.inherit({_setDefaultOptions:function(){this.callBase(),this.option({visible:!0,pageIndex:1,maxPagesCount:10,pageCount:10,pageSize:5,showPageSizes:!0,pageSizes:[5,10],hasKnownLastPage:!0,showNavigationButtons:!1,showInfo:!1,infoText:Globalize.localize("dxPager-infoText"),rtlEnabled:!1,pageIndexChanged:n.noop,pageSizeChanged:n.noop})},_toggleVisibility:function(n){var t=this.element();t&&t.css("display",n?"":"none")},_getPages:function(n,t){var r=[],e=!this.option("hasKnownLastPage"),o,i;if(t>0||e)if(t<=this.option("maxPagesCount")){for(i=1;i<=t;i++)r.push(new f(i,i-1));e&&r.push(new f(">",i-1))}else{for(r.push(new f(1,0)),o=n?n.value()-n.index:1,i=1;i<=u;i++)r.push(new f(o+i,i));r.push(new f(t,u+1)),e&&r.push(new f(">",u+1))}return r},_getPageByValue:function(n){for(var r=this,i,t=0;t<r._pages.length;t++)if(i=r._pages[t],i.value()===n)return i},_processSelectedPage:function(t,i,e){var o=this,s=!1,h;o._pages&&(n.each(o._pages,function(n,t){i===t.value()&&(s=!0)}),s||(o.selectedPage=null)),r.isDefined(o.selectedPage)?i===e&&e>t&&o.selectedPage.index!==u+1&&(o.selectedPage.index=u+1):i>u&&i<e&&(h=e-u<i?u-(e-i)+1:2,o.selectedPage=new f(i,h))},_selectPageByValue:function(n){var u=this,f,t=u._getPageByValue(n),h=u._pages,o=h.length,s,e,c;if(r.isDefined(t)){if(s=u._pages[t.index-1],e=u._pages[t.index+1],e&&e.value()===">"&&(c=e,e=i,o--,h.pop()),u.selectedPage&&u.selectedPage.select(!1),t.select(!0),u.selectedPage=t,e&&e.value()-n>1)if(t.index!==0)for(s.value(n+1),u._pages.splice(t.index,1),u._pages.splice(t.index-1,0,t),u._pages[t.index].index=t.index,t.index=t.index-1,f=t.index-1;f>0;f--)u._pages[f].value(u._pages[f+1].value()-1);else for(f=0;f<o-1;f++)u._pages[f].value(f+1);if(s&&n-s.value()>1)if(t.index!==o-1)for(e.value(n-1),u._pages.splice(t.index,1),u._pages.splice(t.index+1,0,t),u._pages[t.index].index=t.index,t.index=t.index+1,f=t.index+1;f<o-1;f++)u._pages[f].value(u._pages[f-1].value()+1);else for(f=1;f<=o-2;f++)u._pages[o-1-f].value(u._pages[o-1].value()-f);c&&h.push(c)}},_nextPage:function(n){var t=this.selectedPage&&this.selectedPage.value(),i=this.option("pageCount");r.isDefined(t)&&(t=n==="next"?++t:--t,t>0&&t<=i&&this.option("pageIndex",t))},_renderPages:function(t){var i=this,u,s=t.length,h=i._createAction(function(t){var u=t.jQueryEvent,r=n(u.target).text(),f=r===">"?i.option("pageCount")+1:Number(r);i.option("pageIndex",f)}),f,r;if(s>1){i._pageClickHandler=function(n){h({jQueryEvent:n})};i.$pagesChooser.on(e.addNamespace("dxclick",i.Name+"Pages"),"."+o,i._pageClickHandler)}for(r=0;r<s;r++)f=t[r],f.render(i.$pagesChooser,i.option("rtlEnabled")),t[r+1]&&t[r+1].value()-f.value()>1&&(u=n("<div>. . .<\/div>").addClass(w),i.option("rtlEnabled")?u.prependTo(i.$pagesChooser):u.appendTo(i.$pagesChooser))},_renderPagesChooser:function(){var t=this,i=t.element();if(i){if(t._pages.length===0){t.selectedPage=null;return}r.isDefined(t.$pagesChooser)?t.$pagesChooser.empty():t.$pagesChooser=n("<div />").addClass(p),t._renderInfo(),t._renderNavigateButton("prev"),t._renderPages(t._pages),t._renderNavigateButton("next"),r.isDefined(t.$pagesChooser[0].parentElement)||t.$pagesChooser.appendTo(i)}},_renderPagesSizeChooser:function(){var t=this,i,u,a=t.option("pageSize"),f=t.option("pageSizes"),v=t.option("showPageSizes"),o,s=f&&f.length,l=t.element();if(l&&(t._clickPagesSizeAction=t._createAction(function(i){var r=i.jQueryEvent;o=parseInt(n(r.target).text()),t.option("pageSize",o)}),r.isDefined(t.pagesSizeChooserElement)?t.pagesSizeChooserElement.empty():t.pagesSizeChooserElement=n("<div />").addClass(b).on(e.addNamespace("dxclick",t.Name+"PageSize"),"."+c,function(n){t._clickPagesSizeAction({jQueryEvent:n})}),v&&s)){for(i=0;i<s;i++)u=n("<div />").text(f[i]).addClass(c),a===f[i]&&u.addClass(h),t.option("rtlEnabled")?t.pagesSizeChooserElement.prepend(u):t.pagesSizeChooserElement.append(u);r.isDefined(t.pagesSizeChooserElement[0].parentElement)||t.pagesSizeChooserElement.appendTo(l)}},_renderInfo:function(){var t=this.option("infoText");this.option("showInfo")&&r.isDefined(t)&&n("<div>").addClass(d).text(r.stringFormat(t,this.selectedPage&&this.selectedPage.value(),this.option("pageCount"))).appendTo(this.$pagesChooser)},_renderNavigateButton:function(t){var i=this,u,o=i._createAction(function(){i._nextPage(t)}),r,f;i.option("showNavigationButtons")&&(u=i.option("pageIndex"),f=u>1&&t==="prev"||u<i.option("pageCount")&&t==="next",r=n("<div>").addClass(k).addClass(f?"":g).on(e.addNamespace("dxclick",i.Name+"Pages"),function(n){o({jQueryEvent:n})}),i.option("rtlEnabled")?(r.addClass(t==="prev"?a:l),r.prependTo(this.$pagesChooser)):(r.addClass(t==="prev"?l:a),r.appendTo(this.$pagesChooser)))},_render:function(){this._update(),this.element().addClass(y),this._toggleVisibility(this.option("visible")),this._renderPagesSizeChooser(),this._renderPagesChooser()},_update:function(){var n=this.option("pageCount"),t=this.option("pageIndex");this._processSelectedPage(this.option("maxPagesCount"),t,n),this._pages=this._getPages(this.selectedPage,n),this._selectPageByValue(t)},_optionChanged:function(n){var t,i;switch(n.name){case"visible":this._toggleVisibility(n.value);break;case"pageIndex":t=this.option("pageIndexChanged"),t&&t(n.value);case"maxPagesCount":case"pageCount":case"hasKnownLastPage":case"showNavigationButtons":this._update(),this._renderPagesChooser();break;case"pageSize":i=this.option("pageSizeChanged"),i&&i(n.value);case"pageSizes":this._renderPagesSizeChooser();break;default:this._invalidate()}},_clean:function(){this.$pagesChooser&&this.$pagesChooser.off(e.addNamespace("dxclick",this.Name+"Pages"),"."+o,this._pageClickHandler)},getHeight:function(){return this.option("visible")?this.element().outerHeight():0}}))}(jQuery,DevExpress),function(n,t){var f=t.ui,dt=f.events,gt=t.utils,r=t.translator,s="dx-colorview",h="dx-colorview-container",u="dx-colorview-container-row",c="dx-colorview-container-cell",l="dx-colorview-palette",a="dx-colorview-palette-cell",v="dx-colorview-palette-handle",e="dx-colorview-palette-gradient",y="dx-colorview-palette-gradient-white",p="dx-colorview-palette-gradient-black",w="dx-colorview-hue-scale",b="dx-colorview-hue-scale-cell",k="dx-colorview-hue-scale-handle",d="dx-colorview-hue-scale-wrapper",g="dx-colorview-controls-container",nt="dx-colorview-button-cell",tt="dx-colorview-buttons-container",it="dx-colorview-apply-button",rt="dx-colorview-cancel-button",ni="dx-colorview-label",ut="dx-colorview-label-red",ft="dx-colorview-label-green",et="dx-colorview-label-blue",ot="dx-colorview-label-hex",ti="dx-colorview-alpha-channel",st="dx-colorview-alpha-channel-scale",ht="dx-colorview-alpha-channel-row",ct="dx-colorview-alpha-channel-wrapper",lt="dx-colorview-alpha-channel-label",at="dx-colorview-alpha-channel-handle",vt="dx-colorview-alpha-channel-cell",yt="dx-colorview-alpha-channel-border",o="dx-colorview-color-preview",pt="dx-colorview-color-preview-container",wt="dx-colorview-color-preview-container-inner",bt="dx-colorview-color-preview-color-current",kt="dx-colorview-color-preview-color-new";t.registerComponent("dxColorView",f,f.Editor.inherit({_supportedKeys:function(){var t=this,i=function(){var n=100/t._paletteWidth;return n=n>1?n:1},u=function(n){t._currentColor.hsv.s+=n,o()},f=function(){var n=100/t._paletteHeight;return n=n>1?n:1},e=function(n){t._currentColor.hsv.v+=n,o()},o=function(){t._placePaletteHandle();var n=r.locate(t._$paletteHandle);t._updateColorFromHsv(t._currentColor.hsv.h,t._currentColor.hsv.s,t._currentColor.hsv.v)},s=function(){var n=360/(t._hueScaleWrapperHeight-t._hueScaleHandleHeight);return n=n>1?n:1},h=function(n){t._currentColor.hsv.h+=n,t._placeHueScaleHandle();var i=r.locate(t._$hueScaleHandle);t._updateColorHue(i.top+t._hueScaleHandleHeight/2)},c=function(){var n=1/t._alphaChannelScaleWorkWidth;return n=n>.01?n:.01},l=function(n){t._currentColor.a+=n,t._placeAlphaChannelHandle();var i=r.locate(t._$alphaChannelHandle);t._calculateColorTransparenceByScaleWidth(i.left+t._alphaChannelHandleWidth/2)};return n.extend(this.callBase(),{upArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?this._currentColor.hsv.h<=360&&!this._isTopColorHue&&h(s()):this._currentColor.hsv.v<100&&e(f())},downArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?this._currentColor.hsv.h>=0&&(this._isTopColorHue&&(this._currentColor.hsv.h=360),h(-s())):this._currentColor.hsv.v>0&&e(-f())},rightArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?this._currentColor.a>0&&l(-c()):this._currentColor.hsv.s<100&&u(i())},leftArrow:function(n){n.preventDefault(),n.stopPropagation(),n.ctrlKey?this._currentColor.a<1&&l(c()):this._currentColor.hsv.s>0&&u(-i())},enter:function(){this.option("applyValueMode")=="useButtons"&&this._applyColor()}})},_setDefaultOptions:function(){this.callBase(),this.option({value:"#000000",editAlphaChannel:!1,applyButtonText:Globalize.localize("OK"),cancelButtonText:Globalize.localize("Cancel"),applyValueMode:"useButtons",onCancelButtonClick:null,onApplyButtonClick:null})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initColorAndOpacity()},_initColorAndOpacity:function(){this._setCurrentColor(this.option("value"))},_setCurrentColor:function(n){var i=new t.Color(n);i.colorIsInvalid?this.option("value",this._currentColor.baseColor):this._currentColor&&this._makeRgba(this._currentColor)==this._makeRgba(i)||(this._currentColor=i)},_render:function(){this.callBase(),this.element().addClass(s),this._renderColorPickerContainer()},_makeTransparentBackground:function(n,i){i instanceof t.Color||(i=new t.Color(i)),t.browser.msie&&t.browser.version==="8.0"?n.css({background:i.toHex(),filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity="+i.a*100+")"}):n.css("backgroundColor",this._makeRgba(i))},_makeRgba:function(n){return n instanceof t.Color||(n=new t.Color(n)),"rgba("+[n.r,n.g,n.b,n.a].join(", ")+")"},_renderValue:function(){this.callBase(this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this.option("value"))},_renderColorPickerContainer:function(){var t=this.element();this._$colorPickerContainer=n("<div>",{"class":h,appendTo:t}),this._renderHtmlRows(),this._renderPalette(),this._renderHueScale(),this._renderControlsContainer(),this._renderControls(),this._renderAlphaChannelElements(),this.option("applyValueMode")!=="instantly"&&this._renderButtons()},_renderHtmlRows:function(t){var e=this._$colorPickerContainer.find("."+u),r=e.length,c=this._calculateRowsCount(),i=r-c,s,f,o,h;if(i>0&&(s=this._calculateRemovedHtmlRowIndex(r,t),e.eq(s).remove()),i<0){for(i=Math.abs(i),f=[],o=0;o<i;o++)f.push(n("<div>",{"class":u}));r?(h=this._calculateHtmlRowIndex(r,t),e.eq(h).after(f)):this._$colorPickerContainer.append(f)}},_renderHtmlCellInsideRow:function(t,i,r){return n("<div>",{"class":c,addClass:r,appendTo:i.find("."+u+t)})},_calculateRowsCount:function(){return this.option("editAlphaChannel")?this.option("applyValueMode")==="instantly"?2:3:this.option("applyValueMode")==="instantly"?1:2},_calculateRemovedHtmlRowIndex:function(n,t){var i=-1;return n===3&&(t==="editAlphaChannel"&&(i=-2),t==="applyValueMode"&&(i=-1)),i},_calculateHtmlRowIndex:function(n,t){var i=0;return n===2&&t==="applyValueMode"&&(i=1),i},_renderPalette:function(){var t=this._renderHtmlCellInsideRow(":first",this._$colorPickerContainer,a),i=n("<div>",{"class":[e,y].join(" ")}),r=n("<div>",{"class":[e,p].join(" ")});this._$palette=n("<div>",{"class":l,css:{backgroundColor:this._currentColor.getPureColor().toHex()},appendTo:t}),this._paletteHeight=this._$palette.height(),this._paletteWidth=this._$palette.width(),this._renderPaletteHandle(),this._$palette.append([i,r])},_renderPaletteHandle:function(){this._$paletteHandle=n("<div>",{"class":v,appendTo:this._$palette}).dxDraggable({area:this._$palette,allowMoveByClick:!0,boundOffset:n.proxy(function(){return-this._paletteHandleHeight/2},this),onDrag:n.proxy(function(){var t=r.locate(this._$paletteHandle);this._updateByDrag=!0,this._updateColorFromHsv(this._currentColor.hsv.h,this._calculateColorSaturation(t),this._calculateColorValue(t))},this)}),this._paletteHandleWidth=this._$paletteHandle.width(),this._paletteHandleHeight=this._$paletteHandle.height(),this._placePaletteHandle()},_placePaletteHandle:function(){r.move(this._$paletteHandle,{left:Math.round(this._paletteWidth*this._currentColor.hsv.s/100-this._paletteHandleWidth/2),top:Math.round(this._paletteHeight-this._paletteHeight*this._currentColor.hsv.v/100-this._paletteHandleHeight/2)})},_calculateColorValue:function(n){var t=Math.floor(n.top+this._paletteHandleHeight/2);return 100-Math.round(t*100/this._paletteHeight)},_calculateColorSaturation:function(n){var t=Math.floor(n.left+this._paletteHandleWidth/2);return Math.round(t*100/this._paletteWidth)},_updateColorFromHsv:function(n,i,r){var u=this._currentColor.a;this._currentColor=new t.Color("hsv("+[n,i,r].join(",")+")"),this._currentColor.a=u,this._updateColorParamsAndColorPreview(),this.option("applyValueMode")==="instantly"&&this._applyColor()},_renderHueScale:function(){var t=this._renderHtmlCellInsideRow(":first",this._$colorPickerContainer,b);this._$hueScaleWrapper=n("<div>",{"class":d,appendTo:t}),this._$hueScale=n("<div>",{"class":w,appendTo:this._$hueScaleWrapper}),this._hueScaleHeight=this._$hueScale.height(),this._hueScaleWrapperHeight=this._$hueScaleWrapper.outerHeight(),this._renderHueScaleHandle()},_renderHueScaleHandle:function(){this._$hueScaleHandle=n("<div>",{"class":k,appendTo:this._$hueScaleWrapper}).dxDraggable({area:this._$hueScaleWrapper,allowMoveByClick:!0,direction:"vertical",onDrag:n.proxy(function(){this._updateByDrag=!0,this._updateColorHue(r.locate(this._$hueScaleHandle).top+this._hueScaleHandleHeight/2)},this)}),this._hueScaleHandleHeight=this._$hueScaleHandle.height(),this._placeHueScaleHandle()},_placeHueScaleHandle:function(){var t=this._hueScaleWrapperHeight,i=this._hueScaleHandleHeight,n=(t-i)*(360-this._currentColor.hsv.h)/360;t<n+i&&(n=t-i),n<0&&(n=0),r.move(this._$hueScaleHandle,{top:Math.round(n)})},_updateColorHue:function(n){var t=360-Math.round((n-this._hueScaleHandleHeight/2)*360/(this._hueScaleWrapperHeight-this._hueScaleHandleHeight)),i=this._currentColor.hsv.s,r=this._currentColor.hsv.v;this._isTopColorHue=!1,t=t<0?0:t,t>=360&&(this._isTopColorHue=!0,t=0),this._updateColorFromHsv(t,i,r),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex())},_renderControlsContainer:function(){var t=this._renderHtmlCellInsideRow(":first",this._$colorPickerContainer);this._$controlsContainer=n("<div>",{"class":g,appendTo:t})},_renderControls:function(){this._renderColorsPreview(),this._renderRgbInputs(),this._renderHexInput()},_renderColorsPreview:function(){var t=n("<div>",{"class":pt,appendTo:this._$controlsContainer}),i=n("<div>",{"class":wt,appendTo:t});this._$currentColor=n("<div>",{"class":[o,bt].join(" ")}),this._$newColor=n("<div>",{"class":[o,kt].join(" ")}),this._makeTransparentBackground(this._$currentColor,this._currentColor),this._makeTransparentBackground(this._$newColor,this._currentColor),i.append([this._$currentColor,this._$newColor])},_renderAlphaChannelElements:function(){this.option("editAlphaChannel")&&(this._$colorPickerContainer.find("."+u).eq(1).addClass(ht),this._renderAlphaChannelScale(),this._renderAlphaChannelInput())},_renderRgbInputs:function(){this._rgbInputsWithLabels=[this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.r,onValueChanged:n.proxy(this._updateColor,this,!1),labelText:"R",labelClass:ut}),this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.g,onValueChanged:n.proxy(this._updateColor,this,!1),labelText:"G",labelClass:ft}),this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.b,onValueChanged:n.proxy(this._updateColor,this,!1),labelText:"B",labelClass:et})],this._$controlsContainer.append(this._rgbInputsWithLabels),this._rgbInputs=[this._rgbInputsWithLabels[0].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[1].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[2].find(".dx-numberbox").dxNumberBox("instance")]},_renderEditorWithLabel:function(t){var r=n("<div>"),f=n("<label>",{"class":t.labelClass,text:t.labelText+":",append:r}),u=t.editorType,i={value:t.value,onValueChanged:t.onValueChanged};return u==="dxNumberBox"&&(i.min=t.min||0,i.max=t.max||255,i.step=t.step||1),r[u](i),f},_renderHexInput:function(){this._hexInput=this._renderEditorWithLabel({editorType:"dxTextBox",value:this._currentColor.toHex().replace("#",""),onValueChanged:n.proxy(this._updateColor,this,!0),labelClass:ot,labelText:"#"}).appendTo(this._$controlsContainer).find(".dx-textbox").dxTextBox("instance")},_renderAlphaChannelScale:function(){var t=this._renderHtmlCellInsideRow(":eq(1)",this._$colorPickerContainer,vt),i=n("<div>",{"class":yt,appendTo:t}),r=n("<div>",{"class":ct,appendTo:i});this._$alphaChannelScale=n("<div>",{"class":st,appendTo:r}),this._makeCSSLinearGradient(this._$alphaChannelScale),this._renderAlphaChannelHandle(t)},_makeCSSLinearGradient:function(n){var t=this._currentColor,i=[t.r,t.g,t.b].join(","),r=t.toHex().replace("#",""),u=function(n,t){var u=this.option("rtlEnabled"),i="rgba("+n+", "+(u?"1":"0")+")",r="rgba("+n+", "+(u?"0":"1")+")",f="'#"+(u?"00":"")+t+"'",e="'#"+(u?"":"00")+t+"'";return["background-image: -webkit-linear-gradient(180deg, "+i+", "+r+")","background-image: -moz-linear-gradient(-90deg, "+i+", "+r+")","background-image: -ms-linear-gradient(-90deg, "+i+", "+r+")","background-image: -o-linear-gradient(-90deg, "+i+", "+r+")","background-image: linear-gradient(-90deg, "+i+", "+r+")","filter: progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+f+", endColorstr="+e+")","-ms-filter: progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+f+", endColorstr="+e+")"].join(";")};n.attr("style",u.call(this,i,r))},_renderAlphaChannelInput:function(){var n=this,t=this._renderHtmlCellInsideRow(":eq(1)",this._$colorPickerContainer);n._alphaChannelInput=this._renderEditorWithLabel({editorType:"dxNumberBox",value:this._currentColor.a,max:1,step:.1,onValueChanged:function(t){var i=t.value;i=n._currentColor.isValidAlpha(i)?i:n._currentColor.a,n._updateColorTransparence(i),n._placeAlphaChannelHandle()},labelClass:lt,labelText:"Alpha"}).appendTo(t).find(".dx-numberbox").dxNumberBox("instance")},_updateColorTransparence:function(n){this._currentColor.a=n,this._makeTransparentBackground(this._$newColor,this._currentColor),this.option("applyValueMode")==="instantly"&&this._applyColor()},_renderAlphaChannelHandle:function(t){this._$alphaChannelHandle=n("<div>",{"class":at,appendTo:t}).dxDraggable({area:t,allowMoveByClick:!0,direction:"horizontal",onDrag:n.proxy(function(){this._updateByDrag=!0;var t=this._$alphaChannelHandle,i=r.locate(t).left+this._alphaChannelHandleWidth/2;this._calculateColorTransparenceByScaleWidth(i)},this)}),this._alphaChannelHandleWidth=this._$alphaChannelHandle.width(),this._alphaChannelScaleWorkWidth=t.width()-this._alphaChannelHandleWidth,this._placeAlphaChannelHandle()},_calculateColorTransparenceByScaleWidth:function(n){var t=(n-this._alphaChannelHandleWidth/2)/this._alphaChannelScaleWorkWidth,i=this.option("rtlEnabled");t=i?t:1-t,n>=this._alphaChannelScaleWorkWidth+this._alphaChannelHandleWidth/2?t=i?1:0:t<1&&(t=t.toFixed(2)),this._alphaChannelInput.option("value",t)},_placeAlphaChannelHandle:function(){var n=this._alphaChannelScaleWorkWidth*(1-this._currentColor.a);n<0&&(n=0),this._alphaChannelScaleWorkWidth<n&&(n=this._alphaChannelScaleWorkWidth),r.move(this._$alphaChannelHandle,{left:this.option("rtlEnabled")?this._alphaChannelScaleWorkWidth-n:n})},_renderButtons:function(){if(this.option("applyValueMode")!=="instantly"){var t=this._renderHtmlCellInsideRow(":last",this._$colorPickerContainer,nt);this._$buttonContainer=n("<div>",{"class":tt,appendTo:t}),this._renderApplyButton(),this._renderCancelButton()}},_renderApplyButton:function(){this._$applyButton=n("<div>",{"class":it,appendTo:this._$buttonContainer}).dxButton({text:this.option("applyButtonText"),onClick:n.proxy(this._applyColor,this)})},_applyColor:function(){var t=this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this._currentColor.toHex();this._makeTransparentBackground(this._$currentColor,this._currentColor),n.isFunction(this.option("onApplyButtonClick"))&&this.option("onApplyButtonClick")(),this.option("value",t)},_renderCancelButton:function(){this._$cancelButton=n("<div>",{"class":rt,appendTo:this._$buttonContainer}).dxButton({text:this.option("cancelButtonText"),onClick:n.proxy(this._cancelChanges,this)})},_cancelChanges:function(){this._initColorAndOpacity(),this._refreshMarkup(),n.isFunction(this.option("onCancelButtonClick"))&&this.option("onCancelButtonClick")()},_updateColor:function(n){var i,r;n?r=this._validateHex("#"+this._hexInput.option("value")):(i=this._validateRgb(),this._alphaChannelInput?(i.push(this._alphaChannelInput.option("value")),r="rgba("+i.join(", ")+")"):r="rgb("+i.join(", ")+")"),this._suppressEditorsValueUpdating||(this._currentColor=new t.Color(r),this._refreshMarkup(),this.option("applyValueMode")==="instantly"&&this._applyColor())},_validateHex:function(n){return this._currentColor.isValidHex(n)?n:this._currentColor.toHex()},_validateRgb:function(){var n=this._rgbInputs[0].option("value"),t=this._rgbInputs[1].option("value"),i=this._rgbInputs[2].option("value");return this._currentColor.isValidRGB(n,t,i)||(n=this._currentColor.r,t=this._currentColor.g,i=this._currentColor.b),[n,t,i]},_refreshMarkup:function(){this._placeHueScaleHandle(),this._placePaletteHandle(),this._updateColorParamsAndColorPreview(),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex()),this._$alphaChannelHandle&&(this._updateColorTransparence(this._currentColor.a),this._placeAlphaChannelHandle())},_updateColorParamsAndColorPreview:function(){this._suppressEditorsValueUpdating=!0,this._hexInput.option("value",this._currentColor.toHex().replace("#","")),this._rgbInputs[0].option("value",this._currentColor.r),this._rgbInputs[1].option("value",this._currentColor.g),this._rgbInputs[2].option("value",this._currentColor.b),this._suppressEditorsValueUpdating=!1,this._makeTransparentBackground(this._$newColor,this._currentColor),this.option("editAlphaChannel")&&(this._makeCSSLinearGradient.call(this,this._$alphaChannelScale),this._alphaChannelInput.option("value",this._currentColor.a))},_optionChanged:function(n){var t=n.value;switch(n.name){case"value":this._setCurrentColor(t),this._updateByDrag||this._refreshMarkup(),this._updateByDrag=!1,this.callBase(n);break;case"applyButtonText":this._$applyButton&&this._$applyButton.dxButton("option","text",t);break;case"cancelButtonText":this._$cancelButton&&this._$cancelButton.dxButton("option","text",t);break;case"editAlphaChannel":this._$colorPickerContainer&&(this._renderHtmlRows("editAlphaChannel"),this._renderAlphaChannelElements());break;case"applyValueMode":this._$colorPickerContainer&&(this._renderHtmlRows("applyValueMode"),this._renderButtons());break;case"onCancelButtonClick":case"onApplyButtonClick":break;default:this.callBase(n)}}}))}(jQuery,DevExpress),function(n,t){var r=t.ui,f="dx-colorbox",o=f+"-input",s=o+"-container",h=f+"-color-result-preview",c=f+"-overlay",e=r.dxColorView.prototype,u={makeTransparentBackground:n.proxy(e._makeTransparentBackground,e),makeRgba:n.proxy(e._makeRgba,e)};t.registerComponent("dxColorBox",r,r.dxDropDownEditor.inherit({_supportedKeys:function(){return n.extend(this.callBase(),{tab:function(n){this.option("opened")===!0&&(n.preventDefault(),this._colorView._rgbInputs[0].focus())}})},_setDefaultOptions:function(){this.callBase(),this.option({value:"#000000",editAlphaChannel:!1,applyButtonText:Globalize.localize("OK"),cancelButtonText:Globalize.localize("Cancel"),applyValueMode:"useButtons",onApplyButtonClick:null,onCancelButtonClick:null})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{focusStateEnabled:!0}}])},_popupConfig:function(){return n.extend(this.callBase(),{height:"auto",width:""})},_contentReadyHandler:function(){this._createColorView()},_createColorView:function(){var i=this,t=this._popup.content();t.addClass(c),this._colorView=n("<div />").appendTo(t).dxColorView(this._colorViewConfig()).dxColorView("instance");this._colorView.element().on("focus",n.proxy(function(){this.focus()},this))},_colorViewConfig:function(){var t=this,i=t.option("focusStateEnabled")&&!t.option("disabled");return{value:t.option("value"),editAlphaChannel:t.option("editAlphaChannel"),applyValueMode:t.option("applyValueMode"),applyButtonText:t.option("applyButtonText"),onApplyButtonClick:t.option("onApplyButtonClick"),cancelButtonText:t.option("cancelButtonText"),rtlEnabled:t.option("rtlEnabled"),focusStateEnabled:t.option("focusStateEnabled"),onValueChanged:function(n){var i=n.value;t.option("opened")&&t.option("value",i),u.makeTransparentBackground(t._$colorResultPreview,i),t._closePopup()},onCancelButtonClick:function(){n.isFunction(t.option("onCancelButtonClick"))&&t.option("onCancelButtonClick")(),t._closePopup()},_keyboardProcessor:i?t._keyboardProcessor.attachChildProcessor():null}},_attachKeyboardEvents:function(){this.callBase.apply(this,arguments),this._attachChildKeyboardEvents()},_attachChildKeyboardEvents:function(){var n=this._keyboardProcessor.attachChildProcessor();if(this._colorView){this._colorView.option("_keyboardProcessor",n);return}},_closePopup:function(){this.option("applyValueMode")!=="instantly"&&this.option("opened",!1)},_init:function(){this.callBase()},_render:function(){this.callBase(),this.element().addClass(f)},_renderInput:function(){this.callBase(),this.element().wrapInner(n("<div/>").addClass(s)),this._$colorBoxInputContainer=this.element().children().eq(0),this._$colorResultPreview=n("<div>",{"class":h,appendTo:this._$colorBoxInputContainer}),u.makeTransparentBackground(this._$colorResultPreview,this.option("value")),this._input().addClass(o)},_renderValue:function(){var n=this.option("value");this.callBase(this.option("editAlphaChannel")?u.makeRgba(n):n)},_valueChangeEventHandler:function(n){var i=this._input().val(),r=new t.Color(i);r.colorIsInvalid&&(i=this.option("value"),this._input().val(i)),this._colorView&&(this._colorView._setCurrentColor(i),this._colorView._refreshMarkup()),u.makeTransparentBackground(this._$colorResultPreview,i),this.callBase(n,i)},_optionChanged:function(n){var t=n.value,i=n.name;switch(i){case"value":u.makeTransparentBackground(this._$colorResultPreview,t),this._colorView&&this._colorView.option("value",t),this.callBase(n);break;case"applyButtonText":case"cancelButtonText":case"editAlphaChannel":case"applyValueMode":case"onCancelButtonClick":case"onApplyButtonClick":this._colorView&&this._colorView.option(i,t);break;case"rtlEnabled":this._colorView&&this._colorView.option(i,t),this.callBase(n);break;default:this.callBase(n)}}})),t.registerComponent("dxColorPicker",r,r.dxColorBox.inherit({ctor:function(){t.log("W0000",this.NAME,"14.2","Use 'dxColorBox' instead"),this.callBase.apply(this,arguments)}}))}(jQuery,DevExpress),function(n,t){var u=t.ui,f=t.utils,h=u.events,e="dx-menu",l="dx-menu-base",r=e+"-item",o=r+"-selected",c=r+"-wrapper",a=e+"-items-container",v=r+"-expanded",y=e+"-separator",p="dx-state-disabled",w="."+r,b="."+o,s="single",k="none",d=1,g=u.CollectionWidget.inherit({NAME:"dxMenuBase",_setDefaultOptions:function(){this.callBase(),this.option({items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:"auto",animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectionByClick:!1,selectionMode:"none",_remoteSelectionSync:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{focusStateEnabled:!0}}])},_activeStateUnit:w,_itemDataKey:function(){return"dxMenuItemDataKey"},_itemClass:function(){return r},_selectedItemClass:function(){return o},_focusTarget:function(){return this._itemContainer()},_eventBindingTarget:function(){return this._itemContainer()},_supportedKeys:function(){var t=function(){var t=this._$focusedItem;t&&this._isSelectionEnabled()&&this.selectItem(t)};return n.extend(this.callBase(),{space:t,pageUp:n.noop,pageDown:n.noop})},_isSelectionEnabled:function(){return this._getSelectionMode()===s},_getSelectionMode:function(){return this.option("selectionMode")===s?s:k},_init:function(){this.callBase(),this._initActions()},_initActions:n.noop,_render:function(){var n=this.element(),i=t.devices.real().deviceType==="desktop";this.callBase(arguments),this._addCustomCssClass(n),this._itemContainer().addClass(l),i&&this._attachItemMouseEvents()},_getShowSubmenuMode:function(){var n=t.devices.real().deviceType==="desktop";return n?this.option("showSubmenuMode"):"onClick"},_initEditStrategy:function(){var n=u.CollectionWidget.MenuBaseEditStrategy;this._editStrategy=new n(this)},_addCustomCssClass:function(n){n.addClass(this.option("cssClass"))},_attachItemMouseEvents:function(){var t=this._itemWrapperSelector(),i=h.addNamespace("mouseenter",this.NAME),r=h.addNamespace("mouseleave",this.NAME),u=this._createAction(n.proxy(function(n){this._itemMouseEnterHandler(n.jQueryEvent)},this)),f=this._createAction(n.proxy(function(n){this._itemMouseLeaveHandler(n.jQueryEvent)},this));this._itemContainer().off(i,t).on(i,t,n.proxy(function(n){u({jQueryEvent:n})},this));this._itemContainer().off(r,t).on(r,t,n.proxy(function(n){f({jQueryEvent:n})},this))},_itemWrapperSelector:function(){return"."+c},_itemMouseEnterHandler:function(t){var r=this._getShowSubmenuMode(),i=this._getItemElementByEventArgs(t),u=i.hasClass(p);u?this._removeFocusedItem():this._resetFocusedItem(i),r==="onHover"?this._showSubmenu(i):r==="onHoverStay"&&setTimeout(n.proxy(this._showSubmenu,this),300,i)},_showSubmenu:function(n){n.addClass(v)},_getItemElementByEventArgs:function(t){return n(t.currentTarget).children(this._itemSelector()).first()},_itemMouseLeaveHandler:n.noop,_hasSubmenu:function(n){return n.items&&n.items.length>0},_renderItems:function(t,i,r){var f=this,u,i=i||d;t.length&&(u=this._renderContainer(i,r),n.each(t,function(n,t){f._renderItem(n,t,u,i)})),this._setSelectionFromItems()},_renderContainer:function(){var i=this._createItemsContainer();return i.addClass(a),i},_createItemsContainer:function(){var t=n("<div>").appendTo(this.element());return n("<ul>").appendTo(t)},_renderItem:function(t,i,r,u){var e=this,o=n("<li>"),s;e._renderSeparator(i,t,r),o.appendTo(r).addClass(c),f.isObject(i)||(i={text:i}),f.isDefined(i.selected)||(i.selected=!1),s=e.callBase(t,i,o),e._renderSubmenuItems(i,s,u)},_setSelectionFromItems:function(){var t=this.option("selectedIndex"),i=!t||t===-1;!this.option("_remoteSelectionSync")&&i&&(n.each(this._editStrategy._getPlainItems(),function(n,i){i.selected&&i.selectable!==!1&&(t=n)}),t&&this.option("selectedIndex",t))},_renderSeparator:function(t,i,r){t.beginGroup&&i>0&&n("<li>").appendTo(r).addClass(y)},_renderSubmenuItems:n.noop,_itemClickHandler:function(t){var i=this._createAction(n.proxy(this._updateOverlayVisibilityOnClick,this));this._itemJQueryEventHandler(t,"onItemClick",{},{afterExecute:n.proxy(i,this)})},_updateOverlayVisibilityOnClick:function(n){this._updateSelectedItemOnClick(n),this._getShowSubmenuMode()==="onClick"&&this._showSubmenu(n.args[0].itemElement)},_updateSelectedItemOnClick:function(n){var t=n.args?n.args[0]:n,u=this._isSelectionEnabled()&&this.option("selectionByClick"),i,r;u&&t.itemData.selectable!==!1&&!this._hasSubmenu(t.itemData)&&(i=this._itemContainer().find(b),i.length&&(r=this._getItemData(i),i.removeClass(o),r&&(r.selected=!1)),t.itemData.selected=!0,this.option("selectedItems",[t.itemData]))},_syncSelectionOptions:function(t){var i=this._editStrategy._getPlainItems()||[],e=this.option("selectedItems")||[],r=this.option("selectedItem"),u=this.option("selectedIndex");t=t||this._chooseSelectOption();switch(t){case"selectedItems":this._setOptionSilent("selectedItem",e[0]),this._setOptionSilent("selectedIndex",n.inArray(e[0],i));break;case"selectedItem":f.isDefined(r)?(this._setOptionSilent("selectedItems",[r]),this._setOptionSilent("selectedIndex",n.inArray(r,i))):(this._setOptionSilent("selectedItems",[]),this._setOptionSilent("selectedIndex",-1));break;case"selectedIndex":f.isDefined(i[u])?(this._setOptionSilent("selectedItems",[i[u]]),this._setOptionSilent("selectedItem",i[u])):(this._setOptionSilent("selectedItems",[]),this._setOptionSilent("selectedItem",null))}},_getStringifiedArray:function(t){return n.map(t,function(n){return JSON.stringify(n)})},_isOwnItem:function(t){var i=this._editStrategy._getPlainItems();return n.inArray(JSON.stringify(t),this._getStringifiedArray(i))>=0},_optionChanged:function(n){switch(n.name){case"visible":this._toggleVisibility(n.value);break;case"_remoteSelectionSync":case"showSubmenuMode":case"cssClass":case"position":case"selectionByClick":case"animation":this._invalidate();break;default:this.callBase(n)}},selectItem:function(t){var i=this._editStrategy.getNormalizedIndex(t),u,r;i!==-1&&(u=n.inArray(i,this._selectedItemIndices),u===-1)&&this.option("selectionMode")==="single"&&(r=this._editStrategy.fetchSelectedItems([i]),r[0].selected=!0,this.option("selectedItems",r))},unselectItem:function(t){var r=this._editStrategy.getNormalizedIndex(t),i,u;r!==-1&&(i=n.inArray(r,this._selectedItemIndices),i!==-1)&&(u=this._editStrategy.fetchSelectedItems([i]),u[0].selected=!1,this.option("selectedItems",[]))}});u.dxMenuBase=g}(jQuery,DevExpress),function(n,t){var r=t.ui;r.CollectionWidget.MenuBaseEditStrategy=r.CollectionWidget.PlainEditStrategy.inherit({_getPlainItems:function(){return n.map(this._collectionWidget.option("items"),function t(i){return i.items?[i].concat(n.map(i.items,t)):i})},_getStringifiedArray:function(t){return n.map(t,function(n){return JSON.stringify(n)})},selectedItemIndices:function(){var t=[],i=this._getStringifiedArray(this._getPlainItems()),r=this._collectionWidget.option("selectedItems");return n.each(r,function(r,u){var f=n.inArray(JSON.stringify(u),i);f!==-1&&t.push(f)}),t},fetchSelectedItems:function(t){t=t||this._collectionWidget._selectedItemIndices;var r=this._getPlainItems(),i=[];return n.each(t,function(n,t){i.push(r[t])}),i}})}(jQuery,DevExpress),function(n,t){var o=t.ui,d=t.utils,e=o.events,h=t.fx,c="dx-menu",s=c+"-item",u=s+"-expanded",g="dx-menu-phone-overlay",f=c+"-items-container",nt=s+"-wrapper",r="dx-submenu",l="dx-context-menu",tt=l+"-content-delimiter",it="dx-has-context-menu",rt="dxSubmenuLevel",a="up",v="down",y="left",p="right",w="first",b="last",k=["onShowing","onShown","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],ut=[a,v,w,b];t.registerComponent("dxContextMenu",o,o.dxMenuBase.inherit({_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{direction:{since:"14.1",alias:"submenuDirection"},allowSelectItem:{since:"14.1",alias:"allowSelection"},showingAction:{since:"14.1",alias:"onShowing"},shownAction:{since:"14.1",alias:"onShown"},hiddenAction:{since:"14.1",alias:"onHidden"},hidingAction:{since:"14.1",alias:"onHiding"},positioningAction:{since:"14.1",alias:"onPositioning"}})},_setDefaultOptions:function(){this.callBase(),this.option({showSubmenuMode:"onHover",invokeOnlyFromCode:!1,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:window,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})},_initActions:function(){this._actions={},n.each(k,n.proxy(function(t,i){this._actions[i]=this._createActionByOption(i)||n.noop},this))},_setOptionsByReference:function(){this.callBase(),n.extend(this._optionsByReference,{animation:!0,position:!0,selectedItem:!0})},_itemContainer:function(){return this._overlay.content()},_supportedKeys:function(){return n.extend(this.callBase(),{esc:this.hide})},_moveFocus:function(n){var t=this._getItemsByLocation(n),r=this._getActiveItem(!0),i;switch(n){case a:if(i=this._prevItem(t),r.is(t.first()))this._actions.onLeftFirstItem(r);break;case v:if(i=this._nextItem(t),r.is(t.last()))this._actions.onLeftLastItem(r);break;case p:i=this.option("rtlEnabled")?this._hideSubmenuHandler(t):this._expandSubmenuHandler(t);break;case y:i=this.option("rtlEnabled")?this._expandSubmenuHandler(t):this._hideSubmenuHandler(t);break;case w:i=t.first();break;case b:i=t.last();break;default:return this.callBase(n)}this._resetFocusedItem(i)},_getItemsByLocation:function(t){var i,r=this._getActiveItem(!0),u=this.option("rtlEnabled")?y:p;return n.inArray(t,ut)>=0?i=r.closest("."+f).children().children():(i=this._itemElements(),t!==u&&(i=i.filter(":visible"))),i},_hideSubmenuHandler:function(){var t=this._getActiveItem(!0),i=t.parents("."+u).first();if(i.length)return this._hideSubmenusOnSameLevel(i),i;this._actions.onCloseRootSubmenu(t);return t},_expandSubmenuHandler:function(n){var t=this._getActiveItem(!0),i=t.children("."+r);if(i.length)return i.is(":visible")||this._showSubmenu(t),this._nextItem(n);this._actions.onExpandLastSubmenu(t);return t},_render:function(){this._target=n(this.option("target")),this.element().addClass(it),this.callBase()},_renderContentImpl:function(){this._renderContextMenuOverlay(),this._renderAdditionGraphicsElements(),this._attachShowContextMenuEvents(),this.callBase()},_renderContextMenuOverlay:function(){var r=this._getOverlayOptions(),i=n("<div>"),t;i.appendTo(this._$element).dxOverlay(r),this._overlay=i.dxOverlay("instance"),t=this._overlay.content(),t.addClass(l),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this.option("visible")&&this.show()},_addPlatformDependentClass:function(n){t.devices.current().phone&&n.addClass(g)},_renderAdditionGraphicsElements:function(){this.option("showAdditionalElements")&&(this.$contentDelimiter=n("<div>"),this.$contentDelimiter.appendTo(this._itemContainer()).addClass(tt).css({position:"absolute",display:"none","z-index":"2000"}))},_attachShowContextMenuEvents:function(){var t=this,i=e.addNamespace("dxhold",this.NAME),r=e.addNamespace("contextmenu",this.NAME),u=this._createAction(n.proxy(function(n){t.option("invokeOnlyFromCode")||e.isMouseEvent(n.jQueryEvent)||t.show(n.jQueryEvent)},this)),f=this._createAction(n.proxy(function(n){t.option("invokeOnlyFromCode")||t.show(n.jQueryEvent)&&(n.jQueryEvent.preventDefault(),n.jQueryEvent.originalEvent&&(n.jQueryEvent.originalEvent.returnValue=!1))},this));this._target.off(i).on(i,n.proxy(function(n){u({jQueryEvent:n})},this));this._target.off(r).on(r,n.proxy(function(n){f({jQueryEvent:n})},this))},_renderDimensions:n.noop,_renderContainer:function(t,i){var e=n("<div>"),u=n("<ul>"),o=t===1?this._itemContainer():i;return e.appendTo(o).addClass(r).data(rt,t).css("display",t===1?"block":"none"),u.appendTo(e).addClass(f),t===1&&(this.option("width")&&u.css("min-width",this.option("width")),this.option("height")&&u.css("min-height",this.option("height"))),u},_renderSubmenuItems:function(n,t,i){this._hasSubmenu(n)&&this._renderItems(n.items,++i,t)},_getOverlayOptions:function(){var t=this,i=t.option("position"),r=t.option("animation");return{focusStateEnabled:t.option("focusStateEnabled"),animation:r,closeOnOutsideClick:n.proxy(t._closeOnOutsideClickHandler,t),closeOnTargetScroll:!0,deferRendering:!1,disabled:t.option("disabled"),position:{at:i.at,my:i.my,of:t._target},shading:!1,showTitle:!1,height:"auto",width:"auto",rtlEnabled:t.option("rtlEnabled"),onShowing:n.proxy(t._overlayShowingActionHandler,t),onShown:n.proxy(t._overlayShownActionHandler,t),onHiding:n.proxy(t._overlayHidingActionHandler,t),onHidden:n.proxy(t._overlayHiddenActionHandler,t),onPositioned:n.proxy(t._overlayPositionedActionHandler,t)}},_overlayShowingActionHandler:function(n){this._actions.onShowing(n)},_overlayShownActionHandler:function(n){this._actions.onShown(n)},_overlayHidingActionHandler:function(n){this._actions.onHiding(n);this._hideAllShownSubmenus()},_overlayHiddenActionHandler:function(n){this._actions.onHidden(n);this._setOptionSilent("visible",!1)},_overlayPositionedActionHandler:function(){this._showAdditionalGraphicsElements()},_closeOnOutsideClickHandler:function(t){var i,r,u;return t.target===document?!0:(r=n(t.target).closest("."+f),u=this._overlay._$content.find("."+f),i=this._searchActiveItem(t.target),this._isIncludeOverlay(r,u)&&i.length)?(this._getShowSubmenuMode()==="onClick"&&this._hideAllShownChildSubmenus(i),!1):!0},_searchActiveItem:function(t){return n(t).closest("."+s).eq(0)},_isIncludeOverlay:function(t,i){var r=!1;return n.each(i,function(n,i){t.is(i)&&!r&&(r=!0)}),r},_hideAllShownChildSubmenus:function(t){var u=this,f=t.find("."+r),e=n.extend([],this._shownSubmenus),i;f.length>0&&n.each(e,function(n,r){i=u._searchActiveItem(r.context).parent(),i.parent().is(t.parent().parent())&&!i.is(t.parent())&&u._hideChildrenSubmenus(r)})},_showAdditionalGraphicsElements:function(){var f=this._itemContainer().children("."+r).eq(0),e=this.option("position").of,o=this.option("position").at,s=this.option("position").my,n={of:f},i,u;this.$contentDelimiter&&(i=this._itemContainer().offset(),u=e.offset(),this.$contentDelimiter.css("display","block"),this.option("orientation")==="horizontal"?(this.$contentDelimiter.width(e.width()<f.width()?e.width()-2:f.width()-2),this.$contentDelimiter.height(2),i.top>u.top?Math.round(i.left)===Math.round(u.left)?(n.offset="1 -1",n.at="left top",n.my="left top"):(n.offset="-1 -1",n.at="right top",n.my="right top"):(this.$contentDelimiter.height(4),Math.round(i.left)===Math.round(u.left)?(n.offset="1 2",n.at="left bottom",n.my="left bottom"):(n.offset="-1 2",n.at="right bottom",n.my="right bottom"))):this.option("orientation")==="vertical"&&(this.$contentDelimiter.width(2),this.$contentDelimiter.height(e.height()<f.height()?e.height()-2:f.height()-2),i.left>u.left?Math.round(i.top)===Math.round(u.top)?(n.offset="-1 1",n.at="left top",n.my="left top"):(n.offset="-1 -1",n.at="left bottom",n.my="left bottom"):Math.round(i.top)===Math.round(u.top)?(n.offset="1 1",n.at="right top",n.my="right top"):(n.offset="1 -1",n.at="right bottom",n.my="right bottom")),t.position(this.$contentDelimiter,n))},_showSubmenu:function(n){var t=n.children("."+r);this._hideSubmenusOnSameLevel(n),this.callBase(n),this._showSubmenuGroup(t,n)},_hideSubmenusOnSameLevel:function(n){var t=n.closest("."+f).find("."+u);t.length&&(t.removeClass(u),this._hideChildrenSubmenus(t.find("."+r)))},_hideSubmenuGroup:function(n){this._isSubmenuVisible(n)&&this._hideSubmenuCore(n)},_isSubmenuVisible:function(n){return n.css("display")!=="none"},_showSubmenuGroup:function(n,t,i){var r=t.closest("."+f).find("."+u).removeClass(u);(i||!this._isSubmenuVisible(n))&&(t.addClass(u),this._showSubmenuCore(n,this._getSubmenuPosition(t)))},_showSubmenuCore:function(i,r){var u=this.option("animation")?this.option("animation").show:{};this._overlay&&this._overlay.option("visible")&&(d.isDefined(this._shownSubmenus)||(this._shownSubmenus=[]),n.inArray(i,this._shownSubmenus)&&this._shownSubmenus.push(i),i.css("display","block"),t.position(i,r),this._stopAnimate(i),this._animate(i,u))},_animate:function(n,t){h.animate(n,t)},_getSubmenuPosition:function(n){var i=this.option("submenuDirection").toLowerCase(),r=this.option("rtlEnabled"),u=n.parent("."+nt),t={collision:"flip",of:u,offset:{h:0,v:-1}};switch(i){case"left":t.at="left top",t.my="right top";break;case"right":t.at="right top",t.my="left top";break;default:r?(t.at="left top",t.my="right top"):(t.at="right top",t.my="left top")}return t},_itemMouseLeaveHandler:function(t){var u=n(t.target),f=u.closest("."+r),i=this._shownSubmenus&&this._shownSubmenus[this._shownSubmenus.length-1];f.is(i)||this._hideChildrenSubmenus(i)},_updateOverlayVisibilityOnClick:function(t){var u,i,f;if(t.args.length&&t.args[0]){if(t.args[0].jQueryEvent.stopPropagation(),u=t.args[0].itemElement,i=u.children("."+r),u.context===i.context&&i.is(":visible"))return;if(!u.data(this._itemDataKey())||u.data(this._itemDataKey()).disabled)return;this._updateSelectedItemOnClick(t),i.length===0?(f=n(u.parents("."+r)[0]),this._hideChildrenSubmenus(f),!t.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)):(this._shownSubmenus&&this._shownSubmenus.length>0&&(this._shownSubmenus[0].is(i)||this._shownSubmenus[0].has(i).length===1?this._hideChildrenSubmenus(i):this._hideAllShownSubmenus()),this._showSubmenuGroup(i,u))}},_hideChildrenSubmenus:function(t){var i=this,r=n.extend([],i._shownSubmenus);n.each(r,function(n,r){(t.is(r)||t.has(r).length)&&i._hideSubmenuCore(r)})},_hideSubmenuCore:function(t){var i=n.inArray(t,this._shownSubmenus),r=this.option("animation")?this.option("animation").hide:{};i>=0&&this._shownSubmenus.splice(i,1),this._stopAnimate(t),this._animate(t,r.hide),t.css("display","none")},_stopAnimate:function(n){h.stop(n,!0)},_hideAllShownSubmenus:function(){var t=this,i=n.extend([],t._shownSubmenus),r=this._overlay.content().find("."+u);r.removeClass(u),n.each(i,function(n,i){t._hideSubmenuCore(i)})},_optionChanged:function(t){if(!this._cancelOptionChange){if(n.inArray(t.name,k)>-1){this._initActions();return}switch(t.name){case"invokeOnlyFromCode":break;case"items":this._overlay.option("visible")&&this._overlay.hide(),this.callBase(t);break;case"position":case"submenuDirection":case"target":this._invalidate();break;default:this._overlay&&this._overlay.option("visible")&&this._overlay.hide(),this.callBase(t)}}},_clean:function(){this._overlay&&(this._overlay.element().remove(),this._overlay=null),this._target.off(e.addNamespace("dxhold",this.NAME)),this._target.off(e.addNamespace("contextmenu",this.NAME))},_toggleVisibility:function(n){n?this.show():this.hide()},show:function(n){var t=this.option("position"),r=this._createActionByOption("onPositioning",i),i;return n&&n.preventDefault&&(t={at:"top left",my:"top left",of:n}),t.of||(t.of=this._target),i={position:t,jQueryEvent:n},r(i),!i.canceled&&this._overlay&&(t&&(this._overlay.option("position",null),this._overlay.option("position",t)),this._resetFocusedItem(this._itemElements().first()),this._overlay.show(),this._setOptionSilent("visible",!0)),this.option("visible")},hide:function(){this._overlay&&(this._overlay.hide(),this._setOptionSilent("visible",!1))}}))}(jQuery,DevExpress),function(n,t,i){var s=t.ui,y=t.utils,h=s.events,ft=t.fx,f="dx-menu",k=f+"-vertical",d=f+"-horizontal",p=f+"-item",w=f+"-items-container",c=p+"-expanded",l="dx-context-menu",a=l+"-container-border",o=p+"-selected",g="."+o,v=300,b=50,nt="up",tt="down",it="left",rt="right",e="showSubmenu",u="nextItem",r="prevItem",ut=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden"];t.registerComponent("dxMenu",s,s.dxMenuBase.inherit({_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{firstSubMenuDirection:{since:"14.1",alias:"submenuDirection"},showPopupMode:{since:"14.1",alias:"showFirstSubmenuMode"},allowSelectItem:{since:"14.1",alias:"allowSelection"},allowSelection:{since:"14.2",message:"Use the 'selectionMode' option instead"},submenuHiddenAction:{since:"14.2",alias:"onSubmenuHidden"},submenuHidingAction:{since:"14.2",alias:"onSubmenuHiding"},submenuShowingAction:{since:"14.2",alias:"onSubmenuShowing"},submenuShownAction:{since:"14.2",alias:"onSubmenuShown"}})},_setDefaultOptions:function(){this.callBase(),this.option({orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:"onClick",onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null})},_setOptionsByReference:function(){this.callBase(),n.extend(this._optionsByReference,{animation:!0,selectedItem:!0})},_focusTarget:function(){return this.element()},_eventBindingTarget:function(){return this.element()},_getOrientation:function(){return this.option("orientation")==="vertical"?"vertical":"horizontal"},_isMenuHorizontal:function(){return this._getOrientation()==="horizontal"},_moveFocus:function(n){var h=this._itemElements().filter(":visible"),i=this._isMenuHorizontal(),t,c=this._getActiveItem(!0),f,o,s;switch(n){case nt:f=i?e:this._getItemsNavigationOperation(r),t=i?c:h,o=this._getKeyboardNavigationAction(f,t),s=o();break;case tt:t?c:h,f=i?e:this._getItemsNavigationOperation(u),t=i?c:h,o=this._getKeyboardNavigationAction(f,t),s=o();break;case rt:f=i?this._getItemsNavigationOperation(u):e,t=i?h:c,o=this._getKeyboardNavigationAction(f,t),s=o();break;case it:f=i?this._getItemsNavigationOperation(r):e,t=i?h:c,o=this._getKeyboardNavigationAction(f,t),s=o();break;default:return this.callBase(n)}s&&this._resetFocusedItem(s)},_getItemsNavigationOperation:function(n){var t=n;return this.option("rtlEnabled")&&(t=n===r?u:r),t},_getKeyboardNavigationAction:function(t,i){var f;switch(t){case e:f=n.proxy(this._showSubmenu,this,i);break;case u:f=n.proxy(this._nextItem,this,i);break;case r:f=n.proxy(this._prevItem,this,i)}return f},_init:function(){this.callBase(),this._submenus=[]},_initActions:function(){this._actions={},n.each(ut,n.proxy(function(t,i){this._actions[i]=this._createActionByOption(i)||n.noop},this))},_render:function(){this.callBase(),this.element().addClass(f)},_renderContainer:function(){var r=this.option("orientation")==="vertical",t,i;return t=n("<div>"),t.appendTo(this.element()).addClass(r?k:d),i=n("<ul>"),i.appendTo(t).addClass(w).css("min-height",this._getValueHeight(t)),i},_renderSubmenuItems:function(n,t){if(this._hasSubmenu(n)){var i=this._createSubmenu(n.items,t);this._submenus.push(i),this._renderBorderElement(t)}},_createSubmenu:function(t,i){var f=this,u=n("<div>"),e=n.extend(this._getSubmenuOptions(),{items:t,position:f.getSubmenuPosition(i)}),r;return u.addClass(l).dxContextMenu(e).appendTo(i),r=u.dxContextMenu("instance"),this._attachSubmenuHandlers(i,r),r},_getSubmenuOptions:function(){var i=n("<div>"),t=this._isMenuHorizontal();return{_templates:this.option("_templates"),target:i,showAdditionalElements:!0,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),selectionByClick:this.option("selectionByClick"),cssClass:this.option("cssClass"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),rtlEnabled:this.option("rtlEnabled"),disabled:this.option("disabled"),showSubmenuMode:this._getShowSubmenuMode()==="auto"?this._getShowFirstSubmenuMode():this._getShowSubmenuMode(),onSelectionChanged:n.proxy(this._nestedItemOnSelectionChangedHandler,this),onItemClick:n.proxy(this._nestedItemOnItemClickHandler,this),onLeftFirstItem:t?null:n.proxy(this._moveMainMenuFocus,this,r),onLeftLastItem:t?null:n.proxy(this._moveMainMenuFocus,this,u),onCloseRootSubmenu:t?n.proxy(this._moveMainMenuFocus,this,r):null,onExpandLastSubmenu:t?n.proxy(this._moveMainMenuFocus,this,u):null,_remoteSelectionSync:!0}},_getShowFirstSubmenuMode:function(){var n=t.devices.real().deviceType==="desktop";return n?this.option("showFirstSubmenuMode"):"onClick"},_moveMainMenuFocus:function(n){var i=this.element().find("."+c).first(),t;switch(n){case r:t=i.parent().prev(),t.length||(t=i.parent().siblings().last()),t=t.children();break;case u:t=i.parent().next(),t.length||(t=i.parent().siblings().first()),t=t.children()}this._visibleSubmenu&&this._hideSubmenu(this._visibleSubmenu),this.focus(),this._resetFocusedItem(t)},_nestedItemOnSelectionChangedHandler:function(n){var t=n.addedItems,i=n.element.dxContextMenu("instance");this._clearSelectionInSubmenus(t[0],i),this._clearRootSelection(),this.option("selectedItems",t)},_clearSelectionInSubmenus:function(t,i){var r=this,u=!arguments.length;n.each(this._submenus,function(n,t){var s=t._itemContainer(),h=!s.is(i&&i._itemContainer()),f=s.find(g),e;(h&&f.length||u)&&(f.removeClass(o),e=r._getItemData(f),e&&(e.selected=!1),t._clearSelectedItems())})},_clearRootSelection:function(){var n=this.element().find("."+w).first().children().children().filter("."+o),t;n.length&&(t=this._getItemData(n),t.selected=!1,n.removeClass(o)),this._clearSelectedItems()},_nestedItemOnItemClickHandler:function(n){var i,t=this._createActionByOption("onItemClick",{});t(n)},_updateSelectedItemOnClick:function(n){var t=this.option("selectedIndex");this.callBase(n),t!==this.option("selectedIndex")&&this._clearSelectionInSubmenus()},_attachSubmenuHandlers:function(t,i){var f=i._overlay.content(),r=h.addNamespace("mouseenter",this.NAME+"_submenu"),u=h.addNamespace("mouseleave",this.NAME+"_submenu");i.option({onShowing:n.proxy(this._submenuOnShowingHandler,this,t,i),onShown:n.proxy(this._submenuOnShownHandler,this,t,i),onHiding:n.proxy(this._submenuOnHidingHandler,this,t,i),onHidden:n.proxy(this._submenuOnHiddenHandler,this,t,i)});f.off(r).off(u).on(r,null,n.proxy(this._submenuMouseEnterHandler,this,t)).on(u,null,n.proxy(this._submenuMouseLeaveHandler,this,t))},_submenuOnShowingHandler:function(n,r){var u=n.children("."+a),f=this.option("animation")?this.option("animation").show:{};this._actions.onSubmenuShowing({rootItem:n,submenu:r});this._options.width!==i&&(this._options.rtlEnabled?u.width(this._$element.width()-n.position().right):u.width(this._$element.width()-n.position().left)),u.css("display","block"),t.fx.stop(u,!0),t.fx.animate(u,f),n.addClass(c)},_submenuOnShownHandler:function(n,t){this._actions.onSubmenuShown({rootItem:n,submenu:t})},_submenuOnHidingHandler:function(n,i){var r=n.children("."+a),u=this.option("animation")?this.option("animation").hide:{};this._actions.onSubmenuHiding({rootItem:n,submenu:i});t.fx.animate(r,u),r.css("display","none"),n.removeClass(c)},_submenuOnHiddenHandler:function(n,t){this._actions.onSubmenuHidden({rootItem:n,submenu:t})},_submenuMouseEnterHandler:function(n){this._hoveredContextMenuContainer=n},_submenuMouseLeaveHandler:function(n){var t=this,i;setTimeout(function(){t._hoveredContextMenuContainer&&t._hoveredContextMenuContainer.is(t._hoveredRootItem)||(i=t._getSubmenuByRootElement(n),i&&t._hideSubmenu(i)),t._hoveredContextMenuContainer=null},b)},_getSubmenuByRootElement:function(n){var i=null,t;return n&&(t=n.children("."+l),t.length>0&&(i=t.dxContextMenu("instance"))),i},getSubmenuPosition:function(n){var i=this.option("orientation").toLowerCase()=="vertical",u=this.option("submenuDirection").toLowerCase(),r=this.option("rtlEnabled"),t={collision:"flip",of:n};switch(u){case"leftortop":t.at=i?"left top":"left top",t.my=i?"right top":"left bottom";break;case"rightorbottom":t.at=i?"right top":"left bottom",t.my=i?"left top":"left top";break;case"auto":default:i?(t.at=r?"left top":"right top",t.my=r?"right top":"left top"):(t.at=r?"right bottom":"left bottom",t.my=r?"right top":"left top")}return t},_renderBorderElement:function(t){n("<div>").appendTo(t).addClass(a).css("display","none")},_getValueHeight:function(t){var i=n("<div>").html("Jj").css({width:"auto",position:"fixed",top:"-3000px",left:"-3000px"}).appendTo(t),r=i.height();return i.remove(),r},_itemMouseEnterHandler:function(t){var i=this,f=h.addNamespace("mousemove",i.NAME),r=i._getItemElementByEventArgs(t),u=i._getSubmenuByRootElement(r),e=this._getShowFirstSubmenuMode(),o=e!=="onHover";if(!r.data(this._itemDataKey()).disabled&&e!=="onClick"&&u)if(clearTimeout(i._hideSubmenuTimer),clearTimeout(i._showSubmenuTimer),o&&i._visibleSubmenu==u&&!u._overlay.option("visible")){r.off(f).on(f,n.proxy(i._itemMouseMoveHandler,i));i._showSubmenuTimer=setTimeout(function(){i._showSubmenu(r)},v)}else i._showSubmenu(r)},_itemMouseLeaveHandler:function(n){var t=this,r=t._getItemElementByEventArgs(n),i,u=this._getShowFirstSubmenuMode(),f=this._getShowFirstSubmenuMode()!=="onHover"?v:b;r.data(this._itemDataKey()).disabled||u!=="onClick"&&(clearTimeout(t._showSubmenuTimer),clearTimeout(t._hideSubmenuTimer),t._hideSubmenuTimer=setTimeout(function(){i=t._getSubmenuByRootElement(r),t._hideSubmenu(i),t._visibleSubmenu==i&&(t._visibleSubmenu=null)},f))},_showSubmenu:function(n){var t=this._getSubmenuByRootElement(n);y.isDefined(this._visibleSubmenu)&&this._visibleSubmenu!==t&&this._hideSubmenu(this._visibleSubmenu),t&&t.show(),this._visibleSubmenu=t,this._hoveredRootItem=n},_hideSubmenu:function(n){this._hoveredRootItem&&this._hoveredRootItem.is(this._hoveredContextMenuContainer)||n&&n.hide(),this._hoveredRootItem=null},_itemMouseMoveHandler:function(n){var t=this,i=t._getItemElementByEventArgs(n),r;t._showSubmenuTimer&&(clearTimeout(t._hideSubmenuTimer),clearTimeout(t._showSubmenuTimer),r=t._getSubmenuByRootElement(i),t._showSubmenuTimer=setTimeout(function(){t._showSubmenu(i)},v))},_updateOverlayVisibilityOnClick:function(n){var r=this,t,i,u=n.args.length&&n.args[0];if(u){if(u.jQueryEvent.stopPropagation(),t=u.itemElement,t.data(this._itemDataKey()).disabled)return;i=r._getSubmenuByRootElement(t),this._updateSelectedItemOnClick(n),i?i._overlay.option("visible")?this._getShowFirstSubmenuMode()==="onClick"&&r._hideSubmenu(i):r._showSubmenu(t):y.isDefined(this._visibleSubmenu)&&this._hideSubmenu(this._visibleSubmenu)}},_optionChanged:function(n){if(!this._cancelOptionChange){this._visibleSubmenu&&this._hideSubmenu(this._visibleSubmenu);switch(n.name){case"selectedItems":var t=n.value[0];if(JSON.stringify(t)===JSON.stringify(n.previousValue[0]))return;this._isItemInSubmenu(t)?(this._syncSelectionOptions(n.name),this._normalizeSelectedItems()):this.callBase(n);break;case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":break;case"onSubmenuShowing":case"onSubmenuShown":case"onSubmenuHiding":case"onSubmenuHidden":this._initActions();break;default:this.callBase(n)}}},_isItemInSubmenu:function(t){return n.inArray(JSON.stringify(t),this._getStringifiedArray(this.option("items")))<0},selectItem:function(t){var i=this._getItemData(t);this._isItemInSubmenu(i)?n.each(this._submenus,function(n,r){r._isOwnItem(i)&&r.selectItem(t)}):this.callBase(t)}}))}(jQuery,DevExpress),function(n,t,i){var s=t.ui,l=s.events,r=t.data.utils,y=t.utils,p="dx-treeview",u="dx-treeview-node-container",f="dx-treeview-node-container-opened",e="dx-treeview-node",g="dx-treeview-focused-node",o="dx-treeview-item",nt="dx-treeview-focused-item",w="dx-treeview-item-with-checkbox",b="dx-treeview-item-data",c="dx-treeview-node-is-leaf",a="dx-treeview-toggle-item-visibility",h="dx-treeview-toggle-item-visibility-opened",k="dx-treeview-select-all-item",v="data-item-id",d=n.noop;t.registerComponent("dxTreeView",s,s.CollectionWidget.inherit({_supportedKeys:function(){var i=function(){this._changeCheckBoxState(this._$focusedItem)};return n.extend(this.callBase(),{enter:i,space:i})},_changeCheckBoxState:function(n){var t=n.find("> .dx-checkbox"),i,r;t.length&&(i=t.dxCheckBox("instance"),r=i.option("value"),this._updateItemSelection(!r,n.find("."+o).get(0),!0,n))},_activeStateUnit:"."+o,_setDefaultOptions:function(){this.callBase(),this.option({dataStructure:"tree",expandedItems:[],keyExpr:"id",displayExpr:null,selectedExpr:"selected",expandedExpr:"expanded",itemsExpr:"items",parentIdExpr:"parentId",showCheckBoxes:!1,selectNodesRecursive:!0,selectAllEnabled:!1,selectAllText:"("+Globalize.localize("dxList-selectAll")+")",onItemSelected:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",focusStateEnabled:!0,selectionMode:"multi"})},_initSelectedItems:n.noop,_syncSelectionOptions:n.noop,_fireSelectionChanged:function(){var t=this._selectionChangePromise;n.when(t).done(n.proxy(function(){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled"]})()},this))},_initExpressions:function(){this._compileKeyAccessors(),this._compileDisplayAccessors(),this._compileSelectedAccessors(),this._compileExpandedAccessors(),this._compileItemsAccessors(),this._compileParentIdAccessors()},_initDynamicTemplates:function(){this.option("displayExpr")?this._dynamicTemplates.item=new s.DefaultTemplate(n.proxy(function(t){var i=n("<div>");return t.icon&&n("<span>").addClass("dx-icon-"+t.icon).addClass("dx-icon").appendTo(i),t.iconSrc&&n("<img>").attr("src",t.iconSrc).addClass("dx-icon").appendTo(i),n("<span>").text(this._displayGetter(t)).appendTo(i),i},this)):delete this._dynamicTemplates.item},_compileKeyAccessors:function(){this._keyGetter=r.compileGetter(this.option("keyExpr")),this._keySetter=r.compileSetter(this.option("keyExpr"))},_compileDisplayAccessors:function(){this.option("displayExpr")||this.option("dataStructure")!=="plain"||this.option("displayExpr","text"),this._displayGetter=r.compileGetter(this.option("displayExpr")),this._displaySetter=r.compileSetter(this.option("displayExpr"))},_compileSelectedAccessors:function(){this._selectedGetter=r.compileGetter(this.option("selectedExpr")),this._selectedSetter=r.compileSetter(this.option("selectedExpr"))},_compileExpandedAccessors:function(){this._expandedGetter=r.compileGetter(this.option("expandedExpr")),this._expandedSetter=r.compileSetter(this.option("expandedExpr"))},_compileItemsAccessors:function(){this._itemsGetter=r.compileGetter(this.option("itemsExpr")),this._itemsSetter=r.compileSetter(this.option("itemsExpr"))},_compileParentIdAccessors:function(){this._parentIdGetter=r.compileGetter(this.option("parentIdExpr")),this._parentIdSetter=r.compileSetter(this.option("parentIdExpr"))},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return t.devices.real().generic&&!t.devices.isSimulator()},options:{hoverStateEnabled:!0}}])},_optionChanged:function(n){var u=n.name,t=n.value,i,r;switch(u){case"selectAllEnabled":t?this._$selectAllItem&&this._$selectAllItem.length||this._renderSelectAllItem():this._$selectAllItem&&(this._$selectAllItem.remove(),delete this._$selectAllItem);break;case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",t);break;case"scrollDirection":this._scrollableContainer.option("direction",t);break;case"selectedItems":if(this._$selectAllItem){if(i=this._$selectAllItem.dxCheckBox("instance"),r=i.option("value"),r&&this._itemsCount===t.length)return;this._suppressUpdateSelectAllItemValue=!0,this._$selectAllItem.dxCheckBox("instance").option("value",this._calculateSelectAllItemValue()),this._suppressUpdateSelectAllItemValue=!1}break;case"dataStructure":case"keyExpr":case"displayExpr":case"itemsExpr":case"selectedExpr":case"expandedExpr":case"parentIdExpr":case"showCheckBoxes":case"expandedItems":this._invalidate();break;case"selectNodesRecursive":case"onItemSelected":case"onItemExpanded":case"onItemCollapsed":break;default:this.callBase(n)}},_setOptionsByReference:function(){this.callBase(),n.extend(this._optionsByReference,{focusedItem:!0})},_nodes:[],_init:function(){this._initExpressions(),this.callBase(),this._initDynamicTemplates()},_render:function(){var t=this;this.element().addClass(p);this.element().off("dxpointerdown").on("dxpointerdown",function(i){var r=n(i.target).closest(t._activeStateUnit);r.length||i.preventDefault()});this.callBase()},_makePlainItems:function(){return this._makePlainList(this.option("items"),null,!0)},_makePlainNodes:function(){return this._makePlainList(this._nodes,null,!0)},_updateSelectionItemsOption:function(t){var r=this,i=[];return n.each(t,function(n,t){r._selectedGetter(t)&&i.push(t)}),i},_renderContentImpl:function(){var t,r,u,i;this._nodes=n.extend(!0,[],this.option("items")),t=this._nodes,t.length&&(this.option("dataStructure")==="plain"&&(this._nodes=this._createHierarchicalStructure(this._nodes),t=this._nodes),this._plainItems=this._makePlainItems(),this._plainNodes=this._makePlainNodes(),this._applyExpandedItemsFromOption(),this._applySelectedItemsFromOption(t),r=this._makePlainList(t,null),this.option("selectNodesRecursive")&&(t=this._calculateChildrenSelectedState(t),this._calculateParentSelectedState(r)),this._calculateParentExpandedState(r),this._createParentFieldForEachItem(t),u=this._updateSelectionItemsOption(this._plainItems),u.length&&this.option("selectedItems",u),this._renderScrollableContainer(),i=this._renderNodeContainer(),this._renderItems(i,t,!0),this._scrollableContainer.content().append(i),this.option("selectAllEnabled")&&this._renderSelectAllItem(i))},_fireContentReadyAction:function(){this.callBase(),this._scrollableContainer&&this._scrollableContainer.content().height()>this.element().height()&&(this._scrollableContainer.update(),d())},_createHierarchicalStructure:function(t){var i=[],r=this;return n.each(t,function(n,t){var u=r._parentIdGetter(t),f;t.items||(t.items=[]),u?r._makeChildren(i,u,t):(f=r._createNode(t),i.push(f))}),i},_makeChildren:function(n,t,i){for(var f,r=0,u=n.length;r<u;r++)if(this._keyGetter(n[r])===t){f=this._createNode(i),n[r].items.push(f);break}else this._makeChildren(n[r].items,t,i)},_createNode:function(n){var t={};return this._keySetter(t,this._keyGetter(n)),this._displaySetter(t,this._displayGetter(n)),this._itemsSetter(t,this._itemsGetter(n)),this._expandedSetter(t,this._expandedGetter(n)),t},_createParentFieldForEachItem:function(t,i){var r=this,i=i?n.extend(!0,{},i):null;n.each(t,function(t,u){r._itemsCount++,y.isDefined(i)&&r._itemsGetter(i)&&r._itemsSetter(i,null),n.isPlainObject(u)||(u=r._makeObjectFromPrimitive(u)),u.parent=i,r._plainNodes[r._keyGetter(u)].parent=i,r._itemHasChildren(u)&&r._createParentFieldForEachItem(r._itemsGetter(u),u)})},_makeObjectFromPrimitive:function(n){var t=n;return n={},this._keySetter(n,t),n},_itemHasChildren:function(n){var t=this._itemsGetter(n);return t&&t.length},_renderScrollableContainer:function(){var t=n("<div />").dxScrollable({direction:this.option("scrollDirection"),useKeyboard:!1}).appendTo(this.element());this._scrollableContainer=t.dxScrollable("instance")},_renderNodeContainer:function(t){var i=n("<ul />").addClass(u),r;return t&&(r=this._getItemData(t.find("> ."+o)),this._expandedGetter(r)&&i.addClass(f),i.appendTo(t)),i},_itemsCount:0,_renderItems:function(t,i){var r=this,u=r.option("showCheckBoxes");n.each(i,function(i,o){var s=n("<li />").addClass(e).appendTo(t).attr(v,r._keyGetter(o)),a,h,l;n.isPlainObject(o)||(o=r._makeObjectFromPrimitive(o)),a=r._getSourceItemByKey(r._keyGetter(o)),r._renderItem.call(r,i,a,s),u&&r._renderCheckBox(s,o),h=r._itemsGetter(o),n.isArray(h)&&h.length?(r._renderToggleItemVisibilityIcon(s,o),l=r._renderNodeContainer(s),r._expandedGetter(o)&&(r._renderItems(l,h,!1),l.addClass(f))):s.addClass(c)}),this._renderFocusTarget()},_getSourceItemByKey:function(n){return this._plainItems[n]},_getNodeByKey:function(n){return this._plainNodes[n]},_renderSelectAllItem:function(t){t=t||this.element().find("."+u).first(),this._$selectAllItem=n("<div />").dxCheckBox({value:this._calculateSelectAllItemValue(),text:this.option("selectAllText"),onValueChanged:n.proxy(this._selectAllItemValueChanged,this)}).addClass(k),t.before(this._$selectAllItem)},_calculateSelectAllItemValue:function(){var n=!1,t=this.option("selectedItems").length;return t&&(n=this._itemsCount===t?!0:i),n},_selectAllItemValueChanged:function(n){if(!this._suppressUpdateSelectAllItemValue){if(this._updateAllItems(this._nodes,n.value),n.value){var t=this._updateSelectionItemsOption(this._plainItems);this.option("selectedItems",t)}else this.option("selectedItems",[]);this._fireSelectionChanged()}},_updateAllItems:function(t,i){var r=this;n.each(t,function(n,t){var u=r.element().find("["+v+"='"+r._keyGetter(t)+"']"),f=r._getSourceItemByKey(r._keyGetter(t)),e=r._selectedGetter(t);if(e===i)return!0;u.length&&u.find("> .dx-checkbox").dxCheckBox("instance").option("value",i),r._selectedSetter(t,i),r._selectedSetter(f,i),u=null,r._itemHasChildren(t)&&r._updateAllItems(r._itemsGetter(t),i)})},_applySelectedItemsFromOption:function(t){var i=this;n.each(this.option("selectedItems"),function(n,r){var u=i._getItemFromArray(r,t),f,e;u&&(f=i._getNodeByKey(i._keyGetter(u)),i._selectedSetter(u,!0),i._selectedSetter(f,!0)),e=i._getNodeByKey(i._keyGetter(r)),i._selectedSetter(r,!0),i._selectedSetter(e,!0)})},_applyExpandedItemsFromOption:function(){var t=this;n.each(this.option("expandedItems"),function(n,i){var r=t._getNodeByKey(t._keyGetter(i));t._expandedSetter(i,!0),t._expandedSetter(r,!0)})},_calculateChildrenSelectedState:function(t){var i=this;return n.each(t,function(t,r){i._selectedGetter(r)&&i._itemHasChildren(r)&&n.each(i._itemsGetter(r),function(n,t){var r=i._getSourceItemByKey(i._keyGetter(t));i._selectedSetter(t,!0),i._selectedSetter(r,!0)}),i._itemHasChildren(r)&&i._itemsSetter(r,i._calculateChildrenSelectedState(i._itemsGetter(r)))}),t},_makePlainList:function(t,i,r){var u=this,f=r?{}:[];return i=i||f,n.each(t,function(t,f){r?(n.isPlainObject(f)||(f=u._makeObjectFromPrimitive(f)),i[u._keyGetter(f)]=f):i.push(f),u._itemHasChildren(f)&&u._makePlainList(u._itemsGetter(f),i,r)}),i},_calculateParentSelectedState:function(t){for(var c=t.length-1,e=this,u,f,s,r=c;r>=0;r--)if(!this._selectedGetter(t[r])&&(u=this._itemsGetter(t[r]),f=0,u&&u.length&&(f=u.length),f)){var h=n.grep(u,function(n){return e._selectedGetter(n)===!0}),l=n.grep(u,function(n){return n.hasOwnProperty(e.option("selectedExpr"))&&typeof e._selectedGetter(n)=="undefined"}),o=this._getSourceItemByKey(this._keyGetter(t[r]));h.length?(s=h.length===f?!0:i,this._selectedSetter(t[r],s),this._selectedSetter(o,s)):l.length?(this._selectedSetter(t[r],i),this._selectedSetter(o,i)):(this._selectedSetter(t[r],!1),this._selectedSetter(o,!1))}return t},_calculateParentExpandedState:function(t){for(var o=t.length-1,s=this,r,u,f,e,i=o;i>=0;i--)this._expandedGetter(t[i])||(r=this._itemsGetter(t[i]),u=0,r&&r.length&&(u=r.length),u&&(f=n.grep(r,function(n){return s._expandedGetter(n)===!0}),f.length&&(e=this._getSourceItemByKey(this._keyGetter(t[i])),this._expandedSetter(t[i],!0),this._expandedSetter(e,!0))))},_renderCheckBox:function(t,i){var u=this._calculateCheckBoxValue(i),r;t.addClass(w),r=n("<div />").dxCheckBox({value:u,onValueChanged:n.proxy(this._changeCheckboxValue,this),focusStateEnabled:!1}).appendTo(t),this._attachCheckboxClick(r,i)},_attachCheckboxClick:function(t,i){var r=l.addNamespace("dxclick",this.NAME),u=this._keyGetter(i),f=function(n){this._itemJQueryEventHandler(n,"onItemSelected",{node:this._getNodeByKey(u)})};t.off(r).on(r,n.proxy(f,this))},_renderToggleItemVisibilityIcon:function(t,i){var r=n("<div />").addClass(a).appendTo(t);this._expandedGetter(i)&&(r.addClass(h),t.parent().addClass(f)),this._renderToggleItemVisibilityIconClick(r)},_renderToggleItemVisibilityIconClick:function(n){var i=l.addNamespace("dxclick",this.NAME),t=this,r=this._createAction(function(){n.toggleClass(h);var r=n.parent(),i=r.find(" > ."+u);t._renderNestedItems(i),i.toggleClass(f),t._scrollableContainer.update()}),e=function(n){t._itemJQueryEventHandler(n,"onItemExpanded")},o=function(n){t._itemJQueryEventHandler(n,"onItemCollapsed")};n.off(i).on(i,function(t){r({jQueryEvent:t}),n.hasClass(h)?e(t):o(t)})},_renderNestedItems:function(n){if(n.is(":empty")){var t=this._getItemData(n.parent().find(">."+o)),i=this._keyGetter(t),r=this._getNodeByKey(i);this._renderItems(n,this._itemsGetter(r),!1)}},_calculateCheckBoxValue:function(n){return n.hasOwnProperty(this.option("selectedExpr"))?this._selectedGetter(n):!1},_changeCheckboxValue:function(n){var r=n.element.parent("."+e),t=this._getItemData(r.find("> ."+o)),i=n.value,u=this._keyGetter(t),f=this._getNodeByKey(u);(this._selectedSetter(t,i),this._selectedSetter(f,i),n.jQueryEvent&&!this.option("selectNodesRecursive")&&this._fireSelectionChanged(),n.jQueryEvent&&this.option("selectNodesRecursive"))&&this._updateParentsAndChildren(this._getNodeByKey(this._keyGetter(t)),i,!1,r)},_updateParentsAndChildren:function(n,t,i,r){n.parent&&this._updateParentsState(n,r),this._itemHasChildren(n)&&this._updateChildrenState(this._itemsGetter(n),t,r);var u=this._updateSelectionItemsOption(this._plainItems);this.option("selectedItems",u),i||this._fireSelectionChanged()},_itemRenderDefault:function(t,i,r){var u=n("<div />");n("<span>").text(this._displayGetter(t)).appendTo(u),u.appendTo(r)},_getItemFromArray:function(t,i){var r=null,u=this,f=u._keyGetter(t);return n.each(i,function(n,t){if(f===u._keyGetter(t))return r=t,!1}),r},_calculateSelectedItemsOption:function(n,t){var i=this._keyGetter(t),r=this._getNodeByKey(i);this._selectedSetter(t,n),this._selectedSetter(r,n)},_reduceSelectedItemsOption:function(t,i){var r=this,u=r._keyGetter(i);n.each(t,function(n,i){if(u===r._keyGetter(i)){var f=t.splice(n,1)[0];return!1}})},_updateParentsState:function(t,r){var c=this._getSourceItemByKey(this._keyGetter(t)),f=this._getNodeByKey(this._keyGetter(t.parent)),o=this,s;n.each(this._itemsGetter(f),function(n,i){o._keyGetter(t)===o._keyGetter(i)&&o._selectedSetter(i,o._selectedGetter(t))});var l=this._itemsGetter(f).length,h=this._getSelectedChildrenFromNode(f),a=this._getIntermediateChildrenFromNode(f),u=i;h===l?u=!0:h||a||(u=!1),r&&(s=n(r.parents("."+e)[0]),s.find("> .dx-checkbox").dxCheckBox("instance").option("value",u)),this._updateParentField(c,u),t.parent.parent&&this._updateParentsState(t.parent,s),this._calculateSelectedItemsOption(u,this._getSourceItemByKey(this._keyGetter(t.parent)))},_getSelectedChildrenFromNode:function(t){var i=this._itemsGetter(t),r=this;return i&&i.length?n.grep(i,function(n){return r._selectedGetter(n)===!0}).length:0},_getIntermediateChildrenFromNode:function(t){var r=this._itemsGetter(t),u=this;return r&&r.length?n.grep(r,function(n){return n.hasOwnProperty(u.option("selectedExpr"))&&u._selectedGetter(n)===i}).length:0},_updateChildrenState:function(t,i,r){var f=this,e;n.each(t,function(n,t){var r=f._getSourceItemByKey(f._keyGetter(t));f._updateParentField(r,i),f._calculateSelectedItemsOption(i,r),f._itemHasChildren(t)&&f._updateChildrenState(f._itemsGetter(t),i)}),r&&(e=r.find("> ."+u),e.find(".dx-checkbox").each(function(t,r){n(r).dxCheckBox("instance").option("value",i)}))},_updateParentField:function(n,t){var i=this._getNodeByKey(this._keyGetter(n));i.parent!==null&&this._selectedSetter(i.parent,t)},_itemEventHandlerImpl:function(t,i,r){var u=n(t).closest("."+e).find("> ."+o);return r=n.extend({itemElement:u,itemData:this._getItemData(u)},r),i(r)},_itemClass:function(){return o},_itemDataKey:function(){return b},_selectionEnabled:function(){return!0},_focusElementClass:function(){return e},_itemClickHandler:function(n){this._itemJQueryEventHandler(n,"onItemClick"),this._focusTarget().focus(),this._focusTarget().focusin()},_updateItemSelection:function(n,t,i,r){var f=t.nodeType?this._getItemData(t):t,u=this._getNodeByKey(this._keyGetter(f)),s=this._selectedGetter(u),o,e;s!==n&&(r&&r.find("> .dx-checkbox").dxCheckBox("instance").option("value",n),this._selectedSetter(u,n),this._selectedSetter(f,n),this._calculateSelectedItemsOption(n,u),this.option("selectNodesRecursive")?this._updateParentsAndChildren(u,n,i,r):(o=this._updateSelectionItemsOption(this._plainItems),this.option("selectedItems",o)),e=this.option("onItemSelected"),e&&e.call(this,{itemData:f,node:u}))},_enlargeExpandedItemsOption:function(n,t){return this._getItemFromArray(n,t)||t.push(n),n.parent&&this._enlargeExpandedItemsOption(n.parent,t),t},_reduceExpandedItemsOption:function(t,i){var r=this,u=r._keyGetter(t);return n.each(i,function(f,e){if(r._keyGetter(e)===u){var o=r._getSourceItemByKey(u);r._expandedSetter(t,!1),r._expandedSetter(o,!1),i.splice(f,1),r._itemHasChildren(t)&&n.each(r._itemsGetter(t),function(n,t){var u=r._getSourceItemByKey(r._keyGetter(t));r._expandedSetter(t,!1),r._expandedSetter(u,!1),r._reduceExpandedItemsOption(t,i)})}}),i},_moveFocus:function(n){var i="up",r="down",u="first",f="last",s="enter",e=this.option("rtlEnabled")?"right":"left",o=this.option("rtlEnabled")?"left":"right",t=this._nodeElements();switch(n){case i:this._resetFocusedItem(this._prevItem(t));break;case r:this._resetFocusedItem(this._nextItem(t));break;case u:this._resetFocusedItem(t.first());break;case f:this._resetFocusedItem(t.last());break;case o:this._expandFocusedContainer();break;case e:this._collapseFocusedContainer();break;default:this.callBase.apply(this,arguments);return}},_nodeElements:function(){return this.element().find("."+e).not(":hidden")},_expandFocusedContainer:function(){this._$focusedItem.hasClass(c)||(this._renderNestedItems(this._$focusedItem.find("> ."+u)),this._$focusedItem.find("."+u).eq(0).toggleClass(f,!0),this._refreshActiveNode(this._$focusedItem,!0))},_collapseFocusedContainer:function(){var n,i=this._$focusedItem.find("."+u).eq(0),t;!this._$focusedItem.hasClass(c)&&i.hasClass(f)?(i.toggleClass(f,!1),n=this._$focusedItem):(t=this._$focusedItem.parent("."+u),t.toggleClass(f,!1),n=t.parent("."+e).eq(0),n.length||(n=this._$focusedItem)),this._refreshActiveNode(n,!1)},_refreshActiveNode:function(n,t){this._scrollableContainer.update(),this._resetFocusedItem(n),this._toggleFocusedNodeIcon(t)},_toggleFocusedNodeIcon:function(n){this._$focusedItem.find("."+a).eq(0).toggleClass(h,n)},updateDimensions:function(){var t=this,i=n.Deferred();return t._scrollableContainer?t._scrollableContainer.update().done(function(){i.resolveWith(t)}):i.resolveWith(t),i.promise()},selectItem:function(n){this._updateItemSelection(!0,n)},unselectItem:function(n){this._updateItemSelection(!1,n)},expandItem:function(t){this._renderNestedItems(n(t).parent().find("> ."+u));var i=this._getItemData(t),r=this._getNodeByKey(this._keyGetter(i)),e=this._enlargeExpandedItemsOption(r,this.option("expandedItems")),f=this.option("onItemExpanded");f&&f.call(this,{itemData:i,node:r}),this.option("expandedItems",e)},collapseItem:function(n){var t=this._getItemData(n),i=this._getNodeByKey(this._keyGetter(t)),u=this._reduceExpandedItemsOption(i,this.option("expandedItems")),r=this.option("onItemCollapsed");r&&r.call(this,{itemData:t,node:i}),this.option("expandedItems",u)},getNodes:function(){return this._nodes}}))}(jQuery,DevExpress),function(n,t){var i=t.ui,r=t.utils,c=".dx-row",l="Specifying grid templates with the name of a jQuery selector is now deprecated. Instead, use the jQuery object that references this selector.",e=t.Class.inherit({ctor:function(t){var i=this;i.component=t,i._actions={},i._actionConfigs={},n.each(this.callbackNames()||[],function(t,r){var u=i.callbackFlags(r);i[this]=n.Callbacks(u)})},callbackNames:function(){},callbackFlags:function(){},publicMethods:function(){},init:function(){},option:function(){return this.component.option.apply(this.component,arguments)},on:function(){return this.component.on.apply(this.component,arguments)},off:function(){return this.component.off.apply(this.component,arguments)},optionChanged:function(n){n.name in this._actions&&this.createAction(n.name,this._actionConfigs[n.name])},getController:function(n){return this.component._controllers[n]},createAction:function(t,i){var u;if(r.isFunction(t))return u=this.component._createAction(n.proxy(t,this),i),function(n){u({jQueryEvent:n})};this._actions[t]=this.component._createActionByOption(t,i),this._actionConfigs[t]=i},executeAction:function(n,t){var i=this._actions[n];return i&&i(t)},dispose:function(){var t=this;n.each(t.callbackNames()||[],function(){t[this].empty()})}}),f=e,a=f.inherit({getView:function(n){return this.component._views[n]},getViews:function(){return this.component._views}}),o=e.inherit({element:function(){return this._$element},_renderCore:function(){},_resizeCore:function(){},_afterRender:function(){},_parentElement:function(){return this._$parent},ctor:function(t){this.callBase(t),this.renderCompleted=n.Callbacks(),this.resizeCompleted=n.Callbacks()},isVisible:function(){return!0},getTemplate:function(n){return this.component._getTemplate(n)},render:function(t,i){var r=this._$element,u=this.isVisible();this._$parent=t,r||(r=this._$element=n("<div />").appendTo(t)),r.toggle(u),u&&(this._renderCore(i),this._afterRender(t),this.renderCompleted.fire())},resize:function(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1},focus:function(){this.element().focus()}}),s=function(i,r){var u={},e={},h,s;n.each(r,function(){var r=this.controllers,i=this.name,s=this.views;r&&n.each(r,function(n,r){if(u[n])throw t.Error("E1001",i,n);else if(!(r&&r.subclassOf&&r.subclassOf(f))){r.subclassOf(f);throw t.Error("E1002",i,n);}u[n]=r}),s&&n.each(s,function(n,r){if(e[n])throw t.Error("E1003",i,n);else if(!(r&&r.subclassOf&&r.subclassOf(o)))throw t.Error("E1004",i,n);e[n]=r})}),n.each(r,function(){var t=this.extenders;t&&(t.controllers&&n.each(t.controllers,function(n,t){u[n]&&(u[n]=u[n].inherit(t))}),t.views&&n.each(t.views,function(n,t){e[n]&&(e[n]=e[n].inherit(t))}))}),h=function(i,r,u){var f=u.publicMethods();f&&n.each(f,function(n,f){if(u[f])if(i[f])throw t.Error("E1005",f);else i[f]=function(){return u[f].apply(u,arguments)};else throw t.Error("E1006",r,f);})},s=function(t){var r={};return n.each(t,function(n,t){var u=new t(i);u.name=n,h(i,n,u),r[n]=u}),r},i._controllers=s(u),i._views=s(e)},u=function(t,i,r){r=r||[],t._controllers&&n.each(t._controllers,function(){this[i]&&this[i].apply(this,r)}),t._views&&n.each(t._views,function(){this[i]&&this[i].apply(this,r)})},h;t.registerComponent("dxDataGrid",i,i.Widget.inherit({_activeStateUnit:c,_setDeprecatedOptions:function(){this.callBase(),n.extend(this._deprecatedOptions,{rowClick:{since:"14.2",alias:"onRowClick"},cellClick:{since:"14.2",alias:"onCellClick"},cellHoverChanged:{since:"14.2",alias:"onCellHoverChanged"},cellPrepared:{since:"14.2",message:"The cellPrepared option is deprecated. Use the onCellPrepared option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onCellPrepared"},rowPrepared:{since:"14.2",message:"The rowPrepared option is deprecated. Use the onRowPrepared option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onRowPrepared"},selectionChanged:{since:"14.2",alias:"onSelectionChanged"},"editing.texts.recoverRow":{since:"14.1",alias:"editing.texts.undeleteRow"},dataErrorOccurred:{since:"14.2",alias:"onDataErrorOccurred"},initNewRow:{since:"14.2",alias:"onInitNewRow"},rowInserting:{since:"14.2",alias:"onRowInserting"},rowInserted:{since:"14.2",alias:"onRowInserted"},editingStart:{since:"14.2",alias:"onEditingStart"},rowUpdating:{since:"14.2",alias:"onRowUpdating"},rowUpdated:{since:"14.2",alias:"onRowUpdated"},rowRemoving:{since:"14.2",alias:"onRowRemoving"},rowRemoved:{since:"14.2",alias:"onRowRemoved"},editorPreparing:{since:"14.2",message:"The editorPreparing option is deprecated. Use the onEditorPreparing option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onEditorPreparing"},editorPrepared:{since:"14.2",message:"The editorPrepared option is deprecated. Use the onEditorPrepared option instead. For further information, see http://js.devexpress.com/Documentation/ApiReference/UI_Widgets/dxDataGrid/Configuration/?version=14_2#onEditorPrepared"},contentReadyAction:{since:"14.2",alias:"onContentReady"}})},_setDefaultOptions:function(){var t=this;t.callBase(),n.each(i.dxDataGrid.modules,function(){n.isFunction(this.defaultOptions)&&t.option(this.defaultOptions())})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:function(){return DevExpress.browser.webkit},options:{loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:function(){return t.devices.real().ios},options:{loadingTimeout:30}}])},_init:function(){var n=this;n.callBase(),s(n,i.dxDataGrid.modules),u(n,"init")},_clean:n.noop,_optionChanged:function(n){var t=this;t.callBase(n),u(t,"optionChanged",[n])},_dimensionChanged:function(){this.resize()},_visibilityChanged:function(){this.resize()},_renderContentImpl:function(){var n=this;n.getView("gridView").render(n.element())},_renderContent:function(){this._renderContentImpl()},_getTemplate:function(i){var r=i;return t.utils.isString(r)&&r[0]==="#"&&(r=n(i),t.utils.logger.warn(l)),this.callBase(r)},_dispose:function(){var n=this;n.callBase(),u(n,"dispose")},beginUpdate:function(){var n=this;n.callBase(),u(n,"beginUpdate")},endUpdate:function(){var n=this;u(n,"endUpdate"),n.callBase()},getController:function(n){return this._controllers[n]},getView:function(n){return this._views[n]}})),h=3,n.extend(i.dxDataGrid,{__internals:{},modules:[],View:o,ViewController:a,Controller:f,registerModule:function(n,t){for(var r=this.modules,i=0;i<r.length;i++)if(r[i].name===n)return;t.name=n,r.push(t)},unregisterModule:function(t){this.modules=n.grep(this.modules,function(n){return n.name!==t})},processModules:s,formatValue:function(n,i){var r=t.formatHelper.format(n,i.format,i.precision)||n&&n.toString()||"",u={value:n,valueText:i.getDisplayFormat?i.getDisplayFormat(r):r};return i.customizeText?i.customizeText.call(i,u):u.valueText},getSummaryText:function(n,t){var i=n.displayFormat||t[n.summaryType+(n.columnCaption?"OtherColumn":"")];return this.formatValue(n.value,{format:n.valueFormat,precision:n.precision,getDisplayFormat:function(t){return i?r.stringFormat(i,t,n.columnCaption):t},customizeText:n.customizeText})},equalKeys:function(n,t,u){var f,e;if(u=u||0,u<h){if(r.isObject(n)&&r.isObject(t)){for(f in n)if(n.hasOwnProperty(f)&&!i.dxDataGrid.equalKeys(n[f],t[f],u+1))return!1;for(f in t)if(!(f in n))return!1;return!0}if(r.isArray(n)&&r.isArray(t)){if(n.length!==t.length)return!1;for(e=0;e<n.length;e++)if(!i.dxDataGrid.equalKeys(n[e],t[e],u+1))return!1;return!0}return r.isDate(n)&&r.isDate(t)?n.getTime()===t.getTime():n===t}return!0},getIndexByKey:function(t,r){var u=-1;return n.each(r,function(n,r){if(i.dxDataGrid.equalKeys(t,r.key))return u=n,!1}),u}})}(jQuery,DevExpress),function(n,t){var r=t.ui,u=t.utils,i=r.dxDataGrid;i.StateStoringController=i.ViewController.inherit(function(){var i=function(n){var t=n.type==="sessionStorage"?sessionStorage:localStorage;if(!t)throw new Error("E1007");return t},r=function(n){return"dx_datagrid_"+(u.isDefined(n.storageKey)?n.storageKey:"storage")},f=function(n,t){var i;return typeof t=="string"&&(i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(t),i)?new Date(Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5],+i[6])):t},e=function(t){var r=t.getController("columns"),u=t.getController("selection"),i=t.getController("data"),f=t.getView("pagerView");r&&r.columnsChanged.add(function(){n.extend(t._state,{columns:r.getUserState()}),t.isEnabled()&&t.save()}),u&&u.selectionChanged.add(function(i){n.extend(t._state,{selectedRowKeys:i}),t.isEnabled()&&t.save()}),i&&i.changed.add(function(){n.extend(t._state,{searchText:t.option("searchPanel.text"),pageIndex:i.pageIndex(),pageSize:i.pageSize(),allowedPageSizes:f?f.getPageSizes():undefined}),t.isEnabled()&&t.save()})},o=function(n,t){var i=t.allowedPageSizes,u=t.searchText,f=t.selectedRowKeys,r=n.getController("columns"),e=n.getController("data");n.component.beginUpdate(),r&&r.setUserState(t.columns),n.option("selectedRowKeys",f||[]),i&&n.option("pager.allowedPageSizes")==="auto"&&(n.option("pager").allowedPageSizes=i),n.option("searchPanel.text",u||""),n.option("paging",{enabled:n.option("paging.enabled"),pageIndex:t.pageIndex,pageSize:t.pageSize||20}),n.component.endUpdate()};return{_loadState:function(){var n=this.option("stateStoring");if(n.type==="custom")return n.customLoad&&n.customLoad();try{return JSON.parse(i(n).getItem(r(n)),f)}catch(u){t.utils.logger.error(u.message)}},_saveState:function(n){var t=this.option("stateStoring");if(t.type==="custom"){t.customSave&&t.customSave(n);return}try{i(t).setItem(r(t),JSON.stringify(n))}catch(u){}},publicMethods:function(){return["state"]},isEnabled:function(){return this.option("stateStoring.enabled")},init:function(){var t=this;t._state={},t._isLoaded=!1,t._isLoading=!1,t._windowUnloadHandler=function(){t._savingTimeoutID!==undefined&&t._saveState(t.state())},n(window).on("unload",t._windowUnloadHandler),e(t)},isLoaded:function(){return this._isLoaded},isLoading:function(){return this._isLoading},load:function(){var i=this,t;return i._isLoading=!0,t=i._loadState(),t&&n.isFunction(t.done)||(t=n.Deferred().resolve(t)),t.done(function(n){i._isLoaded=!0,i._isLoading=!1,i.state(n)}),t},state:function(t){var i=this;if(t)n.extend(i._state,t),o(i,n.extend({},i._state));else return n.extend(!0,{},i._state)},save:function(){var n=this;clearTimeout(n._savingTimeoutID),n._savingTimeoutID=setTimeout(function(){n._saveState(n.state()),n._savingTimeoutID=undefined},n.option("stateStoring.savingTimeout"))},dispose:function(){clearTimeout(this._savingTimeoutID),n(window).off("unload",this._windowUnloadHandler)}}}()),i.registerModule("stateStoring",{defaultOptions:function(){return{stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}},controllers:{stateStoring:r.dxDataGrid.StateStoringController},extenders:{controllers:{columns:{getVisibleColumns:function(){var n=this.callBase();return this.getController("stateStoring").isLoading()?[]:n}},data:{_refreshDataSource:function(){var n=this,i=n.callBase,t=n.getController("stateStoring");t.isEnabled()&&!t.isLoaded()?t.load().done(function(){i.call(n)}):i.call(n)},isLoading:function(){var n=this,t=n.getController("stateStoring");return this.callBase()||t.isLoading()}}}}})}(jQuery,DevExpress),function(n,t,i){var h=t.ui,e=h.dxDataGrid,u=t.utils,f=t.data.utils,o=f.normalizeSortingInfo,r=u.isDefined,c=["visibleIndex","dataField","dataType","width","visibleWidth","visible","sortOrder","sortIndex","groupIndex","filterValue","selectedFilterOperation"],s;e.checkChanges=function(n,t){for(var r=0,i=0;i<t.length;i++)n[t[i]]&&r++;return n.length&&n.length===r},s=e.Controller.inherit(function(){var ht={visible:!0,showInColumnChooser:!0},ct={number:["=","<>","<",">","<=",">="],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">="]},e="group",s="columnChooser",lt=function(n){for(var u=[],t,f=!1,i=!1,r=0;r<n.length;r++)t=n.charAt(r),i=t===t.toUpperCase()||t in["0","1","2","3","4","5","6","7","8","9"],t==="_"||t==="."?(t=" ",i=!0):r===0?(t=t.toUpperCase(),i=!0):!f&&i&&u.length>0&&u.push(" "),u.push(t),f=i;return u.join("")},b=function(t,i){var e,r,f;if(i)return u.isString(i)&&(i={dataField:i}),i.command?n.extend(!0,{},i):(r=t.getCommonSettings(),f=t._createCalculatedColumnOptions(i),n.extend(!0,{},ht,r,f,i))},v=function(t,i){var r=[];return i&&n.each(i,function(n,i){var u=b(t,i);u&&r.push(u)}),r},it=function(t){var r=n.type(t);return r!=="string"&&r!=="boolean"&&r!=="number"&&r!=="date"&&(r=i),r},rt=function(n,t){switch(n){case"date":if(u.isNumber(t))return"number";if(u.isString(t))return"yyyy/MM/dd";case"number":if(u.isString(t))return"string"}},k=function(n,t){n.deserializeValue||(t==="date"&&(n.deserializeValue=function(n){var t=this.serializationFormat,r;if(t&&t!=="number"&&t!=="yyyy/MM/dd"){if(n!==i)return Globalize.parseDate(n,t)}else return r=!u.isDate(n)&&Date.parse(n),r?new Date(r):n},n.serializeValue=function(n){var t=this.serializationFormat;return t==="number"?n&&n.valueOf&&n.valueOf():t?Globalize.format(n,t):n}),t==="number"&&(n.deserializeValue=function(n){return n?Number(n):n},n.serializeValue=function(n){return n?n.toString():n}))},at=function(n,t){switch(n){case"number":return"right";case"boolean":return"center";case"date":return"left";default:return t?"right":"left"}},vt=function(n){switch(n){case"date":return"shortDate"}},yt=function(n){if(n==="boolean")return function(n){return n.value===!0?this.trueText||"true":n.value===!1?this.falseText||"false":n.valueText||""}},pt=function(t,i){for(var u=ut(i),o,f={},e=[],r=0;r<u.length;r++)u[r]&&n.each(u[r],function(n){f[n]=!0});return n.each(f,function(n){if(n.indexOf("__")!==0){var i=b(t,n);e.push(i)}}),e},y=function(t,i){var r;if(n.isArray(t)&&n.isArray(i)){if(t.length!==i.length)return!1;for(r=0;r<t.length;r++)if(t[r].selector!==i[r].selector||t[r].desc!==i[r].desc||!t[r].isExpanded!=!i[r].isExpanded)return!1;return!0}return(!t||!t.length)==(!i||!i.length)},ut=function(n){var t,u,i=[],r=function(n,t){var i,u;if(!n||!t)return n;for(i=0;i<n.length;i++)if(u=r(n[i].items,t-1),u&&u.length)return u};return n&&n.items().length>0&&(t=o(n.group()||[]).length,i=r(n.items(),t)||[]),i},wt=function(t){n.each(t._columns,function(n,t){t.index=n}),n.each(t._commandColumns,function(n,t){t.index=-(n+1)})},d=function(t,i,u){var f={},e=0;return n.each(t._columns,function(n,t){var n=t[i];r(n)&&(f[n]=f[n]||[],t===u?f[n].unshift(t):f[n].push(t),delete t[i])}),n.each(f,function(t,r){n.each(r,function(){t>=0&&(this[i]=e++)})}),e},g=function(t,i){var u="groupIndex",f=d(t,u,i);n.each(t._columns,function(n,t){!r(t[u])&&t.grouped&&(t[u]=f++),delete t.grouped})},ft=function(t,i){n.each(t._columns,function(n,t){r(t.sortIndex)&&!w(t.sortOrder)&&delete t.sortIndex});var u=d(t,"sortIndex",i);n.each(t._columns,function(n,t){r(t.sortIndex)||r(t.groupIndex)||!w(t.sortOrder)||(t.sortIndex=u++)})},et=function(t,i){var u="visibleIndex",f=d(t,u,i);n.each(t._columns,function(n,t){r(t[u])||(t[u]=f++)})},nt=function(n,t,i){var f=i===e?n.getGroupColumns():i===s?n.getHiddenColumns():n.getVisibleColumns(),u=f[t];return u&&r(u.index)?u.index:-1},bt=function(n,t,i){var u=n.getGroupColumns(),r;if(i>=0)for(r=0;r<u.length;r++)u[r].groupIndex>=i&&u[r].groupIndex++;else for(i=0,r=0;r<u.length;r++)i=Math.max(i,u[r].groupIndex+1);t.groupIndex=i},ot=function(t){var f=t._columnsUserState,e=t._columns,o=[],i,u;if(f){if(e.length!==f.length)return;for(u=0;u<f.length;u++)if(i=r(f[u].initialIndex)?e[f[u].initialIndex]:e[u],i&&f[u].dataField===i.dataField&&f[u].name===i.name)i=n.extend({},i),n.each(c,function(n,t){i[t]=t==="dataType"?i[t]||f[u][t]:f[u][t]}),o.push(i);else return;h(t,o)}},p=function(n,t){wt(n),g(n,t),ft(n,t),et(n,t)},st=function(n){return n&&n.store&&n.store()instanceof t.data.ArrayStore},h=function(n,t){n._columns=t,n._visibleColumns=i,n._updateColumnDataTypes()},l=function(n,t,r,u){var f=n._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:u},e,o;r=r||"all",e=f.changeTypes,t&&!e[t]&&(e[t]=!0,e.length++),o=f.optionNames,r&&!o[r]&&(o[r]=!0,o.length++),(u===i||u!==f.columnIndex)&&delete f.columnIndex,n._columnChanges=f,n._visibleColumns=i},a=function(t){var u=t.option("onColumnsChanging"),r=t._columnChanges;t.isInitialized()&&!t._updateLockCount&&r&&(u&&(t._updateLockCount++,u(n.extend({component:t.component},r)),t._updateLockCount--),t._columnChanges=i,t.columnsChanged.fire(r))},tt=function(n,t,i,r,u){var o=f.compileGetter(i),e;if(arguments.length===3)return o(t,{functionsAsIs:!0});o(t,{functionsAsIs:!0})!==r&&(e=i==="groupIndex"?"grouping":i==="sortIndex"||i==="sortOrder"?"sorting":"columns",f.compileSetter(i)(t,r,{functionsAsIs:!0}),u||l(n,e,i,t.index))},w=function(n){return n==="asc"||n==="desc"},kt=function(n){n.addCommandColumn({command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1})};return{init:function(){var n=this,t=n.option("columns");n._updateLockCount=n._updateLockCount||0,n._commandColumns=n._commandColumns||[],kt(n),h(n,t?v(n,t):[]),n._isColumnsFromOptions=!!t,n._isColumnsFromOptions?ot(n):h(n,n._columnsUserState?v(n,n._columnsUserState):n._columns),n._dataSourceApplied?n.applyDataSource(n._dataSource,!0):p(n)},callbackNames:function(){return["columnsChanged"]},optionChanged:function(n){switch(n.name){case"columns":case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"editing":case"rtlEnabled":this._columnsUserState=this.getUserState(),this.init()}},publicMethods:function(){return["addColumn","columnOption","columnCount","clearSorting","clearGrouping"]},applyDataSource:function(n,t){var i=this,r=n&&n.isLoaded(),u;return i._dataSource=n,(!i._dataSourceApplied||i._dataSourceColumnsCount===0||t||i.option("regenerateColumnsByVisibleItems"))&&r?(i._isColumnsFromOptions||(h(i,pt(i,n)),i._dataSourceColumnsCount=i._columns.length,ot(i)),i.updateColumns(n)):void 0},reset:function(){this._dataSourceApplied=!1,this._dataSourceColumnsCount=i,this._columnsUserState=this.getUserState(),this.init()},isInitialized:function(){return!!this._columns.length},isDataSourceApplied:function(){return this._dataSourceApplied},beginUpdate:function(){this._updateLockCount++},endUpdate:function(){var n=this,t={},i;n._updateLockCount--,n._updateLockCount||a(n)},getCommonSettings:function(){var r=this.option("commonColumnSettings")||{},t=this.option("grouping")||{},i=this.option("groupPanel")||{};return n.extend({allowResizing:this.option("allowColumnResizing"),allowReordering:this.option("allowColumnReordering"),autoExpandGroup:t.autoExpandAll,allowCollapsing:t.allowCollapsing,allowGrouping:i.allowColumnDragging&&i.visible},r)},isColumnOptionUsed:function(n){for(var t=0;t<this._columns.length;t++)if(this._columns[t][n])return!0},isAllDataTypesDefined:function(){var t=this._columns,n;if(!t.length)return!1;for(n=0;n<t.length;n++)if(!t[n].dataType)return!1;return!0},getColumns:function(){return n.extend(!0,[],this._columns)},getGroupColumns:function(){var t=[];return n.each(this._columns,function(){var n=this;r(n.groupIndex)&&(t[n.groupIndex]=n)}),t},getVisibleColumns:function(){var n=this;return n._visibleColumns=n._visibleColumns||n._getVisibleColumnsCore()},_getExpandColumnsCore:function(){return this.getGroupColumns()},getExpandColumns:function(){var t=this._getExpandColumnsCore(),i;return t.length&&(i=this.columnOption("command:expand")),t=n.map(t,function(t){return n.extend({},t,i,{index:t.index})})},_getVisibleColumnsCore:function(){var t=this.getExpandColumns(),i={},u={},f=0,e=this._columns.length?this._commandColumns.concat(this._columns):[];return n.each(e,function(){var t=this,e=t.visibleIndex,o;t.visible&&(!r(t.groupIndex)||t.showWhenGrouped)&&(t=n.extend(!0,{},t),e<0?(e=-e,o=u):o=i,o[e]=o[e]||[],o[e].push(t),f++)}),n.each(u,function(n,i){t.unshift.apply(t,i)}),n.each(i,function(n,i){t.push.apply(t,i)}),!f&&this._columns.length&&t.push({command:"empty"}),t},getHiddenColumns:function(){var t=[];return n.each(this._columns,function(n,i){i.visible||t.push(i)}),t},allowMoveColumn:function(n,t,i,r){var f=this,o=nt(f,n,i),u=f._columns[o];return u&&(u.allowReordering||u.allowGrouping||u.allowHiding)?i===r?i===s?!1:n!==t&&n+1!==t:i===e&&r!==s||r===e?u&&u.allowGrouping:i===s||r===s?u&&u.allowHiding:!0:!1},moveColumn:function(n,t,u,f){var o=this,y,c,v,p=u===e||f===e,h;y=nt(o,n,u),c=nt(o,t,f),y>=0&&(h=o._columns[y],v=c>=0?o._columns[c].groupIndex:-1,r(h.groupIndex)&&u===e&&(v>h.groupIndex&&v--,delete h.groupIndex,delete h.sortOrder,g(o)),f===e?(bt(o,h,v),g(o)):t>=0&&(h.visibleIndex=c<0?i:o._columns[c].visibleIndex,et(o,h)),h.visible=f!==s,l(o,p?"grouping":"columns"),a(o))},changeSortOrder:function(t,i){var f=this,y=f.getCommonSettings(),s=f.option("sorting"),o=s&&s.mode,h=o==="single"||!i,c=o==="single"||o==="multiple",u=f._columns[t],v=function(n){i==="ctrl"?(delete n.sortOrder,delete n.sortIndex):n.sortOrder=r(n.groupIndex)||r(n.sortIndex)?n.sortOrder==="desc"?"asc":"desc":"asc"},e=!1;c&&u&&u.allowSorting&&(h&&!r(u.groupIndex)&&n.each(f._columns,function(n){n!==t&&this.sortOrder&&!r(this.groupIndex)&&(delete this.sortOrder,delete this.sortIndex,e=!0)}),w(i)?u.sortOrder!==i&&(u.sortOrder=i,e=!0):i==="none"?u.sortOrder&&(delete u.sortIndex,delete u.sortOrder,e=!0):(v(u),e=!0)),e&&(ft(f),l(f,"sorting"),a(f,"sorting"))},getSortDataSourceParameters:function(){var u=this,i=[],t=[];return n.each(u._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&this.visible&&r(this.sortIndex)&&!r(this.groupIndex)&&(i[this.sortIndex]=this)}),n.each(i,function(){var n=this&&this.sortOrder;w(n)&&t.push({selector:this.selector||this.dataField||this.calculateCellValue,desc:this.sortOrder==="desc"})}),t.length>0?t:null},getGroupDataSourceParameters:function(){var t=[];return n.each(this.getGroupColumns(),function(){var n=this.calculateGroupValue||this.selector||this.dataField||this.calculateCellValue;n&&t.push({selector:n,desc:this.sortOrder==="desc",isExpanded:!!this.autoExpandGroup})}),t.length>0?t:null},refresh:function(t){var i=[];return n.each(this._columns,function(){var n=this.lookup;if(n){if(t&&n.valueMap)return;n.update&&i.push(n.update())}}),n.when.apply(n,i)},_updateColumnDataTypes:function(t){var i=ut(t),u=st(t),f=this.option("rtlEnabled");n.each(this._columns,function(t,e){var h,l,s,a,c,v,o=e.lookup;if(e.dataField&&i.length){if(!e.dataType||o&&!o.dataType){for(h=0;h<i.length;h++)l=e.calculateCellValue(i[h]),c=e.dataType||it(l),s=s||c,s&&c&&s!==c&&(s="string"),o&&(c=o.dataType||it(o.calculateCellValue(l)),a=a||c,a&&c&&a!==c&&(a="string"));e.dataType=s,o&&(o.dataType=a)}if(!e.serializationFormat||o&&!o.serializationFormat)for(h=0;h<i.length;h++)l=e.calculateCellValue(i[h],!0),e.serializationFormat=e.serializationFormat||rt(e.dataType,l),o&&(o.serializationFormat=o.serializationFormat||rt(o.dataType,o.calculateCellValue(l,!0)))}(u&&e.serializationFormat||!e.dataField)&&(e.selector=e.selector||n.proxy(e,"calculateCellValue")),k(e,e.dataType),o&&k(o,o.dataType),s=o?o.dataType:e.dataType,s&&(e.alignment=e.alignment||at(s,f),e.format=e.format||vt(s),e.customizeText=e.customizeText||yt(s),r(e.filterOperations)||(e.filterOperations=!o&&ct[s]||[]),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.defaultSelectedFilterOperation=e.selectedFilterOperation,e.showEditorAlways=r(e.showEditorAlways)?e.showEditorAlways:s==="boolean")})},_customizeColumns:function(n){var t=this,i=t.option("customizeColumns");i&&(i(n),h(t,v(t,n)))},updateColumns:function(t){var i=this,r,u;return i.updateSortingGrouping(t),!t||t.isLoaded()?(r=t?t.sort()||[]:i.getSortDataSourceParameters(),u=t?t.group()||[]:i.getGroupDataSourceParameters(),i._customizeColumns(i._columns),p(i),n.when(i.refresh(!0)).always(function(){t&&(i._updateColumnDataTypes(t),i._dataSourceApplied=!0),y(r,i.getSortDataSourceParameters())||l(i,"sorting"),y(u,i.getGroupDataSourceParameters())||l(i,"grouping"),l(i,"columns"),a(i)})):void 0},updateSortingGrouping:function(t){var i=this,r,u,f,e,s=function(t,i,r){var u;n.each(t,function(n,t){if(t.dataField&&(delete t[r],i&&i.length))for(u=0;u<i.length;u++)if(i[u].selector===t.dataField){t.sortOrder=t.sortOrder||(i[u].desc?"desc":"asc"),t[r]=u;break}})};t&&(r=o(t.sort()||[]),u=o(t.group()||[]),f=i.getGroupDataSourceParameters(),e=i.getSortDataSourceParameters(),i._columns.length||(n.each(u,function(n,t){i._columns.push(t.selector)}),n.each(r,function(n,t){i._columns.push(t.selector)}),h(i,v(i,i._columns))),f||y(u,f)||s(i._columns,u,"groupIndex"),e||y(r,e)||s(i._columns,r,"sortIndex"))},updateFilter:function(t){var r=this,f=st(t),i=function(t){if(u.isArray(t)){var o,f,e;for(u.isString(t[0])&&(f=r.columnOption(t[0]),f&&f.calculateCellValue&&(t[0]=n.proxy(f,"calculateCellValue"))),e=0;e<t.length;e++)i(t[e])}};if(f)return i(t.filter())},columnCount:function(){return this._columns.length},columnOption:function(t,r,f,e){var c=this,o,l=u.isString(t)&&t.substr(0,t.indexOf(":")),s=t<0||l==="command"?c._commandColumns:c._columns,h;if(t!==i){for(l&&(t=t.substr(l.length+1)),o=0;o<s.length;o++)if(l){if(""+s[o][l]===t){h=s[o];break}}else if(s[o].index===t||s[o].name===t||s[o].dataField===t||s[o].caption===t){h=s[o];break}if(h){if(arguments.length===1)return n.extend({},h);if(u.isString(r)){if(arguments.length===2)return tt(c,h,r);tt(c,h,r,f,e)}else u.isObject(r)&&n.each(r,function(n,t){tt(c,h,n,t,e)});p(c,h),a(c)}}},clearSorting:function(){var t=this,r=this.columnCount(),n;for(t.beginUpdate(),n=0;n<r;n++)t.columnOption(n,"sortOrder",i);t.endUpdate()},clearGrouping:function(){var t=this,r=this.columnCount(),n;for(t.beginUpdate(),n=0;n<r;n++)t.columnOption(n,"groupIndex",i);t.endUpdate()},getVisibleIndex:function(n){for(var i=this.getVisibleColumns(),t=0;t<i.length;t++)if(i[t].index===n)return t;return-1},addColumn:function(n){var t=this,i=b(t,n);t._columns.push(i),p(t,i),t.updateColumns(t._dataSource)},addCommandColumn:function(n){for(var i=this._commandColumns,t=0;t<i.length;t++)if(i[t].command===n.command)return;i.push(n)},getUserState:function(){for(var r=this._columns,u=[],t=0;t<r.length;t++)u[t]={},n.each(c,function(n,f){r[t][f]!==i&&(u[t][f]=r[t][f])});return u},setUserState:function(n){this._columnsUserState=n,this.init()},_createCalculatedColumnOptions:function(i){var r={},e;return i.dataField?(e=f.compileGetter(i.dataField),r={caption:lt(i.dataField),calculateCellValue:function(n,t){var i=e(n);return this.deserializeValue&&!t?this.deserializeValue(i):i},parseValue:function(n){var r=this,t,i;return r.dataType==="number"?u.isString(n)?(i=Globalize.parseFloat(n),u.isNumber(i)&&(t=i)):u.isDefined(n)&&(t=Number(n)):r.dataType==="boolean"?n===r.trueText?t=!0:n===r.falseText&&(t=!1):r.dataType==="date"?(i=Globalize.parseDate(n),i&&(t=i)):t=n,t}},i.lookup&&(r.lookup={calculateCellValue:function(n,t){var n=this.valueMap&&this.valueMap[n];return this.deserializeValue&&!t?this.deserializeValue(n):n},updateValueMap:function(){var i,r,t,n;if(this.valueMap={},this.items)for(i=f.compileGetter(this.valueExpr),r=f.compileGetter(this.displayExpr),n=0;n<this.items.length;n++)t=this.items[n],this.valueMap[i(t)]=r(t)},update:function(){var i=this,r=i.dataSource;if(r){if(u.isObject(r)||u.isArray(r))return r=new t.data.DataSource(n.extend(!0,{paginate:!1,_preferSync:!0},f.normalizeDataSourceOptions(r))),r.load().done(function(n){i.items=n,i.updateValueMap&&i.updateValueMap()});t.log("E1016")}else i.updateValueMap&&i.updateValueMap()}})):n.extend(!0,r,{allowSorting:!1,allowGrouping:!1,calculateCellValue:function(){return null}}),r.resizedCallbacks=n.Callbacks(),i.resized&&r.resizedCallbacks.add(n.proxy(i.resized,i)),k(r,i.dataType),r}}}()),h.dxDataGrid.ColumnsController=s,e.registerModule("columns",{defaultOptions:function(){return{commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:Globalize.localize("dxDataGrid-trueText"),falseText:Globalize.localize("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columns:i,regenerateColumnsByVisibleItems:!1,sorting:{mode:"single",ascendingText:Globalize.localize("dxDataGrid-sortingAscendingText"),descendingText:Globalize.localize("dxDataGrid-sortingDescendingText"),clearText:Globalize.localize("dxDataGrid-sortingClearText")},customizeColumns:null}},controllers:{columns:s}})}(jQuery,DevExpress),function(n,t){var r=t.ui.dxDataGrid,e=t.ui.events,u=t.utils,o="dx-editor-cell",s="dx-selection",f="dx-select-checkbox",h="dx-select-checkboxes-hidden",c=500,i="selection.showCheckBoxesInMultipleMode";r.SelectionController=r.Controller.inherit(function(){var o="selection.mode",w=function(n){return n==="single"||n==="multiple"},f=function(t,i,r){var f,e=r?t._unselectedItemKeys:t._selectedItemKeys;if(u.isObject(i)){for(f=0;f<e.length;f++)if(c(e[f],i))return f;return-1}return n.inArray(i,e)},a=function(t,i){var u=-1;return n.each(i,function(n,i){if(r.equalKeys(t,i))return u=n,!1}),u},v=function(n,t){var i=n.getController("data").keyOf(t),r;f(n,i)===-1&&(n._selectedItemKeys.push(i),n._addedItemKeys.push(i),n._selectedItems.push(t)),n._isSelectAll&&(r=f(n,i,!0),n._unselectedItemKeys.splice(r,1))},y=function(n,t){var i=f(n,t);i>=0&&(n._selectedItemKeys.splice(i,1),n._removedItemKeys.push(t),n._selectedItems.splice(i,1),n._isSelectAll&&f(n,t,!0)===-1&&n._unselectedItemKeys.push(t))},b=function(n){h(n,[],[])},h=function(t,i,r,u){var f,e=t._selectedItemKeys;for(t._selectedItemKeys=i,t._selectedItems=r,t._unselectedItemKeys=[],t._isSelectAll=!!u,f=0;f<e.length;f++)n.inArray(e[f],i)===-1&&t._removedItemKeys.push(e[f]);for(f=0;f<i.length;f++)n.inArray(i[f],e)===-1&&t._addedItemKeys.push(i[f])},c=r.equalKeys,p=function(n){delete n._shiftFocusedItemIndex},e=function(n){return n&&n.rowType==="data"},k=function(n,t,i){var f=!1,o,r,h=n.getController("data"),c=i[n._focusedItemIndex]&&n.isRowSelected(h.keyOf(i[n._focusedItemIndex].data)),s=function(n,t,i){i?y(n,h.keyOf(t)):v(n,t)};if(u.isDefined(n._shiftFocusedItemIndex)||(n._shiftFocusedItemIndex=n._focusedItemIndex),n._shiftFocusedItemIndex!==n._focusedItemIndex)for(o=n._focusedItemIndex<n._shiftFocusedItemIndex?1:-1,r=n._focusedItemIndex;r!==n._shiftFocusedItemIndex;r+=o)e(i[r])&&(s(n,i[r].data,!0),f=!0);if(t!==n._shiftFocusedItemIndex)for(o=t<n._shiftFocusedItemIndex?1:-1,r=t;r!==n._shiftFocusedItemIndex;r+=o)e(i[r])&&(s(n,i[r].data,!1),f=!0);return e(i[n._focusedItemIndex])&&!c&&(s(n,i[n._focusedItemIndex].data,!1),f=!0),f},d=function(t,i,r){var o,f,e=t&&t.key(),u=[];return t&&(e?n.each(i,function(t,i){if(u.length>0&&u.push(r?"and":"or"),n.isArray(e)){for(o=[],f=0;f<e.length;f++)f>0&&o.push(r?"or":"and"),o.push([e[f],r?"<>":"=",i[e[f]]]);u.push(o)}else u.push([e,r?"<>":"=",i])}):u=function(n){for(var t=0;t<i.length;t++)if(c(i[t],n))return!r;return r}),u.length>0||n.isFunction(u)?u:void 0},s=function(t){var r=[],u=t.getController("data"),f,o;u&&(n.each(u.items(),function(n,i){var f=u.keyOf(i.data);e(i)&&i.isSelected!==t.isRowSelected(f)&&r.push(n)}),t.option(i)==="onClick"&&(t._selectedItemKeys.length>1?t.startSelectionWithCheckboxes():t._selectedItemKeys.length===0&&r.length&&t.stopSelectionWithCheckboxes()),r.length&&u.updateItems({changeType:"updateSelection",itemIndexes:r}),f=t._addedItemKeys,o=t._removedItemKeys,(f.length||o.length)&&(t._selectedItemsInternalChange=!0,t.option("selectedRowKeys",t._selectedItemKeys.slice(0)),t._selectedItemsInternalChange=!1,t.selectionChanged.fire(t._selectedItemKeys),t.executeAction("onSelectionChanged",{selectedRowsData:t._selectedItems,selectedRowKeys:t._selectedItemKeys,currentSelectedRowKeys:f,currentDeselectedRowKeys:o})),t._addedItemKeys=[],t._removedItemKeys=[])},l=function(n){var t=n.getController("columns"),i=n.isSelectColumnVisible();t.addCommandColumn({command:"select",visible:i,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:"dx-command-select",width:"auto"}),t.columnOption("command:select","visible",i)};return{init:function(){var n=this;n._isSelectionWithCheckboxes=!1,n._focusedItemIndex=-1,n._selectedItemKeys=[],n._unselectedItemKeys=[],n._selectedItems=[],n._addedItemKeys=[],n._removedItemKeys=[],n._isSelectAll=!1,l(n),n.createAction("onSelectionChanged",{excludeValidators:["disabled"]})},callbackNames:function(){return["selectionChanged"]},optionChanged:function(n){var t=this;t.callBase(n);switch(n.name){case"selection":t.init(),t.getController("columns").updateColumns();break;case"selectedRowKeys":u.isArray(n.value)&&!t._selectedItemsInternalChange&&t.selectRows(n.value)}},publicMethods:function(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]},isRowSelected:function(n){var t=f(this,n);return t!==-1},isSelectColumnVisible:function(){var n=this.option(i);return this.option(o)==="multiple"&&(n==="always"||n==="onClick"||this._isSelectionWithCheckboxes)},isSelectAll:function(){return this._isSelectAll&&!this._unselectedItemKeys.length},selectAll:function(){return this.option(i)==="onClick"&&this.startSelectionWithCheckboxes(),this.selectedItemKeys([],!0)},clearSelection:function(){this.selectedItemKeys([])},refresh:function(){var n=this,t;return t=n.isSelectAll()?n.selectAll():n.selectedItemKeys(n.option("selectedRowKeys")||[]),t.done(function(){s(n)})},selectedItemKeys:function(i,r){var c=this,y,f,p,e,w=c.getController("data"),a=w.dataSource(),v=a&&a.store(),l,o;return u.isDefined(i)?(v&&(y=n.isArray(i)?n.extend([],i):[i],c._isSelectAll=r,(y.length||r)&&(f=d(a,y,r),p=n.isFunction(f),(f||r)&&(l=a.filter(),f&&!p&&l?(o=[],o.push(f),o.push(l)):l?o=l:f&&!p&&(o=f),e=n.Deferred(),w.setSelectionLoading(!0),v.load({filter:o}).done(function(n){new t.data.ArrayStore(n).load({filter:f}).done(function(n){e.resolve(n)})}).fail(n.proxy(e.reject,e)).always(function(){w.setSelectionLoading(!1)})))),e=e||n.Deferred().resolve([]),e.done(function(n){var t,i,u=[];if(v&&n.length>0)for(t=0;t<n.length;t++)i=v.keyOf(n[t]),u.push(i);h(c,u,n,r),s(c)}),e):c._selectedItemKeys},getSelectedRowKeys:function(){return this.selectedItemKeys()},selectRows:function(t,i){t=n.isArray(t)?t:[t];var r=t;return i&&(r=this.getSelectedRowKeys(),n.each(t,function(n,t){a(t,r)===-1&&r.push(t)})),this.selectedItemKeys(r)},deselectRows:function(t){var i=this.getSelectedRowKeys(),t=n.isArray(t)?t:[t];return n.each(t,function(n,t){var r=a(t,i);r>=0&&i.splice(r,1)}),this.selectedItemKeys(i)},selectRowsByIndexes:function(t){var r=this.getController("data").items(),f,i=[];return u.isArray(t)||(t=Array.prototype.slice.call(arguments,0)),n.each(t,function(){var n=r[this];n&&n.rowType==="data"&&i.push(n.key)}),this.selectRows(i)},getSelectedRowsData:function(){return this._selectedItems},changeItemSelection:function(n,t){var i=this,d=i.getController("data"),g=d.items(),f=g[n],l=f&&f.data,a=i.option(o),u,nt,r;return w(a)&&e(f)&&(r=d.keyOf(l),t=t||{},i.isSelectionWithCheckboxes()&&(t.control=!0),t.shift&&a==="multiple"&&i._focusedItemIndex>=0?u=k(i,n,g):t.control?(p(i),nt=i.isRowSelected(r),a==="single"&&b(i),nt?y(i,r):v(i,l),u=!0):(p(i),i._selectedItemKeys.length===1&&c(i._selectedItemKeys[0],r)||(h(i,[r],[l]),u=!0)),u)?(i._focusedItemIndex=n,s(i),!0):!1},focusedItemIndex:function(n){var t=this;if(u.isDefined(n))t._focusedItemIndex=n;else return t._focusedItemIndex},isSelectionWithCheckboxes:function(){var n=this.option(o),t=this.option(i);return n==="multiple"&&(t==="always"||this._isSelectionWithCheckboxes)},startSelectionWithCheckboxes:function(){var n=this,t=n.isSelectColumnVisible();return n.option(o)==="multiple"&&!n.isSelectionWithCheckboxes()?(n._isSelectionWithCheckboxes=!0,l(n),t===n.isSelectColumnVisible()&&n.option(i)==="onClick"&&s(n),!0):!1},stopSelectionWithCheckboxes:function(){var n=this,t=n.isSelectColumnVisible();return n._isSelectionWithCheckboxes?(n._isSelectionWithCheckboxes=!1,l(n),!0):!1}}}()),r.registerModule("selection",{defaultOptions:function(){return{selection:{mode:"none",showCheckBoxesInMultipleMode:"onClick",allowSelectAll:!0},selectedRowKeys:[]}},controllers:{selection:r.SelectionController},extenders:{controllers:{data:{setDataSource:function(n){this.callBase(n),this.getController("selection").refresh()},setSelectionLoading:function(n){this._isSelectionLoading=n,this._fireLoadingChanged()},isLoading:function(){var n=this.callBase();return n||!!this._isSelectionLoading},pageIndex:function(n){var t=this,i=t._dataSource;return i&&n&&i.pageIndex()!==n&&t.getController("selection").focusedItemIndex(-1),t.callBase(n)},_processDataItem:function(){var i=this,t=i.getController("selection"),r=t.isSelectColumnVisible(),n=this.callBase.apply(this,arguments);return n.isSelected=t.isRowSelected(n.key),r&&n.values&&(n.values[0]=n.isSelected),n},refresh:function(){var n=this.callBase.apply(this,arguments);return this.getController("selection").refresh(),n}}},views:{columnHeadersView:{_renderCore:function(n){var t=this;t.getController("selection").selectionChanged.remove(t._selectionChangedHandler),t.callBase(n)},_renderHeaderContent:function(t,i,r){var u=this,s,e=u.getController("selection"),h=function(n){if(n.isSelectAll()||n.getSelectedRowKeys().length===0)return n.isSelectAll()};if(i.command==="select"){t.addClass(o),s=n("<div />").appendTo(t).addClass(f),u.getController("editorFactory").createEditor(s,n.extend({},i,{parentType:"headerRow",value:h(e),setValue:function(n,t){t.jQueryEvent&&h(e)!==n&&((t.previousValue===undefined||t.previousValue)&&(e.clearSelection(),t.component.option("value",!1)),t.previousValue===!1&&(u.option("selection.allowSelectAll")?e.selectAll():t.component.option("value",!1)),t.jQueryEvent.preventDefault())}}));t.on("dxclick",u.createAction(function(t){var i=t.jQueryEvent;n(i.target).closest("."+f).length||n(i.currentTarget).children().trigger("dxclick"),i.preventDefault()}));u._selectionChangedHandler=function(){s.dxCheckBox("instance").option("value",h(e))},e.selectionChanged.add(u._selectionChangedHandler)}else u.callBase(t,i,r)}},rowsView:{_getDefaultTemplate:function(t){var i=this,r;return t.command==="select"?function(u,e){if(e.rowType==="data"){u.addClass(o);u.on("dxclick",i.createAction(function(t){var r=i.getController("selection"),u=t.jQueryEvent,f=i.getRowIndex(n(u.currentTarget).closest(".dx-row"));f>=0&&(r.startSelectionWithCheckboxes(),r.changeItemSelection(f,{shift:u.shiftKey}))}));r=n("<div />").addClass(f).appendTo(u),i.getController("editorFactory").createEditor(r,n.extend({},t,{parentType:"dataRow",value:e.value}))}}:i.callBase(t)},_update:function(t){var i=this;t.changeType==="updateSelection"?(i._tableElement.length>0&&n.each(t.itemIndexes||[],function(n,r){var u,e;t.items[r]&&(u=i._getRowElements().eq(r),e=!!t.items[r].isSelected,u.toggleClass(s,e),u.find("."+f).dxCheckBox("option","value",e))}),i._updateCheckboxesClass()):i.callBase(t)},_createTable:function(){var t=this,r=t.callBase();return r.on(e.addNamespace("dxpointerdown","dxDataGridRowsView"),t.createAction(function(n){t._isTouchEvent=e.isTouchEvent(n.jQueryEvent)})).on(e.addNamespace("dxhold","dxDataGridRowsView"),{timeout:t.option("selection.longTapTime")||c},t.createAction(function(r){var u=t.getController("selection"),e=r.jQueryEvent;t.option(i)==="onLongTap"&&(u.isSelectionWithCheckboxes()?u.stopSelectionWithCheckboxes():u.startSelectionWithCheckboxes()),t.option(i)==="onClick"&&n(e.target).closest(".dx-row").find(f).parent().trigger("dxclick")})).on("mousedown selectstart",t.createAction(function(n){var t=n.jQueryEvent;t.shiftKey&&t.preventDefault()}))},_createRow:function(n){var t=this.callBase(n);return n&&t.toggleClass(s,!!n.isSelected),t},_rowClick:function(t,i){var r=this,u=n(i.target).closest(".dx-command-select").length;u||(r.getController("selection").changeItemSelection(t,{control:i.ctrlKey,shift:i.shiftKey}),r.callBase(t,i))},_renderCore:function(n){this.callBase(n),this._updateCheckboxesClass()},_updateCheckboxesClass:function(){var n=this.getController("selection"),t=n.isSelectColumnVisible()&&!n.isSelectionWithCheckboxes();this._tableElement&&this._tableElement.toggleClass(h,t)}}}}})}(jQuery,DevExpress),function(n,t){var i=t.ui.dxDataGrid,e=t.utils,o=t.ui.events.addNamespace,s="dx-datagrid-checkbox-size",h="dxDataGridEditorFactory",f=o("focusin dxpointerdown dxclick",h),c=13,l=9,r="dx-datagrid-focus-overlay",u="dx-focused",a="dx-datagrid-content";i.EditorFactoryController=i.Controller.inherit(function(){var i=function(t,i){return n.extend(t,{readOnly:i.readOnly,rtlEnabled:i.rtlEnabled,disabled:i.disabled})},o=function(n,t){return i({placeholder:t.placeholder,width:t.width,value:t.value,onValueChanged:function(i){var r=function(n){t&&t.setValue(n.value)};window.clearTimeout(n._valueChangeTimeoutID),i.jQueryEvent&&i.jQueryEvent.type==="keyup"?n._valueChangeTimeoutID=window.setTimeout(function(){r(i)},e.isDefined(t.updateValueTimeout)?t.updateValueTimeout:0):i.jQueryEvent&&i.jQueryEvent.type==="keydown"?(i.jQueryEvent.which===c||i.jQueryEvent.which===l)&&r(i):r(i)},valueChangeEvent:"change keydown"+(t.parentType==="filterRow"?" keyup":"")},t)},v=function(n,r){n.dxDateBox(i({value:r.value,useCalendar:!0,customOverlayCssClass:"dx-datagrid",formatString:t.utils.isString(r.format)&&t.DateTimeFormat[r.format.toLowerCase()]||r.format,formatWidthCalculator:null},r));n.dxDateBox("instance").on("optionChanged",function(n){var t=n.name,i=n.value;t==="value"&&r.setValue(i)})},y=function(n,i){var r=o(n,i),u=i.parentType==="searchPanel",f=function(n){return t.utils.isDefined(n)?n.toString():""};r.value=f(i.value),r.valueChangeEvent+=u?" keyup search":"",r.mode=u?"search":"text",n.dxTextBox(r)},p=function(n,t){var i=o(n,t);i.showSpinButtons=!0,n.dxNumberBox(i)},w=function(t,i){i.parentType==="filterRow"?h(t,n.extend({lookup:{displayExpr:function(n){return n===!0?i.trueText||"true":n===!1?i.falseText||"false":void 0},items:[!0,!1],rtlEnabled:i.rtlEnabled,disabled:i.disabled}},i)):b(t,i)},h=function(n,r){var f=r.lookup,u,e,o=r.parentType==="filterRow";f&&(u=f.items,e=t.data.utils.compileGetter(f.displayExpr),o&&u&&(u=u.slice(0),u.unshift(null)),n.dxSelectBox(i({searchEnabled:!0,value:r.value||null,valueExpr:r.lookup.valueExpr,showClearButton:f.allowClearing&&!o,displayExpr:function(n){return n===null?r.showAllText:e(n)},items:u,onValueChanged:function(n){r.setValue(n.value,n)}},r)))},b=function(n,t){n.addClass(s).dxCheckBox(i({value:t.value,onValueChanged:function(n){t.setValue&&t.setValue(n.value,n)}},t))};return{_getFocusedElement:function(n){return n.find("[tabindex]:focus, input:focus")},_updateFocusCore:function(){var n=this._$focusedElement,t=this.component&&this.component.element();if(t&&(n=this._getFocusedElement(t),n.length&&(n=n.closest(".dx-editor-cell > *, .dx-row > td"),n.length))){this.focus(n);return}this.loseFocus()},_updateFocus:function(t){var i=this,u=t.jQueryEvent&&n(t.jQueryEvent.target).hasClass(r);i._isFocusOverlay=i._isFocusOverlay||u,clearTimeout(i._updateFocusTimeoutID),i._updateFocusTimeoutID=setTimeout(function(){delete i._updateFocusTimeoutID,i._isFocusOverlay||i._updateFocusCore(),i._isFocusOverlay=!1})},callbackNames:function(){return["focused"]},focus:function(i){var f=this;if(i===undefined)return f._$focusedElement;i&&setTimeout(function(){var e=f._$focusOverlay=f._$focusOverlay||n("<div>").addClass(r),o=!parseInt(i.css("border-left-width"))&&parseInt(i.css("border-right-width"))?"right bottom":"left top";e.show().css("visibility","hidden").appendTo(i.closest("."+a)).outerWidth(i.outerWidth()+1).outerHeight(i.outerHeight()+1),t.position(e,{my:o,at:o,of:i}),e.css("visibility","visible"),f._$focusedElement&&f._$focusedElement.removeClass(u),i.addClass(u),f._$focusedElement=i,f.focused.fire(i)})},loseFocus:function(){this._$focusedElement&&this._$focusedElement.removeClass(u),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.hide()},init:function(){var t=this,i=t.component&&t.component.element();t.createAction("onEditorPreparing",{excludeValidators:["designMode","disabled"]}),t.createAction("onEditorPrepared",{excludeValidators:["designMode","disabled"]}),t._updateFocusHandler=t._updateFocusHandler||t.createAction(n.proxy(t._updateFocus,t));n(document).on(f,t._updateFocusHandler);i&&i.on("dxclick","."+r,function(i){var r=n(i.target),u;r.hide(),u=document.elementFromPoint(i.pageX,i.pageY),r.show(),n(u).trigger("dxclick"),t._$focusedElement&&t._$focusedElement.find("input").focus()})},dispose:function(){n(document).off(f,this._updateFocusHandler)},createEditor:function(n,t){this.component._suppressDeprecatedWarnings();var i=this.option("editorPreparing"),r=this.option("editorPrepared");if(this.component._resumeDeprecatedWarnings(),t.rtlEnabled=this.option("rtlEnabled"),t.disabled=t.disabled||this.option("disabled"),t.cancel=!1,t.editorElement=n,i&&i(n,t),this.executeAction("onEditorPreparing",t),!t.cancel){if(t.lookup)h(n,t);else switch(t.dataType){case"date":v(n,t);break;case"boolean":w(n,t);break;case"number":p(n,t);break;default:y(n,t)}r&&r(n,t),this.executeAction("onEditorPrepared",t)}}}}()),i.registerModule("editorFactory",{defaultOptions:function(){return{}},controllers:{editorFactory:i.EditorFactoryController}})}(jQuery,DevExpress),function(n,t,i){var o=t.ui,s=t.utils,r=o.dxDataGrid,u="dx-sort",h="dx-sort-up",c="dx-sort-down",l="dx-sort-alignment-",a="dx-datagrid-text-content",f="dx-datagrid-scroll-container",v="dx-row",y="dx-group-row",e="dx-datagrid-table",p="dx-datagrid-table-fixed";r.createColGroup=function(t){for(var r=n("<colgroup />"),u=t.length,i=0;i<u;i++)n("<col />").width(t[i].visibleWidth||t[i].width).appendTo(r);return r},r.ColumnsView=r.View.inherit({_applySorting:function(t,i,r){function a(n){return n==="right"?"left":"right"}var f,e,o;t.find("."+u).remove(),s.isDefined(i.sortOrder)&&(i.alignment==="center"&&(o=this.option("rtlEnabled")?"right":"left",n("<span />").addClass(u).css("float",o).prependTo(t)),e=i.alignment||"left",f=n("<span />").addClass(u).css("float",r?a(i.alignment):e).toggleClass(h,i.sortOrder==="asc").toggleClass(c,i.sortOrder==="desc"),this.option("showColumnLines")?f.prependTo(t):f.addClass(l+e).appendTo(t))},_updateSortIndicatorPositions:function(t){if(t){var i=t.find("."+u);n.each(i,function(){var t=n(this),i=t.parent(),r=i.find("."+a);t.height(r.height()||i.height())})}},_createRow:function(){return n("<tr />").addClass(v)},_createTable:function(){var i=this,t=n("<table />").addClass(e).addClass(e+"-fixed");if(i.option("cellHintEnabled"))t.on("mousemove",".dx-row .dx-datagrid-text-content, .dx-row > td",this.createAction(function(t){var r=t.jQueryEvent,i=n(r.currentTarget);i.removeAttr("title"),i[0].scrollWidth>i[0].clientWidth&&i.attr("title",i.text())}));return t},_columnOptionChanged:function(t){var f=t.optionNames,i,u;if(r.checkChanges(f,["width","visibleWidth"])){i=this._columnsController.getVisibleColumns(),u=n.map(i,function(n){return n.visibleWidth||n.width||"auto"}),this.setColumnWidths(u);return}this.render()},_getTableElements:function(){return this._tableElement||[]},optionChanged:function(n){this.callBase(n),n.name==="cellHintEnabled"&&this.render()},init:function(){var n=this;n._columnsController=n.getController("columns"),n._dataController=n.getController("data"),n._columnsController.columnsChanged.add(function(t){var i=function(){n._dataController.changed.remove(i),n._columnOptionChanged(t)};t.changeTypes.grouping?n._dataController.changed.add(i):n._columnOptionChanged(t)})},scrollOffset:function(n){var r=this,u=r.element(),t=u&&u.find("."+f);if(n===i)return t&&t.scrollLeft();r._scrollLeft!==n&&(r._scrollLeft=n,t&&t.scrollLeft(n))},wrapTableInScrollContainer:function(t){return n("<div/>").addClass(f).append(t)},getColumnWidths:function(){var r=this,u,f=[],t,i;return r._tableElement&&(u=r._tableElement.find("tr").filter(":not(."+y+")").first().find("td"),n.each(u,function(r,u){u.getBoundingClientRect?(i=u.getBoundingClientRect(),t=Math.floor(i.right-i.left)):t=n(u).outerWidth(!0),f.push(t)})),f},setColumnWidths:function(n){var r,i,t,u=this._getTableElements();if(n)for(i=0;i<u.length;i++)for(r=u.eq(i).find("col"),t=0;t<n.length;t++)r.eq(t).width(n[t]||"auto")},getColumnElements:function(){},getColumns:function(){},getCell:function(t,i){var r;if(this._tableElement&&this._tableElement.length===1)return r=this._tableElement[0].rows[i],r?n(r.cells[t]):null},getRowsCount:function(){return this._tableElement&&this._tableElement.length===1?this._tableElement[0].rows.length:0},getBoundingRect:function(){},getName:function(){},tableElement:function(){return this._tableElement}})}(jQuery,DevExpress),function(n,t){var f=t.ui,e=t.utils,i=f.dxDataGrid,o="dx-datagrid-column-chooser",r="dx-datagrid-column-chooser-button",s="column-chooser",u="dx-column-chooser-item",h="dx-column-chooser-message",c="dx-datagrid-drag-action";i.ColumnChooserController=i.ViewController.inherit({renderShowColumnChooserButton:function(t){var i=this,f=i.option("columnChooser.enabled"),u=t.find("."+r);f?u.length?u.show():n("<div />").addClass(r).appendTo(t).dxButton({icon:s,onClick:function(){i.getView("columnChooserView").showColumnChooser()},hint:i.option("columnChooser.title")}):u.hide()}}),i.ColumnChooserView=i.ColumnsView.inherit({_updateItems:function(){var r=this._columnsController.getHiddenColumns(),u=this.option("columnChooser"),t=this._popupContainer.content();t.dxScrollable(i.createScrollableOptions(this)),this._renderColumnChooserItems(t,r),r.length||n("<span />").addClass(h).text(u?u.emptyPanelText:"").appendTo(t.dxScrollable("instance").content())},_initializePopupContainer:function(){var r=this,u=this.element().addClass(o),n=this.option("columnChooser"),t=DevExpress.ui.themes.current(),i=t&&t.indexOf("generic")>-1;if(!e.isDefined(this._popupContainer)){this._popupContainer=u.dxPopup({visible:!1,shading:!1,buttons:[{text:n.title,toolbar:"top",location:i?"before":"center"},{shortcut:i?"close":"cancel"}],width:n.width,height:n.height,container:this.element().parent(),rtlEnabled:this.option("rtlEnabled")}).data("dxPopup");this._popupContainer.on("optionChanged",function(n){n.name==="visible"&&r.renderCompleted.fire()})}},_renderCore:function(){this.option("columnChooser.enabled")&&this._initializePopupContainer(),this._popupContainer&&this._updateItems()},_renderColumnChooserItems:function(t,i){var r=t.dxScrollable("instance"),f=r.content(),e;f.empty(),n.each(i,function(t,i){i.showInColumnChooser&&(e=n("<div />").addClass(i.cssClass).addClass(u).toggleClass(c,i.allowHiding).text(i.caption).appendTo(f))}),r.update()},getColumnElements:function(){var n=this._popupContainer&&this._popupContainer.content();return n&&n.find("."+u)},getName:function(){return"columnChooser"},getColumns:function(){return this._columnsController.getHiddenColumns()},allowDragging:function(n){return this.isColumnChooserVisible()&&n&&n.allowHiding},getBoundingRect:function(){var i=this,n=i._popupContainer&&i._popupContainer._container(),t;return n&&n.is(":visible")?(t=n.offset(),{left:t.left,top:t.top,right:t.left+n.outerWidth(),bottom:t.top+n.outerHeight()}):null},showColumnChooser:function(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show()},hideColumnChooser:function(){this._popupContainer&&this._popupContainer.hide()},isColumnChooserVisible:function(){var n=this._popupContainer;return n&&n.option("visible")},publicMethods:function(){return["showColumnChooser","hideColumnChooser"]}}),i.registerModule("columnChooser",{defaultOptions:function(){return{columnChooser:{enabled:!1,width:250,height:260,title:Globalize.localize("dxDataGrid-columnChooserTitle"),emptyPanelText:Globalize.localize("dxDataGrid-columnChooserEmptyText")}}},controllers:{columnChooser:i.ColumnChooserController},views:{columnChooserView:i.ColumnChooserView},extenders:{views:{headerPanel:{_renderShowColumnChooserButton:function(){this.getController("columnChooser").renderShowColumnChooserButton(this.element())},_renderCore:function(){this.callBase(),this._renderShowColumnChooserButton()},optionChanged:function(n){this.callBase(n);switch(n.name){case"columnChooser":this._renderShowColumnChooserButton()}},isVisible:function(){var n=this,t=n.option("columnChooser.enabled");return n.callBase()||t}}}}})}(jQuery,DevExpress),function(n,t){var o=t.ui.dxDataGrid,k=t.ui.events,d=k.addNamespace,st=t.utils,f=o.getIndexByKey,g="dx-link",nt="dx-editor-cell",y="dx-selection",p="dx-edit-row",w="dx-edit-button",c="__DX_INSERT_INDEX__",tt="dx-row-removed",it="dx-row-inserted",rt="dx-row-modified",ut="dx-cell-modified",l="dx-highlight-outline",ft="dxDataGridEditing",et="dx-datagrid-focus-overlay",ot="dx-datagrid-readonly",b="dx-checkbox",v="dx-widget",r="batch",u="row",a="cell",e="insert",s="update",h="remove",i=function(n){var t=n.option("editing.editMode");return t===r||t===a?t:u};o.EditingController=o.ViewController.inherit(function(){var y=function(t){return function(i,r){var u=n("<div/>").appendTo(i);t.getController("editorFactory").createEditor(u,n.extend({},r.column,{value:r.value,setValue:r.setValue,parentType:"dataRow",width:null,readOnly:r.setValue===undefined}))}},o=function(n){return n.getController("data")};return{init:function(){var t=this;if(t._insertIndex=1,t._editRowIndex=-1,t._editData=[],t._editColumnIndex=-1,t._columnsController=t.getController("columns"),t.createAction("onInitNewRow",{excludeValidators:["disabled"]}),t.createAction("onRowInserting",{excludeValidators:["disabled"]}),t.createAction("onRowInserted",{excludeValidators:["disabled"]}),t.createAction("onEditingStart",{excludeValidators:["disabled"]}),t.createAction("onRowUpdating",{excludeValidators:["disabled"]}),t.createAction("onRowUpdated",{excludeValidators:["disabled"]}),t.createAction("onRowRemoving",{excludeValidators:["disabled"]}),t.createAction("onRowRemoved",{excludeValidators:["disabled"]}),!t._saveEditorHandler){t._saveEditorHandler=t.createAction(function(r){var f=r.jQueryEvent,e,c,l,o,a,s,h;i(t)!==u&&t.isEditing()&&!t._editCellInProgress&&(c=n(f.target).closest(".dx-overlay-wrapper").length,l=n(f.target).hasClass(et),h=n(f.target).closest(".dx-data-row").length,e=t._columnsController.getVisibleColumns(),o=n(f.target).closest("td"),s=o[0]&&o[0].cellIndex,a=e[s]&&e[s].allowEditing,h&&(!h||a)||c||l||t.closeEditCell())});n(document).on("dxclick",t._saveEditorHandler)}t._updateEditColumn(),t._updateEditButtons()},getEditMode:function(){return i(this)},getIndexByKey:function(n,t){return f(n,t)},hasChanges:function(){var i=this,t=!1;return n.each(i._editData,function(n,i){t=t||!!i.type}),t},dispose:function(){this.callBase(),n(document).off("dxclick",this._saveEditorHandler)},optionChanged:function(n){n.name==="editing"&&this.init(),this.callBase(n)},publicMethods:function(){return["insertRow","editRow","editCell","closeEditCell","removeRow","saveEditData","recoverRow","undeleteRow","cancelEditData"]},refresh:function(){var n=this._editRowIndex,t=this._editData;i(this)===u||i(this)===a?this.init():(this._editRowIndex=-1,this._editColumnIndex=-1)},isEditing:function(){return this._editRowIndex>-1},isEditRow:function(n){return i(this)===u&&this._editRowIndex===n},isEditCell:function(n,t){return this._editRowIndex===n&&this._editColumnIndex===t},processItems:function(n){var u=this,f=u._editData,i,r,o;for(u.update(),i=0;i<f.length;i++)r=f[i].key,o={key:r},f[i].type===e&&r.pageIndex===u._pageIndex&&(o[c]=r[c],n.splice(r.rowIndex,0,o));return n},processDataItem:function(t,u,o){var a=this,v,y,l,p=t.data[c]?t.data.key:t.key,w=i(a);if(v=f(p,a._editData),v>=0){y=a._editData[v],l=y.data;switch(y.type){case e:t.inserted=!0,t.key=p,t.data=l;break;case s:t.modified=!0,t.data=n.extend(!0,{},t.data,l),t.modifiedValues=o(l,u);break;case h:w===r&&(t.data=n.extend(!0,{},t.data,l)),t.removed=!0}}},insertRow:function(){var n=this,f=o(n),s=n.getView("rowsView"),u={data:{}},t={pageIndex:f.pageIndex(),rowIndex:s?s.getTopVisibleItemIndex():0},h=n._editRowIndex,l=i(n);if(n.refresh(),l!==r){if(n._insertIndex>1)return;n._editRowIndex=t.rowIndex}n.executeAction("onInitNewRow",u),t[c]=n._insertIndex++,n._addEditData({key:t,data:u.data,type:e}),f.updateItems({changeType:"update",rowIndices:[h,t.rowIndex]}),n._afterInsertRow({key:t,data:u.data})},_isEditingStart:function(n){return this.executeAction("onEditingStart",n),n.cancel},editRow:function(n){var t=this,r=o(t),u=r.items(),i=u[n],f={data:i.data,key:i.key,cancel:!1},e=t._editRowIndex;if(n===e)return!0;(i.inserted||(f.key=i.key),t._isEditingStart(f))||(t.init(),t._pageIndex=r.pageIndex(),u[0].inserted||(t._editRowIndex=n,t._addEditData({data:{},key:i.key,oldData:i.data}),r.updateItems({changeType:"update",rowIndices:[e,t._editRowIndex]})))},editCell:function(n,t){var r=this,s=o(r),l=s.items(),f=l[n],e={data:f&&f.data,cancel:!1,column:r._columnsController.getVisibleColumns()[t]},h=i(r),v=r._editRowIndex,c=r._editColumnIndex,y=e.column&&e.column.allowEditing,p=e.column&&e.column.showEditorAlways;return y&&f&&f.rowType==="data"&&!f.removed&&h!==u?h===a&&!f.inserted&&r.hasChanges()&&(r.saveEditData(),r.hasChanges())?!0:r.isEditCell(n,t)?!0:(f.inserted||(e.key=f.key),r._isEditingStart(e))?!0:(r._editRowIndex=n,r._editColumnIndex=t,r._pageIndex=s.pageIndex(),r._addEditData({data:{},key:f.key,oldData:f.data}),(!p||c>=0&&c!==t)&&(r._editCellInProgress=!0,s.updateItems({changeType:"update",rowIndices:[v,r._editRowIndex]})),setTimeout(function(){var t=r.getView("rowsView"),n=t.getCellElement(r._editRowIndex,r._editColumnIndex);n&&n.find("input").focus(),r._editCellInProgress=!1}),!0):!1},removeRow:function(n){var i=this,u=i.option("editing"),s=u&&u.texts,w=s&&s.confirmDeleteTitle,a=u&&u.editMode===r,v=s&&s.confirmDeleteMessage,y=o(i),l,b=i._editRowIndex,c=y.items()[n],p=c&&c.key;c&&(l=function(t){i.refresh();var r=f(t,i._editData);r>=0?i._editData[r].type===e?i._editData.splice(r,1):i._editData[r].type=h:i._addEditData({key:t,oldData:c.data,type:h}),a?y.updateItems({changeType:"update",rowIndices:[b,n]}):i.saveEditData()},a||!v?l(p):t.ui.dialog.confirm(v,w).done(function(n){n&&l(p)}))},recoverRow:function(n){return t.log("W1002","recoverRow","14.1","Use the 'undeleteRow' method instead"),this.undeleteRow(n)},undeleteRow:function(t){var i=this,h=o(i),u=h.items()[t],c=i._editRowIndex,l=u&&u.key,r,e;u&&(r=f(l,i._editData),r>=0&&(e=i._editData[r],n.isEmptyObject(e.data)?i._editData.splice(r,1):e.type=s,h.updateItems({changeType:"update",rowIndices:[c,t]})))},saveEditData:function(){var t=this,c=o(t),l=c.store(),d,g,a=[],v=[],y=t._editRowIndex,b=n.extend({},t._editData),p=i(t),k=function(t,i){n.each(i,function(n,i){var r=f(i,t._editData);r>=0&&t._editData.splice(r,1)})},w=function(n){n._editColumnIndex=-1,n._editRowIndex=-1};if(!t._beforeSaveEditData()){if(n.each(t._editData,function(i,r){var c=r.data,y=r.oldData,o=r.key,p=r.type,f,u;if(!t._beforeSaveEditData(r,i)){switch(p){case h:if(u={data:y,key:o,cancel:!1},t.executeAction("onRowRemoving",u),u.cancel)return;f=l.remove(o);break;case e:if(u={data:c,cancel:!1},t.executeAction("onRowInserting",u),u.cancel)return;f=l.insert(c);break;case s:if(u={newData:c,oldData:y,key:o,cancel:!1},t.executeAction("onRowUpdating",u),u.cancel)return;f=l.update(o,c)}f&&(f.done(n.proxy(a.push,a,o)),v.push(f))}}),v.length){n.when.apply(n,v).always(function(i){var u=i&&i.name==="Error";u&&(c.dataErrorOccurred.fire(i),p!==r)||(k(t,a),w(t),n.when(c.refresh()).always(function(){n.each(b,function(r,f){var c=f.data,l=f.key,a=f.type,o={key:l,data:c};u&&(o.error=i);switch(a){case h:t.executeAction("onRowRemoved",n.extend({},o,{data:f.oldData}));break;case e:t.executeAction("onRowInserted",o);break;case s:t.executeAction("onRowUpdated",o)}}),t._afterSaveEditData()}))});return}p===u?t.hasChanges()||t.cancelEditData():(w(t),c.updateItems(y>=0&&{changeType:"update",rowIndices:[y]})),t._afterSaveEditData()}},_updateEditColumn:function(){var n=this,t=n.option("editing"),r=t&&((t.editEnabled||t.insertEnabled)&&i(n)===u||t.removeEnabled);n._columnsController.addCommandColumn({command:"edit",visible:r,cssClass:"dx-command-edit",width:"auto"}),n._columnsController.columnOption("command:edit","visible",r)},_updateEditButtons:function(){var n=this,t=n._saveChangesButton,i=n._cancelChangesButton,r=n.hasChanges();t&&t.option("disabled",!r),i&&i.option("disabled",!r)},cancelEditData:function(){var n=this,t=o(n);n._beforeCancelEditData(),n.init(),t.updateItems()},closeEditCell:function(){var n=this,t=n._editRowIndex,r=o(n);setTimeout(function(){i(n)===a&&n.hasChanges()?n.saveEditData():t>=0&&(n._editRowIndex=-1,n._editColumnIndex=-1,r.updateItems({changeType:"update",rowIndices:[t]}),n._afterCloseEditCell())})},update:function(){var n=this,t=o(n);n._pageIndex!==t.pageIndex()&&(n.refresh(),n._pageIndex=t.pageIndex()),n._updateEditButtons()},updateFieldValue:function(n,t){var i=this,r={},u=n.key,e=n.column.dataField,o=n.column.serializeValue?n.column.serializeValue(t):t,f;n.value=t,u!==undefined&&(r[e]=o,f={data:r,key:u,type:s},i._addEditData(f),i._updateEditButtons())},_addEditData:function(t){var i=this,r=f(t.key,i._editData);return r<0&&(r=i._editData.length,i._editData.push(t)),i._editData[r]&&(t.type=i._editData[r].type||t.type,n.extend(!0,i._editData[r],{data:t.data,type:t.type})),r},getColumnTemplate:function(t){var r=this,e=t.column,l=t.row&&t.row.rowIndex,h,o,f,v=r.option("editing.editEnabled"),s=i(r)===u,c=r.isEditRow(l),a=r.isEditCell(l,t.columnIndex);return e.showEditorAlways||e.allowEditing&&e.dataField&&(c||a)&&t.rowType==="data"?((v||c||a)&&(s&&c||!s)&&(t.setValue=function(n){r.updateFieldValue(t,n)}),h=e.editCellTemplate||y(r)):e.command==="edit"&&(h=function(t,i){var u=function(t,i,u,f){var e=n("<a />").addClass(g).text(i).on(d("dxclick",ft),r.createAction(function(n){var t=n.jQueryEvent;t.stopPropagation(),setTimeout(function(){f.row&&r[u](f.row.rowIndex)})}));f.rtlEnabled?t.prepend(e,"&nbsp;"):t.append(e,"&nbsp;")};t.css("text-align","center"),i.rtlEnabled=r.option("rtlEnabled"),o=r.option("editing")||{},f=o.texts||{},i.row&&i.row.rowIndex===r._editRowIndex&&s?(u(t,f.saveRowChanges,"saveEditData",i),u(t,f.cancelRowChanges,"cancelEditData",i)):(o.editEnabled&&s&&u(t,f.editRow,"editRow",i),o.removeEnabled&&(i.row.removed?u(t,f.undeleteRow,"undeleteRow",i):u(t,f.deleteRow,"removeRow",i)))}),h},renderEditButtons:function(t){var u=this,s=t.find("."+w),f=u.option("editing")||{},e=u.option("editing.texts")||{},h={cancel:e.cancelAllChanges,save:e.saveAllChanges,addrow:e.addRow},o=function(t,i,r){return n("<div />").addClass(w).addClass("dx-datagrid-"+i+"-button").appendTo(t).dxButton({icon:"edit-button-"+i,onClick:function(n){var t=n.jQueryEvent;t.stopPropagation(),u[r]()},hint:h&&h[i]}).dxButton("instance")};s.length&&s.remove(),(f.editEnabled||f.insertEnabled||f.removeEnabled)&&i(u)===r&&(u._cancelChangesButton=o(t,"cancel","cancelEditData"),u._saveChangesButton=o(t,"save","saveEditData"),u._updateEditButtons()),f.insertEnabled&&o(t,"addrow","insertRow")},createHighlightCell:function(t,i){var u=t.find("."+l),r;return u.length||(t.addClass(ut),r=t.contents(),u=i.showEditorAlways||t.find("."+v).length?t.find("."+b).length?n("<div>").wrapInner(r):t.find("."+v).first():n("<div>").append(!r.length||r.length===1&&!r.eq(0).text().length?"&nbsp;":r),u.appendTo(t).addClass(l)),u},removeHighlightCell:function(n){var i=n.find("."+l),t=n.find("."+v);t.length&&!n.find("."+b).length?t.removeClass(l):i.children().unwrap()},_afterInsertRow:function(){},_beforeEditCell:function(){},_beforeSaveEditData:function(){},_afterSaveEditData:function(){},_beforeCancelEditData:function(){},_afterCloseEditCell:function(){}}}()),o.registerModule("editing",{defaultOptions:function(){return{editing:{editMode:"row",insertEnabled:!1,editEnabled:!1,removeEnabled:!1,texts:{editRow:Globalize.localize("dxDataGrid-editingEditRow"),saveAllChanges:Globalize.localize("dxDataGrid-editingSaveAllChanges"),saveRowChanges:Globalize.localize("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:Globalize.localize("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:Globalize.localize("dxDataGrid-editingCancelRowChanges"),addRow:Globalize.localize("dxDataGrid-editingAddRow"),deleteRow:Globalize.localize("dxDataGrid-editingDeleteRow"),recoverRow:Globalize.localize("dxDataGrid-editingUndeleteRow"),undeleteRow:Globalize.localize("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:Globalize.localize("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:Globalize.localize("dxDataGrid-editingConfirmDeleteTitle")}}}},controllers:{editing:o.EditingController},extenders:{controllers:{data:{init:function(){this._editingController=this.getController("editing"),this.callBase()},reload:function(){return this._editingController.refresh(),this.callBase()},_processItems:function(n,t){return n=this._editingController.processItems(n,t),this.callBase(n,t)},_processDataItem:function(n,t){return this._editingController.processDataItem(n,t.visibleColumns,this._generateDataValues),this.callBase(n,t)}}},views:{rowsView:{_getColumnTemplate:function(n){var t=this,i=t.getController("editing").getColumnTemplate(n);return i||t.callBase(n)},_createRow:function(n){var t=this.callBase(n),s,u,f,e,o;return n&&(s=this.getController("editing"),u=s.isEditRow(n.rowIndex),f=!!n.removed,e=!!n.inserted,o=!!n.modified,i(this)===r?t.toggleClass(tt,f):t.toggleClass(p,u),t.toggleClass(it,e),t.toggleClass(rt,o),(u||e||f||o)&&t.removeClass(y)),t},_rowClick:function(t,i){var r=this,u=r.getController("editing"),f=n(i.target).closest("td"),e=f.length?f[0].cellIndex:-1,o=r.option("editing.editEnabled");o&&u.editCell(t,e)||u.isEditRow(t)||r.callBase(t,i)},_cellPrepared:function(n,t){var r=t.row&&(t.row.inserted?t.row.values:t.row.modifiedValues),f=t.columnIndex,u=t.column.alignment,i=this.getController("editing");t.isEditing=i.isEditCell(t.rowIndex,t.columnIndex)||i.isEditRow(t.rowIndex)&&t.column.allowEditing,(t.isEditing||t.column.showEditorAlways)&&(n.addClass(nt).toggleClass(ot,!t.setValue),u&&n.find("input").first().css("text-align",u)),r&&t.column&&t.column.allowEditing&&r[f]!==undefined&&!t.isEditing&&i.createHighlightCell(n,t.column),this.callBase.apply(this,arguments)},_update:function(n){this.callBase(n),n.changeType==="updateSelection"&&this._tableElement.children("tbody").children("."+p).removeClass(y)}},headerPanel:{_renderCore:function(){this.callBase(),this.getController("editing").renderEditButtons(this.element())},isVisible:function(){var t=this,n=t.getController("editing").option("editing");return t.callBase()||n&&(n.insertEnabled||(n.editEnabled||n.removeEnabled)&&n.editMode===r)}}}}})}(jQuery,DevExpress),function(n,t){var i=t.ui.dxDataGrid,r=t.utils,u="dx-datagrid-invalid",l="dx-highlight-outline",o="dx-invalid-message",s="dx-invalid-message-always",f="__DX_INSERT_INDEX__",h="row",e="batch",c="cell";i.ValidatingController=i.Controller.inherit(function(){return{init:function(){this._editingController=this.getController("editing"),this.createAction("onRowValidating")},_rowValidating:function(n,t){var i=this,u=t.brokenRules||t.brokenRule&&[t.brokenRule],f=i.getController("data").items(),r={brokenRules:u,isValid:t.isValid,key:n.key,newData:n.data,oldData:n.oldData,errorText:null};return i.executeAction("onRowValidating",r),{isValid:r.isValid,errorText:r.errorText,rowIndex:i._editingController.getIndexByKey(n.key,f)}},validate:function(t){var i=this,r=!0,u=i._editingController,t=t||u.getEditMode()===h,f,e;return t?n.each(u._editData,function(n,t){var u;t.type&&(u=i.validateGroup(t),r=r&&u.isValid)}):i._currentCellValidator&&(f=i._currentCellValidator._findGroup(),e=i._currentCellValidator.validate(),r=i._rowValidating(f,e).isValid),r},validateGroup:function(i){var f=this,e=t.validationEngine.getGroupConfig(i),r,u={isValid:!0};return e&&(r=t.validationEngine.validateGroup(i),n.extend(!0,u,f._rowValidating(i,r))),u},setValidator:function(n){this._currentCellValidator=n},removeValidators:function(i){var u=this,f=u._editingController;n.each(f._editData,function(n,u){var e=t.validationEngine.getGroupConfig(u),o,f;if((!r.isDefined(i)||i===n)&&e)for(f=0;f<e.validators.length;f++)e.validators[f]._dispose(),f--})},createValidator:function(i,r){var h=this,f=h._editingController,e=i.column,s,o=f.getIndexByKey(i.key,f._editData),c=function(n){n.brokenRule&&(n.brokenRule.columnIndex=e.index),r&&(r.removeClass(u),n.isValid?f.removeHighlightCell(r):(r.addClass(u),f.createHighlightCell(r,e,!0)))};return o<0&&(o=f._addEditData({key:i.key})),o>=0?(s=f._editData[o],new t.ui.dxValidator(r||{},{name:e.caption,validationRules:n.extend(!0,[],e.validationRules),validationGroup:s,adapter:{getValue:function(){return i.value},applyValidationResults:c}})):void 0}}}()),i.registerModule("validating",{defaultOptions:function(){return{}},controllers:{validating:i.ValidatingController},extenders:{controllers:{data:{reload:function(){var n=this.callBase(),t=this.getController("editing");return n.done(function(){t.resetRowAndPageIndeces(!0)})}},editing:{_addEditData:function(n){var i=this,u=i.getIndexByKey(n.key,i._editData),r;return u>=0&&(r=i._editData[u],r.isValid=t.validationEngine.getGroupConfig(r)?t.validationEngine.validateGroup(r).isValid:!0),i.callBase(n)},_updateRowAndPageIndeces:function(){var t=this,i=t.getView("rowsView").getTopVisibleItemIndex(),r=i;n.each(t._editData,function(n,u){u.isValid||u.pageIndex===t._pageIndex||(u.pageIndex=t._pageIndex,u.rowIndex=u.type==="insert"?i:r,r++)})},resetRowAndPageIndeces:function(t){var i=this;n.each(i._editData,function(n,r){(r.pageIndex!==i._pageIndex||t)&&(delete r.pageIndex,delete r.rowIndex)})},init:function(){var t=this;t.callBase(),t.getController("data").changed.add(function(i){t.option("scrolling.mode")==="standard"&&t.resetRowAndPageIndeces(),n.each(t._editData,function(n,t){i&&i.changeType==="prepend"&&(t.rowIndex+=i.items.length)})})},processItems:function(t,r){var u=this,l=u.getController("data"),o,s=u._editData,h=t.length,c=0,a=function(t,r){var u=-1,f=t.type==="insert",e=t.key;return n.each(r,function(n,t){if(i.equalKeys(e,f?t:l.keyOf(t)))return u=n,!1}),u},v=function(n){var e={key:n.key},i=a(n,t),r;i>=0&&u.option("scrolling.mode")==="standard"||(n.rowIndex=n.rowIndex>h?n.rowIndex%h:n.rowIndex,r=n.rowIndex,e[f]=1,i>=0&&(t.splice(i,1),r-=c),t.splice(r,0,e),c++)};if(u.update(),u.getEditMode()===e&&r!=="prepend"&&r!=="append")for(o=0;o<s.length;o++)s[o].type&&s[o].pageIndex===u._pageIndex&&s[o].key.pageIndex!==u._pageIndex&&v(s[o]);return u.callBase(t,r)},processDataItem:function(t){var o=this,h,s,l=t.data[f],c=l?t.data.key:t.key,a=o.getEditMode();a===e&&l&&c&&(h=i.getIndexByKey(c,o._editData),h>=0&&(s=o._editData[h],s.type!=="insert"&&(t.data=n.extend(!0,{},s.oldData,s.data),t.key=c))),o.callBase.apply(o,arguments)},saveEditData:function(){this._updateRowAndPageIndeces(),this.callBase()},_afterInsertRow:function(t){var i=this.getController("validating"),u=this.getController("columns").getHiddenColumns();n.each(u,function(n,u){r.isArray(u.validationRules)&&i.createValidator({column:u,key:t.key,value:t.data[u.dataField]})}),this.callBase(t)},_beforeSaveEditData:function(n,t){var i=this,e,u,f=i.callBase.apply(i,arguments);return n?(u=n.type==="remove"||n.isValid,u?(e=i.getController("validating"),e.removeValidators(t)):r.isDefined(i._hasInvalidRules)&&(i._hasInvalidRules=!0),f=f||!u):i.getEditMode()===c&&(u=i.getController("validating").validate(),u&&i._hasInvalidRules?(i.cancelEditData(),i._hasInvalidRules=!1,f=!0):i._isValid||(i._hasInvalidRules=!0,f=!0)),f},_afterSaveEditData:function(){var n=this.getController("validating"),t=n.validate(!0);t&&n.removeValidators()},_beforeCancelEditData:function(){var n=this.getController("validating");n.removeValidators(),this.callBase()},_afterCloseEditCell:function(){var n=this.getController("validating");n.validate(!0),this.callBase()},createHighlightCell:function(n,t,i){var u=!0,r;i||(r=n.data("dxValidator"),r&&(u=r.validate().isValid)),u&&this.callBase(n,t)},updateFieldValue:function(){var i=this,r=i.getEditMode();i.callBase.apply(i,arguments),i._hasInvalidRules=!1,i._isValid=i.getController("validating").validate()}},editorFactory:{loseFocus:function(n){n||this.getController("validating").setValidator(null),this.callBase()},focus:function(t){var u=this,i=t&&t.closest("td"),f=i&&i.data("dxValidator"),h=i&&i.closest(".dx-datagrid-rowsview").find(".dx-tooltip"),c=i&&u.getController("columns").getVisibleColumns()[i.index()],e,r;return(h&&h.remove(),f&&(u.getController("validating").setValidator(f),e=f.validate(),!e.isValid))?(r=c.alignment,u.loseFocus(!0),n("<div/>").addClass(o).addClass(s).text(e.brokenRule.message).appendTo(i).dxTooltip({target:i,container:i,visible:!0,closeOnOutsideClick:!1,closeOnTargetScroll:!1,arrowPosition:{offset:r==="left"?"5 0":"-5 0",my:"bottom "+r,at:"top "+r},position:{offset:"0 -9",my:"top "+r,at:"bottom "+r}})):u.callBase(t)}}},views:{rowsView:{_cellPrepared:function(n,t){var i=this.getController("validating"),u=t.column;r.isArray(u.validationRules)&&i.createValidator(t,n),this.callBase.apply(this,arguments)}}}}})}(jQuery,DevExpress),function(n,t){var r=t.ui,i=r.dxDataGrid,u=t.utils;i.proxyMethod=function(n,t,i){n[t]||(n[t]=function(){var n=this._dataSource;return n?n[t].apply(n,arguments):i})},i.DataController=i.Controller.inherit({}).include(r.DataHelperMixin).inherit(function(){var r={init:function(){var t=this;t._items=[],t._columnsController=t.getController("columns"),t._columnsChangedHandler=n.proxy(t._handleColumnsChanged,t),t._dataChangedHandler=n.proxy(t._handleDataChanged,t),t._loadingChangedHandler=n.proxy(t._handleLoadingChanged,t),t._loadErrorHandler=n.proxy(t._handleLoadError,t),t._columnsController.columnsChanged.add(t._columnsChangedHandler),t._isLoading=!1,t._isCustomLoading=!1,t._refreshDataSource(),t.createAction("onDataErrorOccurred"),t.dataErrorOccurred.add(function(n){return t.executeAction("onDataErrorOccurred",{error:n})})},callbackNames:function(){return["changed","loadingChanged","dataErrorOccurred","pageIndexChanged","pageSizeChanged","filterChanged","dataSourceChanged"]},callbackFlags:function(n){if(n==="dataErrorOccurred")return"stopOnFalse"},publicMethods:function(){return["beginCustomLoading","endCustomLoading","refresh","filter","clearFilter","keyOf","byKey","getDataByKeys","pageIndex","pageSize","pageCount","totalCount","_disposeDataSource","getKeyByRowIndex","getRowIndexByKey"]},optionChanged:function(n){var t=this;switch(n.name){case"dataSource":case"scrolling":case"rtlEnabled":case"paging":case"columns":t._columnsController.reset(),t._refreshDataSource();break;case"onDataErrorOccurred":t.createAction("onDataErrorOccurred")}},_handleColumnsChanged:function(n){var t=this,f=n.changeTypes,r=n.optionNames,e,o=function(){t._columnsController.columnsChanged.remove(o),t.updateItems()};f.sorting||f.grouping?t._dataSource&&(t._dataSource.group(t._columnsController.getGroupDataSourceParameters()),t._dataSource.sort(t._columnsController.getSortDataSourceParameters()),t.reload()):f.columns&&((r.filterValue||r.selectedFilterOperation)&&this.option("filterRow.applyFilter")!=="onClick"&&(e=t._columnsController.columnOption(n.columnIndex,"filterValue"),(n.columnIndex===undefined||u.isDefined(e)||!r.selectedFilterOperation||r.filterValue)&&t._applyFilter()),t._needApplyFilter||i.checkChanges(r,["width","visibleWidth","filterValue","selectedFilterOperation"])||t._columnsController.columnsChanged.add(o))},_handleDataChanged:function(i){var r=this,u=r._dataSource,f=r._columnsController,e=f.isAllDataTypesDefined();u&&!r._isDataSourceApplying&&(r._isDataSourceApplying=!0,n.when(r._columnsController.applyDataSource(u)).done(function(){r._isDataSourceApplying=!1;var n=r._calculateAdditionalFilter(),u=r._needApplyFilter;r._needApplyFilter=!1,u&&n&&n.length&&!e?(t.log("W1005",r.component.NAME),r._applyFilter()):r.updateItems(i)}),r._needApplyFilter=!r._columnsController.isDataSourceApplied())},_handleLoadingChanged:function(n){this._isLoading=n,this._fireLoadingChanged()},_handleLoadError:function(n){this.dataErrorOccurred.fire(n)},_dataSourceOptions:function(){var i=this,n=i.option("paging"),t=i.option("scrolling"),u=!!(t&&t.mode==="virtual"),r=!!(t&&t.mode==="infinite");return{_preferSync:!0,paginate:n&&n.enabled||u||r,pageIndex:n&&n.pageIndex,pageSize:n&&n.pageSize,requireTotalCount:!r,scrolling:t}},_initDataSource:function(){var t=this,i=t._columnsController,r,u,n=this.option("dataSource"),f=this._dataSource;t.callBase(),n=t._dataSource,t._dataSource=f,n&&(i.updateSortingGrouping(n),r=i.getSortDataSourceParameters(),r&&n.sort(r),u=i.getGroupDataSourceParameters(),u&&n.group(u),t.setDataSource(n))},_processItems:function(t){var r=this,e=r._columnsController.getVisibleColumns(),o={visibleColumns:e,dataIndex:0},f=[];return n.each(t,function(n,t){u.isDefined(t)&&(t=r._processItem(t,o),f.push(t))}),f},_processItem:function(n,t){return n=this._generateDataItem(n),n=this._processDataItem(n,t),n.dataIndex=t.dataIndex++,n},_generateDataItem:function(n){return{rowType:"data",data:n,key:this.keyOf(n)}},_processDataItem:function(n,t){return n.values=this._generateDataValues(n.data,t.visibleColumns),n},_generateDataValues:function(t,i){var r=[];return n.each(i,function(){var n=null;this.command?n=null:this.calculateCellValue?n=this.calculateCellValue(t):this.dataField&&(n=t[this.dataField]),r.push(n)}),r},_updateItemsCore:function(t){var r=this,u,h=r._dataSource,c=[],f=t.changeType,s,e,o;if(h){u=t.items||h.items(),u=r._processItems(u.slice(0),f),t.items=u,t.changeType=f||"refresh";switch(f){case"prepend":r._items.unshift.apply(r._items,u);break;case"append":r._items.push.apply(r._items,u);break;case"update":s=t.rowIndices,s.sort(function(n,t){return n-t}),e=0,t.items=[],t.rowIndices=[],t.changeTypes=[],o=function(n,t){return i.equalKeys(n.key,t.key)&&n.rowType===t.rowType},n.each(s,function(i,s){var c,h,l,a;s+=e,s>=0&&n.inArray(s,t.rowIndices)<0&&(t.rowIndices.push(s),c=r._items[s],l=r._items[s+1],h=u[s],a=u[s+1],h&&t.items.push(h),c&&h&&o(c,h)?(f="update",r._items[s]=h):h&&!c||a&&o(c,a)?(f="insert",r._items.splice(s,0,h),e++):(c&&!h||l&&o(h,l))&&(f="remove",r._items.splice(s,1),e--),t.changeTypes.push(f))});break;default:r._items=u.slice(0)}n.each(r._items,function(n,t){t.rowIndex=n})}},updateItems:function(n){var t=this;n=n||{},t._dataSource&&t._columnsController.isDataSourceApplied()&&(t._updateItemsCore(n),t.changed.fire(n))},isLoading:function(){return this._isLoading||this._isCustomLoading},_fireLoadingChanged:function(n){this.loadingChanged.fire(this.isLoading(),n)},_calculateAdditionalFilter:function(){return null},_applyFilter:function(t){var r=this,u=r._dataSource,e=r._columnsController,s=e.isAllDataTypesDefined(),i=r._filter,f,o;if(u&&(f=r._calculateAdditionalFilter(),f&&(!t||s)&&(i=i?[f,"and",i]:f),o=u.pageIndex(),u.filter(i&&i.length?i:null),u.pageIndex(o),e.updateFilter(u),!t))return u.pageIndex(0),r.reload().done(n.proxy(r.filterChanged,"fire"))},filter:function(n){this._filter=arguments.length>1?Array.prototype.slice.call(arguments,0):n,this._applyFilter()},clearFilter:function(){this._filter=null,this._applyFilter()},_fireDataSourceChanged:function(){var n=this,t=function(){n.changed.remove(t),n.dataSourceChanged.fire()};n.changed.add(t)},_getDataSourceAdapterType:function(n){return n&&n.filtering&&n.sorting&&n.paging?i.DataSourceAdapterServer:i.DataSourceAdapterClient},_createDataSourceAdapterCore:function(n,i){var u,r;return i==="auto"&&(i=!(n.store()instanceof t.data.ArrayStore)),i===!0&&(i={filtering:!0,sorting:!0,paging:!0}),u=this._getDataSourceAdapterType(i),r=new u(this.component),r.init(n,i),r},_createDataSourceAdapter:function(n){var t=this.option("remoteOperations");return this._createDataSourceAdapterCore(n,t)},setDataSource:function(n){var t=this;t._dataSource&&(t._dataSource.changed.remove(t._dataChangedHandler),t._dataSource.loadingChanged.remove(t._loadingChangedHandler),t._dataSource.loadError.remove(t._loadErrorHandler),t._dataSource.dispose()),n&&(n=t._createDataSourceAdapter(n)),t._dataSource=n,n&&(t._fireDataSourceChanged(),t._isLoading=!n.isLoaded(),t._filter=n.filter(),t._needApplyFilter=!0,t._applyFilter(!0),n.changed.add(t._dataChangedHandler),n.loadingChanged.add(t._loadingChangedHandler),n.loadError.add(t._loadErrorHandler),n.isLoaded()&&t._handleDataChanged())},items:function(){return this._items},pageCount:function(){return this._dataSource?this._dataSource.pageCount():1},dataSource:function(){return this._dataSource},store:function(){var n=this._dataSource;return n&&n.store()},getKeyByRowIndex:function(n){var t=this.items()[n];if(t)return t.key},getRowIndexByKey:function(n){return i.getIndexByKey(n,this.items())},keyOf:function(n){var t=this.store();if(t)return t.keyOf(n)},byKey:function(t){var i=this.store(),r=this.getRowIndexByKey(t),u;if(i)return r>=0&&(u=n.Deferred().resolve(this.items()[r].data)),u||i.byKey(t)},getDataByKeys:function(t){var f=this,i=n.Deferred(),r=[],u=[];return n.each(t,function(n,t){r.push(f.byKey(t).done(function(t){u[n]=t}))}),n.when.apply(n,r).always(function(){i.resolve(u)}),i},pageIndex:function(t){var r=this,i=r._dataSource;return i?t!==undefined&&i.pageIndex()!==t?(i.pageIndex(t),i.load().done(n.proxy(r.pageIndexChanged,"fire"))):i.pageIndex():0},pageSize:function(t){var r=this,u=r.option("paging"),i=r._dataSource;return t===undefined?i?i.pageSize():0:i?(i.pageIndex(0),i.pageSize(t),u&&(u.pageSize=t),i.reload().done(n.proxy(r.pageSizeChanged,"fire"))):void 0},beginCustomLoading:function(n){this._isCustomLoading=!0,this._fireLoadingChanged(n)},endCustomLoading:function(){this._isCustomLoading=!1,this._fireLoadingChanged()},refresh:function(){var i=this,t=n.Deferred();return n.when(this._columnsController.refresh()).always(function(){n.when(i.reload()).done(t.resolve).fail(t.reject)}),t},dispose:function(){var n=this,t=n._dataSource;n.callBase(),t&&(t.changed.remove(n._dataChangedHandler),t.loadingChanged.remove(n._loadingChangedHandler))}};return i.proxyMethod(r,"load"),i.proxyMethod(r,"reload"),i.proxyMethod(r,"itemsCount",0),i.proxyMethod(r,"totalItemsCount",0),i.proxyMethod(r,"hasKnownLastPage",!0),i.proxyMethod(r,"isLoaded",!1),i.proxyMethod(r,"totalCount",0),r}()),i.registerModule("data",{defaultOptions:function(){return{loadingTimeout:0,dataSource:null,onDataErrorOccurred:null,remoteOperations:"auto"}},controllers:{data:r.dxDataGrid.DataController}})}(jQuery,DevExpress),function(n,t){var r=t.ui,i=r.dxDataGrid,u=t.utils;i.DataSourceAdapterServer=i.Controller.inherit(function(){return{init:function(t,i){var r=this;r._dataSource=t,r._remoteOperations=i,r._isLastPage=!t.isLastPage(),r._hasLastPage=!1,r._currentTotalCount=0,r.changed=n.Callbacks(),r.loadingChanged=n.Callbacks(),r.loadError=n.Callbacks(),r._dataChangedHandler=n.proxy(r._handleDataChanged,r),r._dataLoadingHandler=n.proxy(r._handleDataLoading,r),r._dataLoadedHandler=n.proxy(r._handleDataLoaded,r),r._loadingChangedHandler=n.proxy(r._handleLoadingChanged,r),r._loadErrorHandler=n.proxy(r._handleLoadError,r);t.on("changed",r._dataChangedHandler);t.on("customizeStoreLoadOptions",r._dataLoadingHandler);t.on("customizeLoadResult",r._dataLoadedHandler);t.on("loadingChanged",r._loadingChangedHandler);t.on("loadError",r._loadErrorHandler);n.each(t,function(t,i){!r[t]&&n.isFunction(i)&&(r[t]=function(){return this._dataSource[t].apply(this._dataSource,arguments)})})},dispose:function(){var n=this,t=n._dataSource;t.off("changed",n._dataChangedHandler),t.off("customizeStoreLoadOptions",n._dataLoadingHandler),t.off("customizeLoadResult",n._dataLoadedHandler),t.off("loadingChanged",n._loadingChangedHandler),t.off("loadError",n._loadErrorHandler)},_handleDataLoading:function(n){n.delay=this.option("loadingTimeout"),n.originalStoreLoadOptions=n.storeLoadOptions,this._dataSource.cancel(this._lastOperationId),this._lastOperationId=n.operationId},_handleDataLoaded:function(n){n.storeLoadOptions=n.originalStoreLoadOptions},_handleLoadingChanged:function(n){this.loadingChanged.fire(n)},_handleLoadError:function(n){this.changed.fire({changeType:"loadError",error:n}),this.loadError.fire(n)},_handleDataChanged:function(n){var t=this,u,i=t._dataSource,r=t.itemsCount();t._isLastPage=!r||!t.pageSize()||r<t.pageSize(),t._isLastPage&&(t._hasLastPage=!0),i.totalCount()>=0?i.pageIndex()>=t.pageCount()&&(i.pageIndex(t.pageCount()-1),i.load()):(u=i.pageIndex()*t.pageSize()+r,t._currentTotalCount=Math.max(t._currentTotalCount,u),r===0&&i.pageIndex()>=t.pageCount()&&(i.pageIndex(t.pageCount()-1),i.load())),i.isLoading()||this.changed.fire(n)},isLastPage:function(){return this._isLastPage},totalCount:function(){return parseInt(this._currentTotalCount||this._dataSource.totalCount())},itemsCount:function(){return this._dataSource.items().length},totalItemsCount:function(){return this.totalCount()},pageSize:function(){var n=this._dataSource;return!arguments.length&&!n.paginate()?0:n.pageSize.apply(n,arguments)},pageCount:function(){var n=this,t=n.totalItemsCount(),i=n.pageSize();return i&&t>0?Math.max(1,Math.ceil(t/i)):1},_reloadCore:function(){var n=this,t=n._dataSource;return n._currentTotalCount=0,n._isLastPage=!t.paginate(),n._hasLastPage=n._isLastPage,t.reload()},reload:function(){var r=this,i=this._dataSource,t=n.Deferred(),u;return i.isLoading()?(u=function(){i.loadingChanged.remove(u),setTimeout(function(){r.reload().done(t.resolve).fail(t.reject)})},i.loadingChanged.add(u)):n.when(r.refresh(i._createStoreLoadOptions())).always(function(){r._reloadCore().done(t.resolve).fail(t.reject)}),t},hasKnownLastPage:function(){return this._hasLastPage||this._dataSource.totalCount()>=0}}}()),i.DataSourceAdapterClient=i.DataSourceAdapterServer.inherit({_handleDataLoading:function(n){var i=this._remoteOperations||{},t=n.loadOptions=n.storeLoadOptions;this.callBase(n),n.storeLoadOptions={userData:t.userData},i.filtering&&(n.storeLoadOptions.filter=t.filter,delete t.filter),i.sorting&&(n.storeLoadOptions.sort=t.sort,delete t.sort),this._handleDataLoadingCore(n)},_handleDataLoadingCore:function(){},_handleDataLoaded:function(n){var r=this.callBase,i=n.loadOptions;n.skip=i.skip,n.take=i.take,delete i.skip,delete i.take,new t.data.ArrayStore(n.data).load(i).done(function(t){n.data=t,i.requireTotalCount&&(n.extra=n.extra||{totalCount:t.length})}),this._handleDataLoadedCore(n),r.apply(this,arguments)},_handleDataLoadedCore:function(n){n.skip!==undefined&&(n.data=n.data.slice(n.skip)),n.take!==undefined&&(n.data=n.data.slice(0,n.take))}})}(jQuery,DevExpress),function(n,t){var e=t.ui,i=e.dxDataGrid,l=e.events,o=t.utils,u=t.data.utils.normalizeSortingInfo,r="dx-datagrid-group-panel",a="dx-group-panel-message",s="dx-group-panel-item",v="dx-datagrid-action",h=function(){var i=function(n,i){for(var r=0;r<n.length;r++)if(t.data.utils.keysEqual(null,n[r].key,i))return n[r]},r=function(n,t){for(var i=0;i<n.length;i++)if(n[i].offset>t)break;return i},f=function(n){for(var t,u,i=0;i<n.length;i++)t=n[i],t.data&&t.data.offset!==t.offset&&(n.splice(i,1),t.offset=t.data.offset,u=r(n,t.offset),n.splice(u,0,t),u>i&&i--)},e=function(n,t,i){for(var r=0;r<n.length;r++)t+1>=i?n[r].children=[]:e(n[r].children,t+1,i)};return{init:function(){this.callBase.apply(this,arguments),this.reset()},reset:function(){this._groupsInfo=[],this._totalCountCorrection=0},totalItemsCount:function(){var n=this,t=n.callBase();return t>0&&n._dataSource.group()&&n._dataSource._createStoreLoadOptions().requireTotalCount?t+n._totalCountCorrection:t},itemsCount:function(){return this._dataSource.group()?this._itemsCount||0:this.callBase()},updateTotalItemsCount:function(n){this._totalCountCorrection=n||0},_isGroupItemCountable:function(n){return!this._isVirtualPaging()||!n.isContinuation},_isVirtualPaging:function(){var n=this.option("scrolling.mode");return n==="virtual"||n==="infinite"},updateItemsCount:function(n,t){function i(n,t,r){var u,f=0;if(t)if(r)for(u=0;u<t.length;u++)n._isGroupItemCountable(t[u])&&f++,f+=i(n,t[u].items,r-1);else f=t.length;return f}this._itemsCount=i(this,n,t)},foreachGroups:function(t,i){function r(t,i,u,e){function c(n,t,i,r){var u=t&&n(t,i);return r.push(u),u}for(var h,s=[],o=0;o<t.length;o++){if((e.push(t[o].data),!u&&c(i,t[o].data,e,s)===!1)||(!t[o].data||t[o].data.isExpanded)&&(h=r(t[o].children,i,u,e),s.push(h),h===!1)||u&&c(i,t[o].data,e,s)===!1)return!1;e.pop()}return n.when.apply(n,s).always(function(){f(t)})}var u=this;return r(u._groupsInfo,t,i,[])},findGroupInfo:function(n){for(var f=this,e,t,u=f._groupsInfo,r=0;u&&r<n.length;r++)t=i(u,n[r]),u=t&&t.children;return t&&t.data},addGroupInfo:function(n){for(var h=this,s,t,o=n.path,e=h._groupsInfo,u=0;u<o.length;u++)t=i(e,o[u]),t||(t={key:o[u],offset:n.offset,children:[]},s=r(e,n.offset),e.splice(s,0,t)),u===o.length-1&&(t.data=n,f(e)),e=t.children},allowCollapseAll:function(){return!0},isRowExpanded:function(n){var t=this.findGroupInfo(n);return t?t.isExpanded:!1},collapseAll:function(n){return this.allowCollapseAll()?this._collapseExpandAll(n,!1):(t.log("E1018"),!1)},expandAll:function(n){return this._collapseExpandAll(n,!0)},_collapseExpandAll:function(n,t){var e=this,o=e._dataSource,f=o.group(),r=u(f||[]),i;if(r.length){for(i=0;i<r.length;i++)n===undefined||n===i?r[i].isExpanded=t:f&&f[i]&&(r[i].isExpanded=f[i].isExpanded);o.group(r),e.foreachGroups(function(i,r){(n===undefined||n===r.length-1)&&(i.isExpanded=t)})}return!0},_handleDataLoading:function(n){this._group=n.storeLoadOptions.group,this.callBase(n)},refresh:function(n){var i=this,t,f=u(i._group||[]),o=u(n.group||[]),r=Math.min(f.length,o.length);for(i._group=n.group,t=0;t<r;t++)if(f[t].selector!==o[t].selector){r=t;break}r?e(i._groupsInfo,0,r):i.reset()},changeRowExpand:function(n){var i=this,t=i._dataSource;if(t.group())return t._changeLoadingCount(1),i._changeRowExpandCore(n).always(function(){t._changeLoadingCount(-1)})}}}(),c,f;i.DataSourceAdapterClient=i.DataSourceAdapterClient.inherit(h),i.DataSourceAdapterServer=i.DataSourceAdapterServer.inherit(h),c=function(){return{_processItems:function(n){var t=this._columnsController.getGroupColumns();return n.length&&t.length&&(n=this._processGroupItems(n,t.length)),this.callBase(n)},_processItem:function(n,t){return o.isDefined(n.groupIndex)&&o.isString(n.rowType)&&n.rowType.indexOf("group")===0?(n=this._processGroupItem(n,t),t.dataIndex=0):n=this.callBase.apply(this,arguments),n},_processGroupItem:function(n){return n},_processGroupItems:function(n,t,i){var s=this,o,e,u,f,r;if(i||(o=s.option("scrolling.mode"),i={collectContinuationItems:o!=="virtual"&&o!=="infinite",resultItems:[],path:[]}),f=i.resultItems,r=i.path,i.data&&(i.collectContinuationItems||!i.data.isContinuation)&&f.push({rowType:"group",data:i.data,groupIndex:r.length-1,isExpanded:!!i.data.items,key:r,values:r}),n)if(t===0)f.push.apply(f,n);else for(e=0;e<n.length;e++)u=n[e],u&&(i.data=u,i.path=r.concat(u.key),s._processGroupItems(u.items,t-1,i),i.data=undefined,i.path=r);return f},publicMethods:function(){return this.callBase().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])},collapseAll:function(n){var t=this._dataSource;t&&t.collapseAll(n)&&(t.pageIndex(0),t.reload())},expandAll:function(n){var t=this._dataSource;t&&t.expandAll(n)&&(t.pageIndex(0),t.reload())},changeRowExpand:function(t){var r=this,i=this._dataSource;i&&n.when(i.changeRowExpand(t)).done(function(){r.load()})},isRowExpanded:function(n){var t=this._dataSource;return t&&t.isRowExpanded(n)},expandRow:function(n){this.isRowExpanded(n)||this.changeRowExpand(n)},collapseRow:function(n){this.isRowExpanded(n)&&this.changeRowExpand(n)},optionChanged:function(n){n.name==="grouping"&&(n.name="dataSource"),this.callBase(n)}}}(),f=function(){return{_renderGroupPanel:function(){var i=this,f=i.element(),u=i.option("groupPanel"),t,e=i.getController("columns").getGroupColumns();t=f.find("."+r),u&&u.visible?(t.length?t.show():t=n("<div />").addClass(r).prependTo(f),i._renderGroupPanelItems(t,e),u.allowColumnDragging&&!e.length&&n("<div />").addClass(a).text(u.emptyPanelText).appendTo(t)):t.hide()},_renderGroupPanelItems:function(t,i){var r=this,u;t.empty(),n.each(i,function(i,f){u=n("<div />").addClass(f.cssClass).addClass(s).toggleClass(v,f.allowSorting).appendTo(t).text(f.caption).on(l.addNamespace("dxclick","dxDataGridHeaderPanel"),r.createAction(function(){setTimeout(function(){r.getController("columns").changeSortOrder(f.index)})})),r._applySorting(u,{alignment:"left",sortOrder:f.sortOrder==="desc"?"desc":"asc"},!0)}),r._updateSortIndicatorPositions(t)},_renderCore:function(){this.callBase.apply(this,arguments),this._renderGroupPanel()},_resizeCore:function(){var n=this,t=n.element(),i=t&&t.find("."+r),u=n.option("groupPanel");n.callBase(),n._updateSortIndicatorPositions(i)},allowDragging:function(n){var t=this.option("groupPanel");return t&&t.visible&&t.allowColumnDragging&&n&&n.allowGrouping},getColumnElements:function(){var n=this.element();return n&&n.find("."+s)},getColumns:function(){return this.getController("columns").getGroupColumns()},getBoundingRect:function(){var i=this,n=i.element(),t;return n&&n.find("."+r).length?(t=n.offset(),{top:t.top,bottom:t.top+n.height()}):null},getName:function(){return"group"},isVisible:function(){return this.callBase()||this.option("groupPanel.visible")},optionChanged:function(n){n.name==="groupPanel"?this._renderGroupPanel():this.callBase(n)}}}(),i.GroupingHeaderPanelExtender=f,i.registerModule("grouping",{defaultOptions:function(){return{grouping:{autoExpandAll:!0,allowCollapsing:!0,groupContinuesMessage:Globalize.localize("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:Globalize.localize("dxDataGrid-groupContinuedMessage")},groupPanel:{visible:!1,emptyPanelText:Globalize.localize("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}},extenders:{controllers:{data:c},views:{headerPanel:f}}})}(jQuery,DevExpress),function(n,t){var o=t.utils,r=t.data.utils,f=t.ui.dxDataGrid,i=r.normalizeSortingInfo,e=r.keysEqual,u=function(t,i){var r=n.Deferred(),u=n.extend({skip:0,take:0,requireTotalCount:!0},i);return t.load(u).done(function(u,f){f&&isFinite(f.totalCount)?r.resolve(f.totalCount):t.totalCount(i).done(n.proxy(r.resolve,r)).fail(n.proxy(r.reject,r))}).fail(n.proxy(r.reject,r)),r};f.DataSourceAdapterServer=f.DataSourceAdapterServer.inherit(function(){var f=function(n,t){return n.foreachGroups(function(n){if(!n.isExpanded)return t(n)})},s=function(n,t){var i=0,r=t||0;return t&&(f(n,function(n){if(n.offset-i>=t)return!1;i+=n.count-1}),r+=i),r},h=function(n,t,i,r,u,f){for(var e,s,o=0,c=!1,a,l=0;l<t.length;l++)e=t[l],e.items!==undefined?(i.push(e.key),a=n.findGroupInfo(i),a&&!a.isExpanded?(e.items=null,r+=a.count,f--,f<0&&o++,u&&(c=!0)):e.items&&(s=h(n,e.items,i,r,u,f),u&&(s.offset-r>1?e.isContinuation=!0:c=!0),r=s.offset,f=s.take,f<0&&(e.items.length?e.isContinuationOnNextPage=!0:o++)),i.pop()):(u&&(c=!0),r++,f--,f<0&&o++),u=!1;return c&&t.splice(0,1),o&&t.splice(-o,o),{offset:r,take:f}},l=function(n,t){var i;if(n.length!==t.length)return!1;for(i=0;i<n.length;i++)if(!e(null,n[i],t[i]))return!1;return!0},o=function(n,t,i,r,u){var s,f,h=n._groupsInfo,e;if(t){for(s=0;s<t.length;s++)f=t[s],"key"in f&&f.items!==undefined?(i.push(f.key),u&&l(u.path,i)&&!f.isContinuation&&(u.offset=r),e=n.findGroupInfo(i),e&&!e.isExpanded?f.isContinuation||(e.offset=r,r+=e.count):r=o(n,f.items,i,r,u),i.pop()):r++;return r}},a=function(n){var t,u;n.group&&(t=i(n.group||[]),u=i(n.sort||[]),n.sort=r.arrangeSortingInfo(t,u),delete n.group)},c=function(n,t){for(var f=i(t.group||[]),u=[],r=0;r<n.length;r++)u.push([f[r].selector,"=",n[r]]);return t.filter&&u.push(t.filter),u},v=function(n,t,r){for(var s=i(r||t.group||[]),f,o,u=[],e=0;e<n.length;e++){for(o=[],f=0;f<=e;f++)o.push([s[f].selector,e===f?"<>":"=",n[f]]);u.length&&u.push("or"),u.push(o)}return n.length>1&&(u=[u]),t.filter&&u.push(t.filter),u},y=function(n,t){for(var o=i(t.group||[]),r,e,u=[],f=0;f<n.length;f++){for(e=[],r=0;r<=f;r++)e.push([o[r].selector,f===r?o[r].desc?">":"<":"=",n[r]]);u.length&&u.push("or"),u.push(e)}return t.filter&&u.push(t.filter),u};return{_handleDataLoading:function(t){var e=this,r=t.storeLoadOptions,y,i,o=[],p=[],c=!1,l,u=r.group,h=0;e.callBase(t),a(r),i=n.extend({},r),i.skip=s(e,r.skip),i.skip&&i.take&&u&&(i.skip--,i.take++,c=!0),i.take&&u&&(l=i.take,i.take++),f(e,function(n){if(n.offset>=i.skip+i.take+h)return!1;n.offset>=i.skip+h&&n.count&&(h+=n.count-1,o.push(n.path))}),n.each(o,function(){i.filter=v(this,i,u)}),t.storeLoadOptions=i,t.collapsedPaths=o,t.skip=i.skip||0,t.skipFirstItem=c,t.take=l,t.group=u},_handleDataLoaded:function(n){function a(n,t,i){if(n&&t.length&&i.length){for(var o,f,e=r.toComparable(t[0],!0),u=0;u<n.length;u++)if(f=r.toComparable(n[u].key,!0),i[0].desc?e>=f:e<=f)break;n.length&&e===f||n.splice(u,0,{key:t[0],items:[]}),a(n[u].items,t.slice(1),i.slice(1))}}var s=this,u=n.data,v,f,c,e=n.collapsedPaths,o=i(n.group||[]),l=o.length;if(this.callBase(n),l){if(c=t.data.query(u),t.data.utils.multiLevelGroup(c,o).enumerate().done(function(n){u=n}),e)for(f=0;f<e.length;f++)a(u,e[f],o);h(s,u,[],n.skip,n.skipFirstItem,n.take),s.updateItemsCount(u,l),n.data=u}},updateTotalItemsCount:function(){var n=0;f(this,function(t){t.count&&(n-=t.count-1)}),this.callBase(n)},_changeRowExpandCore:function(t){var i=this,r=i._dataSource,l=i.basePageIndex&&i.basePageIndex()||i.pageIndex(),f=i.items(),e=s(i,l*i.pageSize()),h;return h=u(r.store(),{filter:c(t,{filter:r.filter(),group:r.group()})}),n.when(h).done(function(n){var r;n=parseInt(n.length?n[0]:n),r=i.findGroupInfo(t),r?(o(i,f,[],e),r.isExpanded=!r.isExpanded,r.count=n):(r={offset:-1,count:n,path:t,isExpanded:!1},o(i,f,[],e,r),r.offset>=0&&i.addGroupInfo(r)),i.updateTotalItemsCount()}).fail(n.proxy(r.loadError.fire,r.loadError))},allowCollapseAll:function(){return!1},refresh:function(t){var i=this,r=i._dataSource.store();return i.callBase(t),f(i,function(f){var e=u(r,{filter:c(f.path,t)}),o=u(r,{filter:y(f.path,t)});return n.when(o,e).done(function(n,t){n=parseInt(n.length?n[0]:n),t=parseInt(t.length?t[0]:t),f.offset=n,f.count!==t&&(f.count=t,i.updateTotalItemsCount())}).fail(n.proxy(i._dataSource.loadError.fire,i._dataSource.loadError))})}}}())}(jQuery,DevExpress),function(n,t){var f=t.utils,r=t.data.utils,u=t.ui.dxDataGrid,i=r.normalizeSortingInfo,e=r.keysEqual;u.DataSourceAdapterClient=u.DataSourceAdapterClient.inherit(function(){var t=function(n,t){return n.foreachGroups(function(n,i){if(n.isExpanded)return t(n,i)},!0)},f=function(n,t,i,r){var e,u,o;if(r)for(e=0;e<t.length;e++)u=t[e],u.items!==undefined&&(i.push(u.key),o=n.findGroupInfo(i),o&&o.isExpanded?f(n,u.items,i,r-1):u.items=null,i.pop())},h=function(n,t){for(var u=!1,f=i(t||[]).length,r=0;r<f;r++)n._isGroupExpanded(r)&&(u=!0);return u},e=function(n,t,i,r){o(n,t,0,i,[],r)},o=function(n,t,i,r,u,f){var e,s,h;if(!(i>=r))for(s=0;s<t.length;s++)e=t[s],e&&(u.push(e.key),h=n.findGroupInfo(u),h?(h.count=e.items.length,h.offset=f+s):n.addGroupInfo({isExpanded:n._isGroupExpanded(i),path:u.slice(0),offset:f+s,count:e.items.length}),o(n,e.items,i+1,r,u,0),u.pop())},r=function(n,t){return n&&n.length&&n[t]&&!!n[t].isExpanded},s=function(n,t,i){for(var o=0,f,e=i,r=0;r<n.length;r++)f=n[r].offset+1,r>0&&(f+=n[r-1].childrenTotalCount,t&&(f+=u(e,t,f,r-1)*r)),e+=f;return e},u=function(n,t,i,r){if(r=r||0,t>1&&i>0){var u=n-Math.floor(n/t)*t||t;return u+=i-r-2,u<0&&(u+=t),Math.floor(u/(t-r-1))}return 0};return{updateTotalItemsCount:function(){var n=0,i=this.pageSize(),r=this._isVirtualPaging();t(this,function(n){n.childrenTotalCount=0}),t(this,function(t,f){var o=s(f,r?0:i,n),e=t.count+t.childrenTotalCount,h;r||(e+=u(o,i,e,f.length-1)),f[f.length-2]?f[f.length-2].childrenTotalCount+=e:n+=e}),this.callBase(n)},_isGroupExpanded:function(n){var t=this._dataSource.group();return r(t,n)},_updatePagingOptions:function(n){var f=this,c=n.loadOptions,v=this._dataSource,l=f._isVirtualPaging(),r=f.pageSize(),y=i(c.group||[]),p=i(c.sort||[]),a=[],e=[],o=0,h=0;n.take&&(t(this,function(n){n.childrenTotalCount=0,n.skipChildrenTotalCount=0}),t(f,function(t,i){var c,y,b=0,k=0,v=s(i,l?0:r,h),d=0,p=0,f=t.count+t.childrenTotalCount,w=f;v<=n.skip+n.take&&f&&(c=n.skip-v,y=n.take,l||(d=u(v,r,f,i.length-1),f+=d*i.length,w+=d,r&&c>=0&&(b=i.length,k=i.length-1,p=Math.floor(c/r))),c>=0?(v+f>n.skip&&a.unshift(c-p*b-t.skipChildrenTotalCount),v+f>=n.skip+y&&e.unshift(y-b-t.childrenTotalCount+t.skipChildrenTotalCount)):v+f>=n.skip+y&&e.unshift(y+c-t.childrenTotalCount)),v<=n.skip&&(i[i.length-2]?i[i.length-2].skipChildrenTotalCount+=Math.min(w,c+1-p*k):o+=Math.min(w,c+1)),v<=n.skip+y&&(f=Math.min(w,c+y-(p+1)*k),i[i.length-2]?i[i.length-2].childrenTotalCount+=f:h+=f)}),n.skip-=o,n.take-=h-o),n.skips=a,n.takes=e},_changeRowExpandCore:function(t){var r=this,i=r.findGroupInfo(t);return i?(i.isExpanded=!i.isExpanded,r.updateTotalItemsCount(),n.Deferred().resolve()):n.Deferred().reject()},_handleDataLoadedCore:function(n){var o=this,l=o.callBase,a=n.data,s=i(n.loadOptions.group||[]).length,v=o.summary(),c,h,r,u,t;for(e(o,n.data,s,0),o.updateTotalItemsCount(),o._updatePagingOptions(n),l.call(o,n),c=n.skips,h=n.takes,t=n.data,r=0;t&&r<s;r++)u=t[0],t=u&&u.items,t&&c[r]!==undefined&&(u.isContinuation=!0,t=t.slice(c[r]),u.items=t);for(t=n.data,r=0;t&&r<s;r++)u=t[t.length-1],t=u&&u.items,t&&h[r]!==undefined&&t.length>h[r]&&(u.isContinuationOnNextPage=!0,t=t.slice(0,h[r]),u.items=t);f(o,n.data,[],s),o.updateItemsCount(n.data,s)},refresh:function(t){for(var u=this,s=i(u._group||[]),o=i(t.group||[]),f=0;f<s.length;f++)if(r(u._group,f)!==r(t.group,f)){u.reset();return}return u.callBase(t),u.foreachGroups(function(n){n.count=0}),o.length?u._dataSource.store().load(t).done(function(n){e(u,n,o.length,0)}).fail(n.proxy(u._dataSource.loadError.fire,u._dataSource.loadError)):void 0}}}())}(jQuery,DevExpress),function(n,t){var h=t.ui,i=h.dxDataGrid,w=t.utils,c="dx-datagrid-table",l="dx-row",a="dx-freespace-row",v="dx-column-lines",f="dx-datagrid-bottom-load-panel",y="dx-datagrid-table-content",p="dx-datagrid-group-space",r="infinite",e="virtual",u=25e4,o=function(){var h=function(n){return n.option("scrolling.preloadEnabled")?2:1},t=function(n){return n.option("scrolling.mode")===e},i=function(n){return n.option("scrolling.mode")===r},u=function(n){return n._cache[0]?n._cache[0].pageIndex:-1},f=function(n){var i=u(n),r=n._cache.length;t(n)&&(i<0||n._viewportItemIndex>=0&&(i*n.pageSize()>n._viewportItemIndex||i*n.pageSize()+n.itemsCount()<n._viewportItemIndex+n._viewportSize)&&n._dataSource.isLoading()?n._isLoading||(n._isLoading=!0,n.loadingChanged.fire(!0)):n._isLoading&&(n._isLoading=!1,n.loadingChanged.fire(!1)))},o=function(n,t){n._isDelayChanged&&(n._isDelayChanged=!1,t.call(n))},s=function(n,t,i,r){var e=n._dataSource,u=e.items();i==="append"?n._items.push.apply(n._items,u):i==="prepend"?n._items.unshift.apply(n._items,u):n._items=u,f(n),n._lastPageIndex=n.pageIndex(),n._isDelayChanged=r,r||t.call(n,i&&{changeType:i,items:u})};return{init:function(n){var t=this;t.callBase.apply(t,arguments),t._isLoading=!0,t._pageIndex=n.pageIndex(),t._lastPageIndex=t._pageIndex,t._viewportSize=0,t._viewportItemIndex=-1,t._userPageSize=t.option("paging.pageSize"),t._items=[],t._isLoaded=!0,t._cache=[],n.isLoaded()&&t._handleDataChanged()},_handleLoadingChanged:function(n){var i=this;t(i)||(i._isLoading=n,i.callBase.apply(i,arguments))},_handleLoadError:function(){var n=this;n._isLoading=!1,n.loadingChanged.fire(!1),n.callBase.apply(n,arguments)},_handleDataChanged:function(){var n=this,r,e=n.callBase,f=n._dataSource,l=n._cache.length,h,c;t(n)?(r=u(n),r>=0&&(r+n._cache.length===f.pageIndex()||r-1===f.pageIndex()||(n._cache=[])),c={pageIndex:f.pageIndex(),itemsCount:n.itemsCount(!0)},o(n,e),r===f.pageIndex()+1?(h="prepend",n._cache.unshift(c)):(h="append",n._cache.push(c)),s(n,e,n._cache.length>1?h:undefined,l===0),n.load().done(function(){o(n,e)})):s(n,e,i(n)&&f.pageIndex()!==0?"append":undefined)},items:function(){return this._items},itemsCount:function(i){var r=0;return!i&&t(this)?n.each(this._cache,function(){r+=this.itemsCount}):r=this.callBase(),r},virtualItemsCount:function(){var n=this,i,f=0,o,r,e;if(t(n))return i=u(n),i<0&&(i=0),r=i*n.pageSize(),f=n._cache.length*n.pageSize(),e=Math.max(0,n.totalItemsCount()-f-r),{begin:r,end:e}},setViewportItemIndex:function(n){var r=this,f=r.pageSize(),v=r._dataSource,e=r.pageCount(),c=t(r),l=i(r),s=r.totalItemsCount(),o,a=r._viewportItemIndex<0,h,u;r._viewportItemIndex=n,f&&(c||l)&&(r._viewportSize&&n+r._viewportSize>=s?r.hasKnownLastPage()?(u=e-1,o=s%f,u>0&&o>0&&o<f/2&&u--):r.pageIndex()<e&&(u=e):(u=Math.floor(n/f),h=e-1,u=Math.max(u,0),u=Math.min(u,h)),(r.pageIndex()!==u||a)&&(r.pageIndex(u),r.load()))},setViewportSize:function(n){var r=this,u;r._viewportSize!==n&&(r._viewportSize=n,(t(r)||i(r))&&!r._userPageSize&&(u=Math.ceil(n/5)*10,u!==r.pageSize()&&(r.pageSize(u),r.reload())))},getViewportSize:function(){return this._viewportSize},pageIndex:function(n){return t(this)||i(this)?(n!==undefined&&(this._pageIndex=n),this._pageIndex):this._dataSource.pageIndex(n)},basePageIndex:function(){var n=u(this);return n>0?n:0},load:function(){var r=u(this),e=-1,s=this._dataSource,o,c=function(n,t){var i=n._dataSource;if(t===n.pageIndex()||!i.isLoading()&&t<n.pageCount()||!n.hasKnownLastPage()&&t===n.pageCount())return i.pageIndex(t),i.load()};return t(this)?((r<0||!this._cache[this._pageIndex-r])&&(e=this._pageIndex),r>=0&&e<0&&this._viewportItemIndex>=0&&r+this._cache.length<=this._pageIndex+h(this)&&(e=r+this._cache.length),e>=0&&(o=c(this,e)),f(this)):i(this)?s.isLoaded()&&this.pageIndex()!==this.pageCount()||(s.pageIndex(this.pageIndex()),o=s.load()):o=s.load(),o||this._lastPageIndex===this.pageIndex()||this.changed.fire({changeType:"pageIndex"}),o||n.Deferred().resolve()},isLoading:function(){return this._isLoading},isLoaded:function(){return this._dataSource.isLoaded()&&this._isLoaded},changeRowExpand:function(){return this._cache=[],f(this),this.callBase.apply(this,arguments)},reload:function(){var n=this,t=n._dataSource;return n._cache=[],n._isLoaded=!1,f(n),n._isLoaded=!0,i(n)?(n.pageIndex(0),t.pageIndex(0)):t.pageIndex(n.pageIndex()),n.callBase()}}}(),s;i.DataSourceAdapterServer=i.DataSourceAdapterServer.inherit(o),i.DataSourceAdapterClient=i.DataSourceAdapterClient.inherit(o),s=function(){return{_renderCore:function(){var n=this;n.callBase.apply(n,arguments),n._updateContentPosition()},_renderContent:function(n,t){var i=this,r=i._dataController.virtualItemsCount(),u=n.children().length;if(r)t.addClass(y),n.children().length?n.children().first().replaceWith(t):n.append(t),n.children().length===1&&(n.append(i._createTable()),i._contentHeight=0);else return i.callBase.apply(i,arguments)},_updateContent:function(n,t,i){var r=this,e=r._rowHeight||20,f,u=t&&t.changeType,o=r._dataController.virtualItemsCount();u==="append"||u==="prepend"?(f=n.children().first(),i.children("tbody").children("tr")[u==="append"?"appendTo":"prependTo"](f)):r.callBase.apply(r,arguments),r._updateBottomLoading()},_updateContentPosition:function(){var n=this,r,i,f=n._rowHeight||20,u=n._dataController.virtualItemsCount();u&&(r=n._findContentElement(),t.translator.move(r.children().first(),{top:Math.floor(u.begin*f)}),i=(u.begin+u.end)*f+r.children().first().outerHeight(),(n._contentHeight!==i||i===0)&&(n._contentHeight=i,n._updateContainerHeight(r.children().eq(1),i)))},_updateContainerHeight:function(n,t){for(var o=this,f=o._columnsController.getVisibleColumns(),e=i.createColGroup(f).prop("outerHTML"),s="",y=o.option("showColumnLines")?v:"",h=function(n){return'<tr style="height:'+n+'px;" class="'+a+" "+l+" "+y+'" >'+s+"<\/tr>"},r=0;r<f.length;r++)s+=f[r].command==="expand"?'<td class="'+p+'"/>':"<td />";while(t>u)e+=h(u),t-=u;e+=h(t),n.addClass(c),n.html(e)},_findBottomLoadPanel:function(){var n=this.element().find("."+f);if(n.length)return n},_updateBottomLoading:function(){var i=this,u=i.option("scrolling.mode"),o=u===e,s=u===r,h=!i._dataController.hasKnownLastPage()&&i._dataController.isLoaded()&&(o||s),t=i._findBottomLoadPanel();h?(t=t||n("<div />").addClass(f).append(n("<div />").dxLoadIndicator()),t.appendTo(i._findContentElement()),t.show()):t&&t.hide()},_handleScroll:function(n){var t=this;t._hasHeight&&t._rowHeight&&t._dataController.setViewportItemIndex(n.scrollOffset.top/t._rowHeight),t.callBase.apply(t,arguments)},_renderScrollableCore:function(n){var t=this;t.callBase.apply(t,arguments),t._subscribeToWindowScrollEvents(n)},_subscribeToWindowScrollEvents:function(t){var i=this,o=i.disposing,e=i.component.element(),r,u,f;if(e&&!i._windowScrollEvents)for(i._windowScrollEvents=!0,u=function(n,r){var u=function(){var f,u=n.scrollTop();!i._hasHeight&&i._rowHeight&&(u-=t.offset().top,u=u>0?u:0,i._scrollTop=u,i._dataController.setViewportItemIndex(u/i._rowHeight))};return r?function(n){u(n),r(n)}:u},f=function(t){var f=t.data("dxScrollable"),r,e;if(f){e=f.option("onScroll"),r=u(t,e),f.option("onScroll",r);i.on("disposing",function(){f.option("onScroll")===r&&f.option("onScroll",e)})}else if(t.is(document)||t.css("overflow-y")==="auto"){t.is(document)&&(t=n(window)),r=u(t);t.on("scroll",r);i.on("disposing",function(){t.off("scroll",r)})}},r=i.component.element().parent();r.length;r=r.parent())f(r)},_needUpdateRowHeight:function(n){var t=this;return t.callBase.apply(t,arguments)||n>0&&t.option("scrolling.mode")===r},_updateRowHeight:function(){var t=this,r=t._rowHeight,i;t.callBase.apply(t,arguments),!r&&t._rowHeight&&(t._updateContentPosition(),i=t._hasHeight?t.element().outerHeight():n(window).outerHeight(),t._dataController.setViewportSize(Math.round(i/t._rowHeight)))},setLoading:function(n,t){var i=this,r=i.callBase,u=!!i._findBottomLoadPanel()&&i._dataController.isLoaded();u&&(n=!1),r.call(i,n,t)}}}(),i.registerModule("virtualScrolling",{defaultOptions:function(){return{scrolling:{mode:"standard",preloadEnabled:!1,useNativeScrolling:"auto"}}},extenders:{controllers:{data:function(){var n={};return i.proxyMethod(n,"virtualItemsCount"),i.proxyMethod(n,"setViewportSize"),i.proxyMethod(n,"setViewportItemIndex"),n}()},views:{rowsView:s}}})}(jQuery,DevExpress),function(n,t){var f=t.ui,o=f.events,i=t.utils,r=f.dxDataGrid,e="dx-datagrid-text-content",s="dx-datagrid-action",h="dx-datagrid-headers",u="dx-header-row",c="dx-datagrid-nowrap",l="dx-datagrid-group-space",a="dx-datagrid-content",v="dx-column-lines",y="context-menu-sort-asc",p="context-menu-sort-desc",w="context-menu-sort-none",b="dx-sort",k="dxDataGridColumnHeadersView",d=1;r.ColumnHeadersView=r.ColumnsView.inherit({_renderHeaderContent:function(t,r,u){var s=this,c=n("<div />"),f=r.headerCellTemplate,o,h;r.command?(t.html("&nbsp;"),r.command==="expand"&&t.addClass(l)):(s._applySorting(t,r,s.option("showColumnLines")),o=n("<div />").addClass(e),s.option("showColumnLines")?o.appendTo(t):o.css("float",r.alignment||"left").prependTo(t),h={column:r,columnIndex:u},n.isFunction(f)?f(o,h):i.isString(f)?(f=s.getTemplate(f),f&&f.render(h,o)):o.text(r.caption))},_renderHeader:function(t,r,u){var e=this,o=e.option("sorting.mode"),f;f=n("<td />").css("text-align",r.alignment||"left").toggleClass(r.cssClass,!i.isDefined(r.groupIndex)),e._renderHeaderContent(f,r,u),(o==="single"||o==="multiple")&&r.allowSorting&&f.addClass(s),f.appendTo(t)},_renderCore:function(){var n=this,t=n.element(),i=n._columnsController.getVisibleColumns(),u=n._scrollLeft;n._tableElement=n._createTable().attr("style","-webkit-user-select: none").append(r.createColGroup(i)),t.addClass(h).addClass(a).toggleClass(c,!!n.option("columnAutoWidth")||!n.option("wordWrapEnabled")).empty(),n._renderContent(n._tableElement),n.wrapTableInScrollContainer(n._tableElement).appendTo(t),n._scrollLeft=0,n.scrollOffset(u)},_renderContent:function(n){var t=this,e=t._columnsController.getVisibleColumns(),f,r;if(t.option("showColumnHeaders")){f=t._createRow().addClass(u).toggleClass(v,t.option("showColumnLines"));f.on(o.addNamespace("dxclick",k),"td",t.createAction(function(n){var u=null,r=n.jQueryEvent;r.stopPropagation(),setTimeout(function(){var n=e[r.currentTarget.cellIndex];r.shiftKey?u="shift":r.ctrlKey&&(u="ctrl"),n&&!i.isDefined(n.groupIndex)&&t._columnsController.changeSortOrder(n.index,u)})}));for(r=0;r<e.length;r++)t._renderHeader(f,e[r],r);n.append(f)}},_afterRender:function(){var t=this;t._updateSortIndicatorPositions(t.element()),t.processSizeChanged()},_updateSortIndicatorPositions:function(n){var t=this,r=t.getColumnElements(),u,i;if(t.callBase(n),!t.option("showColumnLines")&&r)for(i=0;i<r.length;i++)u=r.eq(i),t._setColumnTextWidth(u,u.outerWidth())},_updateSortIndicators:function(){for(var t=this,r=t._columnsController.getVisibleColumns(),f=t.element(),e=f.find("."+u+" > td"),n=0;n<r.length;n++)i.isDefined(r[n].groupIndex)||t._applySorting(e.eq(n),r[n],t.option("showColumnLines"));t._updateSortIndicatorPositions(f)},_columnOptionChanged:function(n){var t=n.changeTypes,i=n.optionNames;if(t.length&&t.length==!!t.sorting){this._updateSortIndicators();return}this.callBase(n),(i.width||i.visibleWidth)&&(this._updateSortIndicatorPositions(this.element()),this.resizeCompleted.fire())},_setColumnTextWidth:function(n,t){var i=n.find("."+b),r=i.outerWidth(),u=n.outerWidth()-n.width(),f=r+u;n.find("."+e).css("max-width",t-f-d)},_isElementVisible:function(n){return n&&n.visible},_resizeCore:function(){this.callBase(),this._updateSortIndicatorPositions(this.element())},getHeadersRowHeight:function(){if(this._tableElement){var n=this._tableElement.find("."+u).first();return n&&n.height()}return 0},setColumnWidths:function(n){var t=this,i=t._scrollLeft;t.callBase(n),t._scrollLeft=0,t.scrollOffset(i)},processSizeChanged:function(){var n=this,t=n.element();i.isDefined(n._headersHeight)&&n._headersHeight===t.height()||(n._headersHeight=t.height(),n.sizeChanged.fire())},getHeaderElement:function(n){var t=this.getColumnElements();return t&&t.eq(n)},getColumnElements:function(){var t=this,n;return t._tableElement&&(n=t._tableElement.find("."+u).find("td"),n.length)?n:null},allowDragging:function(n,t){for(var o=!1,u=this.getColumns(),f=0,r,e=function(n){return n.allowReordering||n.allowGrouping||n.allowHiding},i=0;i<u.length;i++)e(u[i])&&f++;if(f<=1)return!1;if(!t)return(this.option("allowColumnReordering")||this._columnsController.isColumnOptionUsed("allowReordering"))&&n&&n.allowReordering;for(i=0;i<t.length;i++)if(r=t[i],r&&r.allowDragging(n))return!0;return!1},getColumns:function(){return this._columnsController.getVisibleColumns()},getBoundingRect:function(){var n=this,t;return n._tableElement.length>0&&n._tableElement[0].rows.length>0&&n._tableElement[0].rows[0].cells.length>0?(t=n._tableElement.offset(),{top:t.top}):null},getName:function(){return"headers"},getHeadersLength:function(){var n=this;return n._tableElement.length>0&&n._tableElement[0].rows.length>0?n._tableElement[0].rows[0].cells.length:0},init:function(){var t=this;t.callBase(),t._scrollerWidth=0,t.sizeChanged=n.Callbacks()},isVisible:function(){return this.option("showColumnHeaders")},setScrollerSpacing:function(n){var t=this,i=t.element(),r=t.option("rtlEnabled");t._scrollerWidth=n,i&&i.css(r?{paddingLeft:n}:{paddingRight:n})},optionChanged:function(n){var t=this;t.callBase(n);switch(n.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":t.render()}},getHeight:function(){var t=this,n=t.element();return n?n.height():0},getContextMenuItems:function(n){var f=this,e,i,r,t;if(n.closest("."+u).length)return(e=n.closest("td"),i=e.length&&f.getColumns()[e[0].cellIndex],t=f.option("sorting"),t&&t.mode!=="none"&&i&&i.allowSorting)?(r=function(n){setTimeout(function(){f._columnsController.changeSortOrder(i.index,n.itemData.value)})},[{text:t.ascendingText,value:"asc",icon:y,onItemClick:r},{text:t.descendingText,value:"desc",icon:p,onItemClick:r},{text:t.clearText,value:"none",icon:w,onItemClick:r}]):[]}}),r.registerModule("columnHeaders",{defaultOptions:function(){return{showColumnHeaders:!0,cellHintEnabled:!0}},views:{columnHeadersView:r.ColumnHeadersView}})}(jQuery,DevExpress),function(n,t){var u=t.ui,d=u.events,r=t.utils,i=u.dxDataGrid,f={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal","default":"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with"},c=700,e="dx-datagrid-filter-row",l="dx-menu",g="dx-menu-image",nt="dx-datagrid-text-content",a="dx-datagrid-group-space",v="dx-editor-with-menu",y="dx-editor-container",p="dx-column-lines",w="dx-editor-cell",b="dx-apply-button",o="dx-highlight-outline",s={_columnOptionChanged:function(n){var t=this,s=n.optionNames,h,f,c,r,a,o,v;if(i.checkChanges(s,["filterValue","selectedFilterOperation"])&&n.columnIndex!==undefined){h=t.getController("columns").getVisibleIndex(n.columnIndex),f=t.getController("columns").columnOption(n.columnIndex),c=t.element().find("."+e).children().eq(h),r=c.find(".dx-texteditor"),s.filterValue&&r.length&&(a=r.data("dxComponents"),o=a.length&&r.data(a[0]),o instanceof u.Editor&&o&&o.option("value",f.filterValue)),s.selectedFilterOperation&&h>=0&&f&&(v=c.find("."+l),v.length&&t._updateFilterOperationChooser(v,f,r.parent()));return}t.callBase(n)},isFilterRowVisible:function(){return this._isElementVisible(this.option("filterRow"))},isVisible:function(){return this.callBase()||this.isFilterRowVisible()},init:function(){this.callBase(),this._applyFilterViewController=this.getController("applyFilter")},_renderContent:function(n){this.callBase(n);var t=this,u=t._columnsController.getVisibleColumns(),i,r;if(t.isFilterRowVisible())for(r=t._createRow().appendTo(n),r.addClass(e).toggleClass(p,t.option("showColumnLines")),i=0;i<u.length;i++)t._renderFilterRowCell(r,u[i])},_updateFilterOperationChooser:function(n,t,i){var r=this;n.dxMenu({selectionMode:"single",cssClass:"dx-datagrid dx-widget",showFirstSubmenuMode:"onHover",items:[{disabled:t.filterOperations&&t.filterOperations.length?!1:!0,icon:f[t.selectedFilterOperation||"default"],items:r._getFilterOperationMenuItems(t)}],onItemClick:function(n){var u=n.itemData.name;n.itemData.items||(u?r._columnsController.columnOption(t.index,"selectedFilterOperation",u):r._columnsController.columnOption(t.index,{selectedFilterOperation:t.defaultSelectedFilterOperation,filterValue:undefined}),r._applyFilterViewController.setHighLight(i,!0))},rtlEnabled:r.option("rtlEnabled")})},_renderFilterOperationChooser:function(t,i,r){var u=this,f;u.option("filterRow.showOperationChooser")&&(t.addClass(v),f=n("<div />").appendTo(t),u._updateFilterOperationChooser(f,i,r))},_getFilterOperationMenuItems:function(t){var u=this,r=[{}],i=u.option("filterRow"),e=i&&i.operationDescriptions||{};return t.filterOperations&&t.filterOperations.length&&(r=n.map(t.filterOperations,function(n){return{name:n,selectable:!0,selected:(t.selectedFilterOperation||t.defaultFilterOperation)===n,text:e[n],icon:f[n]}}),r.push({name:null,text:i&&i.resetOperationText,icon:f["default"]})),r},_renderFilterRowCell:function(t,i){var u=this,f=n("<td />").toggleClass(i.cssClass,!r.isDefined(i.groupIndex)).appendTo(t),s=u._columnsController,o,e,h,l=function(n,t,i){(i===""&&(i=undefined),r.isDefined(t.filterValue)||r.isDefined(i))&&(n._applyFilterViewController.setHighLight(e,t.filterValue!==i),t.filterValue=i,s.columnOption(t.index,"filterValue",i))};i.command?(f.html("&nbsp;"),i.command==="expand"&&f.addClass(a)):i.allowFiltering&&(f.addClass(w),o=n("<div />").appendTo(f),e=n("<div />").addClass(y).appendTo(o),h=n("<div />").appendTo(e),u.getController("editorFactory").createEditor(h,n.extend({},i,{value:s.isDataSourceApplied()?i.filterValue:undefined,setValue:function(n){l(u,i,n)},parentType:"filterRow",showAllText:u.option("filterRow.showAllText"),updateValueTimeout:u.option("filterRow.applyFilter")==="onClick"?0:c,width:null})),i.alignment&&f.find("input").first().css("text-align",i.alignment),i.filterOperations&&i.filterOperations.length&&u._renderFilterOperationChooser(o,i,e))},optionChanged:function(n){var t=this;switch(n.name){case"filterRow":case"showColumnLines":case"disabled":t.render();break;default:t.callBase(n)}}},h={_calculateAdditionalFilter:function(){var e=this,f=e.callBase(),i,u=[],t=[],o=e._columnsController.getVisibleColumns();if(n.each(o,function(){var t,n;this.allowFiltering&&this.calculateFilterExpression&&r.isDefined(this.filterValue)&&(n=this.calculateFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation),n&&u.push(n))}),u.length)for(f&&f.length&&u.unshift(f),i=0;i<u.length;i++)i>0&&t.push("and"),t.push(u[i]);else t=f;return t&&t.length?t:null}},k={_createCalculatedColumnOptions:function(t){var i=this.callBase(t);return t.dataField?n.extend(i,{calculateFilterExpression:function(n,t){var e=this,i=e.dataField,o=null,u,f;if(r.isDefined(n))if(e.dataType!=="string"||e.lookup)if(e.dataType==="date"){if(r.isDate(n)){u=new Date(n.getFullYear(),n.getMonth(),n.getDate()),f=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1);switch(t){case"<":return[i,"<",u];case"<=":return[i,"<",f];case">":return[i,">=",f];case">=":return[i,">=",u];case"<>":return[[i,"<",u],"or",[i,">=",f]];default:return[[i,">=",u],"and",[i,"<",f]]}}}else o=[i,t||"=",n];else o=[i,t||"contains",n];return o},allowFiltering:!0}):n.extend(i,{allowFiltering:!!t.calculateFilterExpression}),i}};i.ApplyFilterViewController=i.ViewController.inherit({_isOnClick:function(){return this.option("filterRow.applyFilter")==="onClick"},_getHeaderPanel:function(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel},setHighLight:function(n,t){this._isOnClick()&&(n&&n.toggleClass(o,t),this._getHeaderPanel().enableApplyButton(t))},removeHighLights:function(){if(this._isOnClick()){var n=this.getView("columnHeadersView");n.element().find("."+e+" ."+o).removeClass(o),this._getHeaderPanel().enableApplyButton(!1)}}}),i.registerModule("filterRow",{defaultOptions:function(){return{filterRow:{visible:!1,showOperationChooser:!0,showAllText:Globalize.localize("dxDataGrid-filterRowShowAllText"),resetOperationText:Globalize.localize("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:Globalize.localize("dxDataGrid-applyFilterText"),operationDescriptions:{"=":Globalize.localize("dxDataGrid-filterRowOperationEquals"),"<>":Globalize.localize("dxDataGrid-filterRowOperationNotEquals"),"<":Globalize.localize("dxDataGrid-filterRowOperationLess"),"<=":Globalize.localize("dxDataGrid-filterRowOperationLessOrEquals"),">":Globalize.localize("dxDataGrid-filterRowOperationGreater"),">=":Globalize.localize("dxDataGrid-filterRowOperationGreaterOrEquals"),startswith:Globalize.localize("dxDataGrid-filterRowOperationStartsWith"),contains:Globalize.localize("dxDataGrid-filterRowOperationContains"),notcontains:Globalize.localize("dxDataGrid-filterRowOperationNotContains"),endswith:Globalize.localize("dxDataGrid-filterRowOperationEndsWith")}}}},controllers:{applyFilter:i.ApplyFilterViewController},extenders:{controllers:{data:h,columns:k},views:{columnHeadersView:s,headerPanel:{_isShowApplyFilterButton:function(){var n=this.option("filterRow");return n&&n.visible&&n.applyFilter==="onClick"},_renderCore:function(){var t=this,i=t._applyButton?t._applyButton.option("disabled"):!0;t.callBase(),t._$applyButton&&t._$applyButton.remove(),this._isShowApplyFilterButton()&&(t._$applyButton=n("<div>").addClass(b).dxButton({disabled:i,hint:t.option("filterRow.applyFilterText"),icon:"apply-filter",onClick:function(){t._dataController._applyFilter(),t._applyFilterViewController.removeHighLights()}}).appendTo(t.element()),t._applyButton=t._$applyButton.dxButton("instance"))},init:function(){this.callBase(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")},enableApplyButton:function(n){this._applyButton&&this._applyButton.option("disabled",!n)},isVisible:function(){return this.callBase()||this._isShowApplyFilterButton()},optionChanged:function(n){n.name==="filterRow"?this.render():this.callBase(n.name)}}}}}),i.ColumnHeadersViewFilterRowExtender=s,i.DataControllerFilterRowExtender=h}(jQuery,DevExpress),function(n,t){var r=t.ui,f=r.events,i=r.dxDataGrid,u="dx-datagrid-header-panel";i.HeaderPanel=i.ColumnsView.inherit({_renderCore:function(){this.element().addClass(u)},getHeaderPanel:function(){return this.element()},getHeight:function(){var n=this.element();return n?n.outerHeight(!0):0},isVisible:function(){return!1},optionChanged:function(n){var t=this;switch(n.name){case"disabled":t.render()}}}),i.registerModule("headerPanel",{defaultOptions:function(){return{}},views:{headerPanel:i.HeaderPanel}})}(jQuery,DevExpress),function(n,t){var i=t.ui,e=i.events,o=t.utils,r=i.dxDataGrid,u="dx-datagrid-search-panel",f=700,s=10;r.registerModule("search",{defaultOptions:function(){return{searchPanel:{visible:!1,width:160,placeholder:Globalize.localize("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,text:""}}},extenders:{controllers:{data:function(){var n=function(n,i){var o,r,h=n._columnsController.getColumns(),s,e,u,f=[];if(!i)return null;for(o=0;o<h.length;o++)s=null,r=h[o],r.allowFiltering&&r.calculateFilterExpression&&(u=r.lookup,u&&u.items?(e=r.parseValue.call(u,i),t.data.query(u.items).filter(r.calculateFilterExpression.call({dataField:u.displayExpr,dataType:u.dataType},e)).enumerate().done(function(n){for(var o=t.data.utils.compileGetter(u.valueExpr),e,i=0;i<n.length;i++)f.length>0&&f.push("or"),e=o(n[i]),f.push(r.calculateFilterExpression(e))})):(e=r.parseValue?r.parseValue(i):i,e!==undefined&&(s=r.calculateFilterExpression(e),s&&(f.length>0&&f.push("or"),f.push(s)))));return f};return{publicMethods:function(){return this.callBase().concat(["searchByText"])},_calculateAdditionalFilter:function(){var i=this,t=i.callBase(),r=n(i,i.option("searchPanel.text"));return r&&(t=t?[t,"and",r]:r),t},searchByText:function(n){this.option("searchPanel.text",n)},optionChanged:function(n){var t=this;t.callBase(n);switch(n.fullName){case"searchPanel.text":case"searchPanel":t._applyFilter()}}}}()},views:{headerPanel:function(){var t=function(n){return n.option("searchPanel")};return{_renderSearchPanel:function(){var i=this,e=i.element(),o=i.getController("data"),r=t(i);r&&r.visible?(i._$searchPanel?i._$searchPanel.show():i._$searchPanel=n("<div/>").addClass(u).prependTo(e),i.getController("editorFactory").createEditor(i._$searchPanel,{width:r.width,placeholder:r.placeholder,parentType:"searchPanel",value:i.option("searchPanel.text"),updateValueTimeout:f,setValue:function(n){o.searchByText(n)}}),i.resize()):i._$searchPanel&&i._$searchPanel.hide()},_renderCore:function(){this.callBase(),this._renderSearchPanel()},focus:function(){var n=this._$searchPanel.dxTextBox("instance");n&&n.focus()},isVisible:function(){var n=t(this);return this.callBase()||n&&n.visible},optionChanged:function(n){n.name==="searchPanel"?this._renderSearchPanel():this.callBase(n)}}}()}}})}(jQuery,DevExpress),function(n,t){var a=t.ui,i=t.utils,r=a.dxDataGrid,ut="dx-datagrid-text-content",e="dx-group-row",o="dx-datagrid-search-text",v="dx-datagrid-rowsview",y="dx-datagrid-table",p="dx-data-row",u="dx-freespace-row",s="dx-datagrid-nodata",h="dx-datagrid-group-space",w="dx-datagrid-group-opened",b="dx-datagrid-group-closed",f="dx-datagrid-content",k="dx-datagrid-nowrap",d="dx-row-lines",c="dx-column-lines",g="dx-row-alt",nt="dx-scrollable-container",tt="dx-scrollable-content",it=200,rt={render:function(n,t){t.append(n)}},l=function(n){var i=n.option("scrolling.useNativeScrolling"),r={direction:"both",rtlEnabled:n.option("rtlEnabled")||t.rtlEnabled,disabled:n.option("disabled"),bounceEnabled:!1,useKeyboard:!1};return i===undefined&&(i=!0),i!=="auto"&&(r.useNative=!!i,r.useSimulatedScrollbar=!i),r};r.createScrollableOptions=l,r.RowsView=r.ColumnsView.inherit({_getDefaultTemplate:function(n){var t=this;switch(n.command){case"expand":return function(n,r){if(!i.isDefined(r.value)||r.data&&r.data.isContinuation)n.addClass(h);else n.addClass(h).addClass(r.value?w:b).on("dxclick",t.createAction(function(n){t._dataController.changeRowExpand(r.key),n.jQueryEvent.stopPropagation()}))};case"empty":return function(n){n.html("&nbsp;")};default:return function(t,i){var r=!i.text&&i.rowType==="data",u=r?"&nbsp;":i.text;n.encodeHtml&&!r?t.text(u):t.html(u)}}},_getDefaultGroupTemplate:function(){var n=this,t=n.option("summary.texts");return function(i,u){var s=u.data,e,o,f=u.column.caption+": "+u.text;if(u.summaryItems&&u.summaryItems.length){for(f+=" (",e=0;e<u.summaryItems.length;e++)o=u.summaryItems[e],f+=(e>0?", ":"")+r.getSummaryText(o,t);f+=")"}s&&(u.groupContinuedMessage&&u.groupContinuesMessage?f+=" ("+u.groupContinuedMessage+". "+u.groupContinuesMessage+")":u.groupContinuesMessage?f+=" ("+u.groupContinuesMessage+")":u.groupContinuedMessage&&(f+=" ("+u.groupContinuedMessage+")")),i.css("text-align",n.option("rtlEnabled")?"right":"left").text(f)}},_update:function(){},_createRow:function(n){var i=this.callBase(),r,t;return n&&(r=n.rowType==="group",t=n.rowType==="data",i.toggleClass(p,t).toggleClass(g,t&&n.dataIndex%2==1&&this.option("rowAlternationEnabled")).toggleClass(d,t&&this.option("showRowLines")).toggleClass(c,this.option("showColumnLines")).toggleClass(e,r)),i},_highlightSearchText:function(t,i){var f=this,u,e,r=f.option("searchPanel.text");r&&f.option("searchPanel.highlightSearchText")&&(e=n("<div>").text(r).html(),u=t.parent(),u.length||(u=n("<div>").append(t)),n.each(u.find(":dxicontains('"+r+"')"),function(t,u){n.each(n(u).contents(),function(t,u){if(u.nodeType===3){var f=function(t,i){var e=n("<span />").addClass(o),r=t.text(),u=r.toLowerCase().indexOf(i.toLowerCase());if(u>=0)return t[0].textContent?t[0].textContent=r.substr(0,u):t[0].nodeValue=r.substr(0,u),t.after(e.text(r.substr(u,i.length))),t=n(document.createTextNode(r.substr(u+i.length))).insertAfter(e),f(t,i)};i?n(u).text().toLowerCase()===r.toLowerCase()&&n(this).replaceWith(n("<span />").addClass(o).text(n(u).text())):f(n(u),r)}})}))},_renderTemplate:function(t,i,r){var f=this,u;if(n.isFunction(i)?u={render:function(n,t){i(t,n)}}:(f._templatesCache[i]||(f._templatesCache[i]=f.getTemplate(i)),u=f._templatesCache[i]),u)if(r.denyRenderToDetachedContainer||u.denyRenderToDetachedContainer)f._delayedTemplates.push({template:u,container:t,options:r});else return u.render(r,t),!0;return!1},_getColumnTemplate:function(n){var r=this,t=n.column,i;return i=n.rowType==="group"&&t.groupIndex!==undefined?t.groupCellTemplate||r._getDefaultGroupTemplate():t.cellTemplate||r._getDefaultTemplate(t)},_updateCell:function(n,t){var i=this,r=t.column,u=r.dataType!=="string";r.allowFiltering&&i._highlightSearchText(n,u),t.rowType==="data"&&i._cellPrepared(n,t)},_createCell:function(t,u,f,e,o){var s=this,v,l=s.option("grouping"),y=s.option("scrolling.mode"),h=u&&u.data,p=u&&u.summaryCells,w=e.lookup?e.lookup.calculateCellValue(t):t,a=n("<td />").addClass(e.cssClass),c={value:t,displayValue:w,row:u,key:u&&u.key,data:h,rowType:u&&u.rowType,values:u&&u.values,text:r.formatValue(w,e),rowIndex:f,columnIndex:o,column:e,summaryItems:p&&p[o],resized:e.resizedCallbacks};return i.isDefined(e.groupIndex)&&y!=="virtual"&&y!=="infinite"&&(c.groupContinuesMessage=h&&h.isContinuationOnNextPage&&l&&l.groupContinuesMessage,c.groupContinuedMessage=h&&h.isContinuation&&l&&l.groupContinuedMessage),v=s._getColumnTemplate(c),s._renderTemplate(a,v,c)&&s._updateCell(a,c),a},_cellPrepared:function(t,i){var r=this,u,e=i.column.alignment,f=function(t){return{cellElement:n(t.target).closest("td"),jQueryEvent:t,eventType:t.type}};if(e&&(t[0].style.textAlign=e),r.option("onCellClick"))t.on("dxclick",function(t){r.executeAction("onCellClick",n.extend({},i,f(t)))});if(r.option("onCellHoverChanged")){t.on("mouseover",function(t){r.executeAction("onCellHoverChanged",n.extend({},i,f(t)))});t.on("mouseout",function(t){r.executeAction("onCellHoverChanged",n.extend({},i,f(t)))})}this.component._suppressDeprecatedWarnings(),u=r.option("cellPrepared"),this.component._resumeDeprecatedWarnings(),u&&u(t,i),i.cellElement=t,r.executeAction("onCellPrepared",i)},_rowPrepared:function(n,t){var r=this,i;this.component._suppressDeprecatedWarnings(),i=r.option("rowPrepared"),this.component._resumeDeprecatedWarnings(),i&&i(n,t),t.rowElement=n,this.executeAction("onRowPrepared",t)},_renderScrollable:function(n){var t=this,r=t.element();i.isDefined(t._tableElement)||(t._tableElement=n,r.children().length||r.append("<div />"),t._renderLoadPanel(r),t._renderScrollableCore(r))},_handleScroll:function(n){var t=this;t._scrollTop=n.scrollOffset.top,t.scrollOffsetChanged.fire(n.scrollOffset)},_renderScrollableCore:function(t){var i=this,r=l(i),u=n.proxy(i._handleScroll,i);r.onScroll=u,r.onStop=u,t.dxScrollable(r),i._scrollable=t.data("dxScrollable"),i._scrollableContainer=i._scrollable._$container},_renderLoadPanel:function(t){var r=this,i;t.dxLoadPanel&&(i=r.option("loadPanel"),i&&i.enabled?(i=n.extend({shading:!1,message:i.text,position:{of:t},container:t},i),r._loadPanel?r._loadPanel.option(i):r._loadPanel=n("<div />").appendTo(t.parent()).dxLoadPanel(i).dxLoadPanel("instance")):(r._loadPanel&&r._loadPanel.element().remove(),r._loadPanel=null))},_renderContent:function(t,i){return t.replaceWith(n("<div>").addClass(f).append(i))},_updateContent:function(t,i,r){var u=this,o=i&&i.changeType,e=[];switch(o){case"update":n.each(i.rowIndices,function(n,t){var f=u._getRowElements(r).eq(n),o=i.changeTypes[n];e.push(function(){var i=u._getRowElements(),n=i.eq(t);switch(o){case"update":n.replaceWith(f);break;case"insert":i.length?n.length?f.insertBefore(n):f.insertAfter(i.last()):f.prependTo(u._tableElement);break;case"remove":n.remove()}})}),n.each(e,function(){this()});break;default:u._tableElement=r,t.addClass(f),u._renderContent(t,r)}},_renderFreeSpaceRow:function(n,t){var f=this,r,e=f._createRow().hide(),o;for(e.addClass(u).toggleClass(c,f.option("showColumnLines")),r=0;r<t.length;r++)o={command:t[r].command==="expand"?t[r].command:"",cssClass:i.isDefined(t[r].cssClass)?t[r].cssClass:""},e.append(f._createCell(null,null,null,o));f._appendRow(n,e)},_needUpdateRowHeight:function(n){return n>0&&!this._rowHeight},_updateRowHeight:function(){var n=this,r=n._tableElement,i,u=n._dataController.items().length,t;r&&n._needUpdateRowHeight(u)&&(i=r.outerHeight(),t=n._getFreeSpaceRowElement(),t&&t.is(":visible")&&(i-=t.outerHeight()),n._rowHeight=i/u)},_findContentElement:function(){var t=this.element(),n;if(t)return n=t.find(".dx-scrollable-content"),n||(n=t),n.children().first()},_getRowElements:function(n){return n=n||this._tableElement,n.children("tbody").children(".dx-row").not("."+u)},_getFreeSpaceRowElement:function(){var n=this._tableElement;return n&&n.children("tbody").children("."+u)},_appendRow:function(n,t){var i=this;i.option("rowTemplate")&&i._delayedTemplates.length&&t?i._delayedTemplates.push({container:n,template:rt,options:t}):n.append(t)},_updateNoDataText:function(){var t=this.element().find("."+s),u=!this._dataController.items().length,f=this._dataController.isLoading(),i=this.option("rtlEnabled"),r={};t.length||(t=n("<span>").addClass(s).hide().appendTo(this.element())),t.text(this.option("noDataText")),r={marginTop:-Math.floor(t.height()/2),marginRight:i?-Math.floor(t.width()/2):0,marginLeft:i?0:-Math.floor(t.width()/2)},t.css(r),u&&!f?t.show():t.hide()},_createTable:function(){var t=this;return t.callBase().on("dxclick",".dx-row",t.createAction(function(i){var r=i.jQueryEvent;n(r.target).closest("a").length||(t._rowClick(t.getRowIndex(r.currentTarget),r),r.preventDefault())}))},_rowClick:function(i,r){var u=this._dataController.items()[i]||{};this.executeAction("onRowClick",n.extend({rowIndex:i,columns:this._columnsController.getVisibleColumns(),jQueryEvent:r,rowElement:n(r.target).closest(".dx-row"),evaluate:function(n){var i=t.data.utils.compileGetter(n);return i(u.data)}},u))},_renderCells:function(t,i){var o,e=[],r,u=i.columns,s=t.rowIndex,h,f,c;if(t.rowType==="group"){for(f=(t.groupIndex||0)+i.columnsCountBeforeGroups,r=0;r<=f;r++)h=r===f&&u[r].allowCollapsing&&i.scrollingMode!=="infinite"?!!t.isExpanded:null,e.push(this._createCell(h,t,s,{command:"expand",cssClass:u[r].cssClass}));c=n.extend({},u[f],{command:null,cssClass:null}),o=this._createCell(t.values[t.groupIndex],t,s,c,f),o.attr("colspan",u.length-f-1),e.push(o)}else for(r=0;r<u.length;r++)e.push(this._createCell(t.values[r],t,s,u[r],r));return e},_renderTable:function(t){var a=t.length,e,s,u,h,l=0,f=this._columnsController.getVisibleColumns(),v=this._columnsController.getGroupColumns(),c=this.option("rowTemplate"),y=this.option("scrolling.mode"),o=this._createTable();for(o.append(r.createColGroup(f)),u=0;u<f.length;u++)if(f[u].command==="expand"){l=u;break}for(u=0;u<a;u++)e=t[u],!i.isDefined(e.groupIndex)&&c?this._renderTemplate(o,c,n.extend({columns:f},e)):(h=this._renderCells(e,{columns:f,scrollingMode:y,columnsCountBeforeGroups:l,groupColumns:v}),h.length&&(s=this._createRow(e),s.append(h),this._rowPrepared(s,n.extend({columns:f},e)),this._appendRow(o,s)));return c&&this._highlightSearchText(o),this._renderFreeSpaceRow(o,f),o},_renderCore:function(n){var t=this,e=n&&n.items||t._dataController.items(),i,r,u=t.element(),f=u.parent();n=n||{},u.addClass(v).toggleClass(k,!t.option("wordWrapEnabled")),i=t._renderTable(e),t._renderScrollable(i),r=t._findContentElement(),t._updateContent(r,n,i),(!f||f.parent().length)&&t.renderDelayedTemplates(),t._lastColumnWidths=null},_getTableElements:function(){return this.element().find("> ."+nt+" > ."+tt+"> ."+f+"> ."+y)},getRowIndex:function(n){return this._getRowElements().index(n)},getRow:function(t){var i=this._getRowElements();if(i.length>t)return n(i[t])},getCell:function(t,i){var u=this._getRowElements(),r;if(u.length>0&&i>=0&&(i=i<u.length?i:u.length-1,r=u[i].cells,r&&r.length>0))return n(r[r.length>t?t:r.length-1])},updateFreeSpaceRowHeight:function(){var n=this,f,e=n._findContentElement(),t=n._getFreeSpaceRowElement(),o=0,i,r,u;t&&e&&(t.hide(),f=n.element().height(),o=e.outerHeight(),u=f-o-n.getScrollbarWidth(!0),n._dataController.items().length>0&&(u>0?(t.height(u),t.show()):n._hasHeight||(i=n._dataController.pageSize()-n._dataController.items().length,r=n.option("scrolling.mode"),i>0&&n._dataController.pageCount()>1&&r!=="virtual"&&r!=="infinite"&&(t.height(i*n._rowHeight),t.show()))))},_columnOptionChanged:function(n){var t=n.optionNames;(t.width||t.visibleWidth)&&(this.callBase(n),this._fireColumnResizedCallbacks())},callbackNames:function(){return["scrollOffsetChanged"]},init:function(){var n=this,r,t=n.getController("data"),i;n.callBase(),n._editorFactoryController=n.getController("editorFactory"),n._editorFactoryController&&n._editorFactoryController.focused.add(function(t){n._scrollable&&n._scrollable.scrollToElement(t)}),n._rowHeight=0,n._scrollTop=0,n._hasHeight=!1,t.changed.add(function(t){switch(t.changeType){case"refresh":case"prepend":case"append":case"update":n.render(null,t);break;default:n._update(t)}}),t.loadingChanged.add(function(t,i){n.setLoading(t,i)}),n._delayedTemplates=[],n._templatesCache={},n.createAction("onRowClick"),n.createAction("onCellClick"),n.createAction("onCellHoverChanged",{excludeValidators:["disabled"]}),n.createAction("onCellPrepared",{excludeValidators:["designMode","disabled"]}),n.createAction("onRowPrepared",{excludeValidators:["designMode","disabled"]}),i=function(){n.scrollToPage(t.pageIndex())},t.pageIndexChanged.add(i),t.pageSizeChanged.add(i),t.filterChanged.add(i),t.dataSourceChanged.add(i)},publicMethods:function(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement"]},renderDelayedTemplates:function(){for(var n,t=this._delayedTemplates;t.length;)n=t.shift(),n.template.render(n.options,n.container),n.options.column&&this._updateCell(n.container,n.options)},getScrollbarWidth:function(n){var t=this._scrollableContainer&&this._scrollableContainer.get(0),i=0;return t&&(i=n?t.offsetHeight-t.clientHeight:t.offsetWidth-t.clientWidth),i},_fireColumnResizedCallbacks:function(){for(var t=this,f=t._lastColumnWidths||[],u=t.getColumnWidths(),r=t._columnsController.getVisibleColumns(),n=0;n<r.length;n++)r[n].resizedCallbacks&&!i.isDefined(r[n].groupIndex)&&f[n]!==u[n]&&r[n].resizedCallbacks.fire(u[n]);t._lastColumnWidths=u},_resizeCore:function(){var n=this,t;n.callBase(),n._fireColumnResizedCallbacks(),n._updateRowHeight(),n._updateNoDataText(),n.updateFreeSpaceRowHeight(),t=n.element().data("dxScrollable"),t&&t.update(),n.setLoading(n._dataController.isLoading())},scrollToPage:function(n){var t=this,r=t.option("scrolling.mode"),u=t._dataController,f=u?u.pageSize():0,i;i=r==="virtual"||r==="infinite"?n*t._rowHeight*f:0,t.scrollTo({y:i,x:0})},scrollTo:function(n){var t=this.element(),i=t&&t.data("dxScrollable");i&&i.scrollTo(n)},height:function(n){var u=this,t=this.element(),r;if(i.isDefined(n))u._hasHeight=n!=="auto",t&&t.height(n),r=this._getFreeSpaceRowElement(),r&&r.hide();else return t?t.height():0},setLoading:function(n,t){var i=this,r=i._loadPanel,e=i._dataController,f=i.option("loadPanel")||{},o=e.isLoaded()?f.animation:null,u;r&&(u={message:t||f.text,animation:o,visible:n},clearTimeout(i._hideLoadingTimeoutID),r.option("visible")&&!n?i._hideLoadingTimeoutID=setTimeout(function(){r.option(u)},it):r.option(u),i._updateNoDataText())},isScrollbarVisible:function(){var n=this.element();return n?this._findContentElement().outerHeight()-n.height()>0:!1},setRowsOpacity:function(t,i){var r=this,u=r._getRowElements().not("."+e)||[];n.each(u,function(r,u){n(u).children().eq(t).css({opacity:i})})},getTopVisibleItemIndex:function(){var t=this,n=0,f=0,i=0,e,o=t._scrollTop,s=t._findContentElement().offset().top,r=t._dataController.items();if(r.length&&t._tableElement){for(e=t._tableElement.children("tbody").children(".dx-row, .dx-error-row").not("."+u),n=0;n<r.length;n++)if(f=i,i=e.eq(n).offset().top-s,i>o){o*2<i+f&&n&&n--;break}n&&n===r.length&&n--}return n},getTopVisibleRowData:function(){var n=this.getTopVisibleItemIndex(),t=this._dataController.items();if(t[n])return t[n].data},getCellElement:function(n,t){var f=this,e=f._getRowElements().eq(n),r,o=f._columnsController,s,u=t;return i.isString(t)&&(s=o.columnOption(t,"index"),u=o.getVisibleIndex(s)),e.length&&u>=0&&(r=e.children().eq(u)),r&&r.length?r:void 0},optionChanged:function(n){var t=this;t.callBase(n);switch(n.name){case"wordWrapEnabled":case"hoverStateEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"onCellPrepared":case"onRowPrepared":t.render(),t.component.resize();break;case"scrolling":case"rtlEnabled":t._rowHeight=null,t._tableElement=null;break;case"disabled":case"loadPanel":t._tableElement=null,t.render(),t.component.resize();break;case"noDataText":t._updateNoDataText();break;case"onCellHoverChanged":t.render(),t.component.resize()}},dispose:function(){clearTimeout(this._hideLoadingTimeoutID)}}),r.registerModule("rows",{defaultOptions:function(){return{hoverStateEnabled:!1,loadPanel:{enabled:!0,text:Globalize.localize("Loading"),width:200,height:70,showIndicator:!0,indicatorSrc:"",showPane:!0},rowTemplate:null,columnAutoWidth:!1,noDataText:Globalize.localize("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1}},views:{rowsView:r.RowsView}})}(jQuery,DevExpress),function(n,t){var r=t.ui,o=r.events,u=t.utils,i=r.dxDataGrid,f="dx-datagrid-pager",e=10;i.PagerView=i.View.inherit({init:function(){var n=this,t=n.getController("data");n._isVisible=!1,t.changed.add(function(){n.render()})},_getPager:function(){var n=this.element();return n&&n.data("dxPager")},_renderCore:function(){var t=this,o=t.element().addClass(f),i=t.option("pager")||{},n=t.getController("data"),s=t.option("rtlEnabled"),r={maxPagesCount:e,pageIndex:n.pageIndex()+1,pageCount:n.pageCount(),pageSize:n.pageSize(),showPageSizes:i.showPageSizeSelector,showInfo:i.showInfo,showNavigationButtons:i.showNavigationButtons,pageSizes:t.getPageSizes(),rtlEnabled:s,hasKnownLastPage:n.hasKnownLastPage(),pageIndexChanged:function(t){setTimeout(function(){n.pageIndex(t-1)})},pageSizeChanged:function(t){setTimeout(function(){n.pageSize(t)})}};u.isDefined(i.infoText)&&(r.infoText=i.infoText),o.dxPager(r)},getPageSizes:function(){var t=this,e=t.getController("data"),r=t.option("pager"),f=r&&r.allowedPageSizes,i=e.pageSize();return u.isDefined(t._pageSizes)&&n.inArray(i,t._pageSizes)!==-1||(t._pageSizes=[],r&&(n.isArray(f)?t._pageSizes=f:f&&i>1&&(t._pageSizes=[Math.floor(i/2),i,i*2]))),t._pageSizes},isVisible:function(){var n=this,i=n.getController("data"),u=n.option("pager"),t=u&&u.visible,r=n.option("scrolling");return n._isVisible?!0:(t==="auto"&&(t=r&&(r.mode==="virtual"||r.mode==="infinite")?!1:i.pageCount()>1||i.isLoaded()&&!i.hasKnownLastPage()),n._isVisible=t,t)},getHeight:function(){var n=this._getPager();return n&&this.isVisible()?n.getHeight():0},optionChanged:function(n){var t=this;switch(n.name){case"paging":case"pager":t._pageSizes=null;case"scrolling":t._isVisible=!1,t.render(),n.name==="pager"&&t.component&&t.component.resize()}}}),i.registerModule("pager",{defaultOptions:function(){return{paging:{enabled:!0,pageSize:undefined,pageIndex:undefined},pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto"}}},views:{pagerView:i.PagerView}})}(jQuery,DevExpress),function(n,t){var i=t.ui.dxDataGrid,r=t.utils,s="dx-datagrid",h="dx-hidden",c="dx-datagrid-table",l="dx-datagrid-table-fixed",u="dx-datagrid-borders",y="dx-datagrid-headers-hidden",a=100,v=50,f=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","pagerView","draggingHeaderView","contextMenuView","errorView"],e=function(n,t){var r=[],i;if(n&&t&&n.length&&n.length===t.length)for(i=0;i<n.length;i++)r.push(n[i]>t[i]?n[i]:t[i]);else n&&(r=n);return r},o=function(n){return r.isString(n)&&n.slice(-1)==="%"};i.ResizingController=i.ViewController.inherit({_initPostRenderHandlers:function(){var n=this;n._refreshSizesHandler||(n._refreshSizesHandler=function(t){n._dataController.changed.remove(n._refreshSizesHandler),t&&t.changeType!=="refresh"&&t.changeType!=="append"&&t.changeType!=="update"||n.resize()},n._dataController.changed.add(function(){n._dataController.changed.add(n._refreshSizesHandler)}),n._dataController.changed.add(function(){n.component._fireContentReadyAction()}),n._columnHeadersView.sizeChanged.add(n._refreshSizesHandler))},_getBestFitWidths:function(){var n=this,i=n._rowsView.getColumnWidths(),r=n._columnHeadersView&&n._columnHeadersView.getColumnWidths(),u=n._footerView&&n._footerView.getColumnWidths(),t;return t=e(i,r),t=e(t,u)},_setVisibleWidths:function(t,i){var r=this._columnsController;r.beginUpdate(),n.each(t,function(n,t){r.columnOption(t.index,"visibleWidth",i[n])}),r.endUpdate()},_toggleBestFitMode:function(n){var t=this.component.element();t.find("."+c).toggleClass(l,!n),t.find("input").toggleClass(h,n)},_synchronizeColumns:function(){var t=this,h=t.getView("gridView").element(),e=t._columnsController,i=e.getVisibleColumns(),o=h.width()-t._rowsView.getScrollbarWidth(),f=t.option("columnAutoWidth"),u=f,s=!1,r=[];t._setVisibleWidths(i,[]),n.each(i,function(n,t){if(t.width==="auto")return u=!0,!1}),u&&(t._toggleBestFitMode(!0),r=t._getBestFitWidths(),n.each(i,function(n,t){e.columnOption(t.index,"bestFitWidth",r[n],!0)})),n.each(i,function(n){this.width!=="auto"&&(this.width?r[n]=this.width:f||(r[n]=undefined))}),s=t._correctColumnWidths(r,i,o),f&&t._processStretch(r,i,o),u&&t._toggleBestFitMode(!1),(u||s)&&t._setVisibleWidths(i,r)},_correctColumnWidths:function(t,i,r){var u=this,s=!1,h=!1,c=!1,f=u.component.element(),l=u.option("width"),e;return n.each(i,function(n){this.width!=="auto"&&(this.width?t[n]=this.width:h=!0),o(this.width)&&(s=!0)}),f&&u._maxWidth&&(delete u._maxWidth,f.css("max-width","")),!h&&t.length&&(e=u._getTotalWidth(t,r),e<=r&&(t[t.length-1]="auto",c=!0,l&&l!=="auto"||s||(u._maxWidth=e,f.css("max-width",u._maxWidth)))),c},_processStretch:function(t,i,r){var h=this._getTotalWidth(t,r),f={length:0},e,o,s,u;if(t.length&&(n.each(i,function(n){this.width&&(f[n]=!0,f.length++)}),e=r-h,o=Math.floor(e/(t.length-f.length)),s=e-o*(t.length-f.length),e>=0))for(u=0;u<t.length;u++)f[u]||(t[u]+=o,u<s&&t[u]++)},_getTotalWidth:function(n,t){for(var u=0,i,r=0;r<n.length;r++)i=n[r],i&&(u+=o(i)?parseInt(i)*t/100:parseInt(i));return Math.round(u)},updateHeight:function(n){var t=this;t._hasHeight===undefined&&n&&(t._hasHeight=!!n.height())},publicMethods:function(){return["resize"]},resize:function(){var t=this,h=t._dataController,r=t.component.element(),s=r&&r.height(),u=t.option("loadPanel"),e=t.option("height"),i,o;t._initPostRenderHandlers(),e&&t._hasHeight^e!=="auto"&&(o=n("<div>").height(e).appendTo(r),t._hasHeight=!!o.height(),o.remove()),t._hasHeight&&s>0&&t.option("scrolling")?(i=s,n.each(t.getViews(),function(){this.isVisible()&&this.getHeight&&(i-=this.getHeight())})):i=t._hasHeight||h.items().length!==0?"auto":u&&u.visible?u.height+v:a,t._rowsView.height(i),t._columnHeadersView.setScrollerSpacing(t._rowsView.getScrollbarWidth()),t._synchronizeColumns(),n.each(f,function(n,i){var r=t.getView(i);r&&r.resize()})},optionChanged:function(n){switch(n.name){case"width":case"height":this.resize()}},init:function(){var n=this;n._dataController=n.getController("data"),n._columnsController=n.getController("columns"),n._columnHeadersView=n.getView("columnHeadersView"),n._footerView=n.getView("footerView"),n._rowsView=n.getView("rowsView"),n._footerView=n.getView("footerView"),n._rowsView.scrollOffsetChanged.add(function(t){n._columnHeadersView.scrollOffset(t.left),n._footerView.scrollOffset(t.left)})}}),i.GridView=i.View.inherit({init:function(){var n=this;n._dataController=n.getController("data"),n._rowsView=n.getView("rowsView")},getView:function(n){return this.component._views[n]},element:function(){return this._groupElement},optionChanged:function(n){var t=this;t.callBase(n),r.isDefined(t._groupElement)&&n.name==="showBorders"&&t._groupElement.toggleClass(u,!!n.value)},render:function(t){var i=this,e,o=i.getController("resizing"),r=i._groupElement||n("<div />").addClass(s).toggleClass(u,!!i.option("showBorders"));e=!i._groupElement,i._groupElement=r,n.each(f,function(n,t){var u=i.getView(t);u&&u.render(r)}),e&&(o.updateHeight(t),r.appendTo(t),i._rowsView.renderDelayedTemplates()),o.resize(),i._dataController.isLoaded()&&i.component._fireContentReadyAction()}}),i.registerModule("gridView",{defaultOptions:function(){n:!1},controllers:{resizing:i.ResizingController},views:{gridView:i.GridView}})}(jQuery,DevExpress),function(n,t){var h=t.ui,f=h.events,r=f.addNamespace,e=t.utils,i=h.dxDataGrid,c=t.fx,d="dx-datagrid-columns-separator",l="dx-datagrid-columns-separator-transparent",a="dx-datagrid-drag-header",g="dx-datagrid-text-content",s="dx-datagrid-drag-action",v="dx-datagrid-tracker",y="dx-block-separator",p="dx-datagrid-drop-highlight",w="dx-header-row",nt="dx-separator-tracker",tt="dx-widget",u="dxDataGridResizingReordering",it=10,b=5,o=function(n){return n.option("allowColumnResizing")||n.getController("columns").isColumnOptionUsed("allowResizing")},k=function(n){return n.option("allowColumnReordering")||n.getController("columns").isColumnOptionUsed("allowReordering")};i.getPointsByColumns=function(n,t,i){for(var e=n.length,h=!1,o,u,f,c=[],l,s=0,r=0;r<=e;r++)r<e&&(u=n.eq(s),f=u.offset(),l=u.css("direction")==="rtl"),o={index:r,x:f?f.left+(!i&&l^r===e?u.outerWidth():0):0,y:f?f.top+(i&&r===e?u.outerHeight():0):0,columnIndex:s},t&&(h=t(o)),h||c.push(o),s++;return c},i.TrackerView=i.View.inherit({_renderCore:function(){this.callBase(),this.element().addClass(v),this.hide()},init:function(){var t=this,n;t.callBase(),t.getController("tablePosition").positionChanged.add(function(i){n=t.element(),n&&n.hasClass(v)&&(n.css({top:i.top}),n.height(i.height))})},isVisible:function(){return o(this)},show:function(){this.element().show()},hide:function(){this.element().hide()},setHeight:function(n){this.element().height(n)}}),i.SeparatorView=i.View.inherit({_renderSeparator:function(){},_renderCore:function(n){this.callBase(n),this._isShown=!0,this._renderSeparator(),this.hide()},show:function(){this._isShown=!0},hide:function(){this._isShown=!1},height:function(n){var t=this.element();if(t)if(e.isDefined(n))t.height(n);else return t.height()},width:function(n){var t=this.element();if(t)if(e.isDefined(n))t.width(n);else return t.width()}}),i.ColumnsSeparatorView=i.SeparatorView.inherit({_renderSeparator:function(){this.callBase();var t=this.element();t.addClass(d),e.isDefined(this._tracker)||(this._tracker=n("<div>").addClass(nt).appendTo(t))},_subscribeToEvent:function(){var n=this,t;n.getController("tablePosition").positionChanged.add(function(i){t=n.element(),t&&(t.css({top:i.top}),t.height(i.height)),n._tracker&&n._tracker.height(i.headersRowHeight)})},isVisible:function(){return this.option("showColumnHeaders")&&(k(this)||o(this))},init:function(){this.callBase(),this._isTransparent=o(this),this.isVisible()&&this._subscribeToEvent()},show:function(){var t=this,n=this.element();n&&!t._isShown&&(t._isTransparent?n.removeClass(l):n.show()),this.callBase()},hide:function(){var n=this.element();n&&this._isShown&&(this._isTransparent?n.addClass(l):n.hide()),this.callBase()},tracker:function(){return this._tracker},moveByX:function(n){var t=this.element();t&&t.css("left",n-this._parentElement().offset().left)},changeCursor:function(n){n=e.isDefined(n)?n:"",this._tracker&&this._tracker.css("cursor",n)}}),i.BlockSeparatorView=i.SeparatorView.inherit({_renderSeparator:function(){this.callBase(),this.element().addClass(y).html("&nbsp;")},hide:function(){var t=this,n=this._parentElement(),i=this.element();i&&this._isShown&&i.hide(),n&&!n.children("."+y).length&&n.prepend(t.element()),t.callBase()},isVisible:function(){var n=this.option("groupPanel"),t=this.option("columnChooser");return n&&n.visible||t&&t.enabled},show:function(n){var i=this,t=this.element(),r=function(n){c.stop(t,!0),c.animate(t,{type:"slide",from:{width:0,display:n.display},to:n,duration:300,easing:"swing"})};if(t&&!i._isShown)switch(n){case"group":r({width:"50px",display:"inline-block"});break;case"columnChooser":r({width:"100%",display:"block"});break;default:t.show()}i.callBase()}}),i.DraggingHeaderView=i.View.inherit({_isDragging:!1,_getDropOptions:function(){var n=this;if(n._dragOptions)return{sourceColumnIndex:n._dragOptions.columnIndex,sourceColumnElement:n._dragOptions.columnElement,sourceLocation:n._dragOptions.sourceLocation,targetColumnIndex:n._dropColumnIndex,targetLocation:n._dropLocation}},_dropHeader:function(n){var r=n.jQueryEvent,t=r.data.that,i=t._controller;t.element().hide(),i&&t._isDragging&&i.drop(t._getDropOptions()),t.element().appendTo(t._parentElement()),t._dragOptions=null,t._isDragging=!1,document.onselectstart=t._onSelectStart||null},_getDraggingPanelByPos:function(t){var r=this,i;return n.each(r._dragOptions.draggingPanels,function(n,r){if(r){var u=r.getBoundingRect();if(u&&(u.bottom===undefined||t.y<u.bottom)&&(u.top===undefined||t.y>u.top)&&(u.left===undefined||t.x>u.left)&&(u.right===undefined||t.x<u.right))return i=r,!1}}),i},_pointCreated:function(n,t,i,r){var u=t[n.columnIndex],f=t[n.columnIndex-1];switch(i){case"columnChooser":return!0;case"headers":return r&&!r.allowReordering||(!u||!u.allowReordering)&&(!f||!f.allowReordering);default:return t.length===0}},_moveHeader:function(n){var v=n.jQueryEvent,t=v.data.that,l,u,y,p,w,k,o=f.eventData(v),s,d=t._controller,r,e,h=t._dragOptions,g,a,c,nt;if(t._isDragging){if(w=Math.abs(o.x-h.columnElement.offset().left-h.deltaX),k=Math.abs(o.y-h.columnElement.offset().top-h.deltaY),(t.element().is(":visible")||w>b||k>b)&&(t.element().show(),y=o.x-h.deltaX,p=o.y-h.deltaY,t.element().offset({left:y,top:p}),s=t._getDraggingPanelByPos(o),s))if(nt=t.option("rtlEnabled"),g=s.getName()==="columnChooser",c=g?"y":"x",l=s.getColumnElements()||[],u=i.getPointsByColumns(l,function(n){return t._pointCreated(n,s.getColumns(),s.getName(),h.sourceColumn)},c==="y"),t._dropLocation=s.getName(),u.length>0){for(r=0;r<u.length;r++)if(a=u[r+1]&&(u[r][c]+u[r+1][c])/2,a===undefined||(nt&&c==="x"?o[c]>a:o[c]<a)){t._dropColumnIndex=u[r].columnIndex,e=t._getDropOptions(),l[r]?e.targetColumnElement=l.eq(r):(e.targetColumnElement=l.last(),e.isLast=!0),e.posX=u[r].x,d.dock(e);break}}else t._dropColumnIndex=-1,e=t._getDropOptions(),d.dock(e);v.preventDefault()}},_subscribeToEvents:function(t){var i=this;i._moveHeaderAction=this.createAction(this._moveHeader),i._dropHeaderAction=this.createAction(this._dropHeader);n(document).on(r("dxpointermove",u),{that:i,rootElement:t},i._moveHeaderAction);i.element().on(r("dxpointerup",u),{that:i},i._dropHeaderAction);n(document).on(r("dxpointerup",u),{that:i},i._dropHeaderAction)},_renderCore:function(){this.element().addClass(a+" "+g+" "+tt).css("display","none")},_afterRender:function(n){this._unsubscribeFromEvents(),this._subscribeToEvents(n)},_unsubscribeFromEvents:function(){this._dropHeaderAction&&(this.element().off(r("dxpointerup",u),this._dropHeaderAction),n(document).off(r("dxpointerup",u),this._dropHeaderAction)),this._moveHeaderAction&&n(document).off(r("dxpointermove",u),this._moveHeaderAction)},dispose:function(){this._dragOptions=null,this._unsubscribeFromEvents(),this.element().parent().find("."+a).remove()},isVisible:function(){var t=this.getController("columns"),n=t.getCommonSettings();return this.option("showColumnHeaders")&&(k(this)||n.allowGrouping||n.allowHiding)},init:function(){this.callBase(),this._controller=this.getController("draggingHeader")},drag:function(t){var r=this,i=t.columnElement;r._dragOptions=t,r._isDragging=!0,r._dropColumnIndex=t.columnIndex,r._dropLocation=t.sourceLocation,r._onSelectStart=document.onselectstart,document.onselectstart=function(){return!1},r.element().css({textAlign:i&&i.css("text-align"),height:i&&i.height(),width:i&&i.width(),whiteSpace:i&&i.css("white-space")}).addClass(s).text(t.sourceColumn.caption),r.element().appendTo(n(document.body))}}),i.ColumnsResizerViewController=i.ViewController.inherit({_pointCreated:function(n,t,i){var r,u;return n.index>0&&n.index<t?(n.columnIndex-=1,r=i[n.columnIndex]||{},u=i[n.columnIndex+1]||{},!(r.allowResizing&&u.allowResizing)):!0},_getTargetPoint:function(n,t,i){if(n)for(var r=0;r<n.length;r++)if(n[r].x-i<=t&&t<=n[r].x+i)return n[r];return null},_moveSeparator:function(n){var r=n.jQueryEvent,t=r.data,s=t._pointsByColumns,u=t._columnsSeparatorView.width(),e=t._columnsSeparatorView.element().offset(),h=u/2,o=t._$parentContainer.offset().left,i=f.eventData(r);t._isResizing?o<=i.x&&i.x<=o+t._$parentContainer.width()&&t._updateColumnsWidthIfNeeded(t._targetPoint.columnIndex,i.x)&&(t._columnsSeparatorView.moveByX(t._targetPoint.x+(i.x-t._resizingInfo.startPosX)),t._tablePositionController.update(),r.preventDefault()):(t._targetPoint=t._getTargetPoint(s,i.x,u),t._isReadyResizing=!1,t._columnsSeparatorView.changeCursor(),t._targetPoint&&e.top<=i.y&&e.top+t._columnsSeparatorView.height()>=i.y&&(t._columnsSeparatorView.changeCursor("col-resize"),t._columnsSeparatorView.moveByX(t._targetPoint.x-h),t._isReadyResizing=!0,r.preventDefault()))},_endResizing:function(n){var i=n.jQueryEvent,t=i.data;t._isResizing&&(t._updatePointsByColumns(),t._resizingInfo=null,t._columnsSeparatorView.hide(),t._columnsSeparatorView.changeCursor(),t._trackerView.hide(),t._isReadyResizing=!1,t._isResizing=!1)},_setupResizingInfo:function(n){var t=this,i=t._columnHeadersView.getHeaderElement(t._targetPoint.columnIndex),r=t._columnHeadersView.getHeaderElement(t._targetPoint.columnIndex+1);t._resizingInfo={startPosX:n,currentColumnWidth:i&&i.length>0?i.outerWidth():0,nextColumnWidth:r&&r.length>0?r.outerWidth():0}},_startResizing:function(n){var i=n.jQueryEvent,t=i.data,r=f.eventData(i);f.isTouchEvent(i)&&(t._targetPoint=t._getTargetPoint(t._pointsByColumns,r.x,it),t._targetPoint&&(t._columnsSeparatorView.moveByX(t._targetPoint.x-t._columnsSeparatorView.width()/2),t._isReadyResizing=!0)),t._isReadyResizing&&(t._targetPoint,t._setupResizingInfo(r.x),t._columnsSeparatorView.show(),t._trackerView.show(),t._isResizing=!0,i.preventDefault())},_generatePointsByColumns:function(){var n=this,u=n._columnsController?n._columnsController.getVisibleColumns():[],t=n._columnHeadersView.getColumnElements(),r=[];t&&t.length>0&&(r=i.getPointsByColumns(t,function(i){return n._pointCreated(i,t.length,u)})),n._pointsByColumns=r},_unsubscribeFromEvents:function(){this._moveSeparatorHandler&&this._$parentContainer.off(r("dxpointermove",u),this._moveSeparatorHandler),this._startResizingHandler&&this._columnsSeparatorView.tracker().off(r("dxpointerdown",u),this._startResizingHandler),this._endResizingHandler&&(this._columnsSeparatorView.element().off(r("dxpointerup",u),this._endResizingHandler),n(document).off(r("dxpointerup",u),this._endResizingHandler))},_subscribeToEvents:function(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing);this._$parentContainer.on(r("dxpointermove",u),this,this._moveSeparatorHandler);this._columnsSeparatorView.tracker().on(r("dxpointerdown",u),this,this._startResizingHandler);this._columnsSeparatorView.element().on(r("dxpointerup",u),this,this._endResizingHandler);n(document).on(r("dxpointerup",u),this,this._endResizingHandler)},_updateColumnsWidthIfNeeded:function(n,t){var r,e=!1,o,i=this._columnsController,h=i.getVisibleColumns(),c=this._columnsSeparatorView.width(),u,f,s;return r=t-this._resizingInfo.startPosX,this.option("rtlEnabled")&&(r=-r),s=this._resizingInfo.currentColumnWidth+r,o=this._resizingInfo.nextColumnWidth-r,e=!(s<=c||o<=c),e&&(u=h[n],f=h[n+1],i.beginUpdate(),u&&i.columnOption(u.index,"visibleWidth",undefined),f&&i.columnOption(f.index,"visibleWidth",undefined),u&&i.columnOption(u.index,"width",Math.floor(s)),f&&i.columnOption(f.index,"width",Math.floor(o)),i.endUpdate()),e},_updatePointsByColumns:function(){for(var i,r=this.option("rtlEnabled"),n,t=0;t<this._pointsByColumns.length;t++)i=this._pointsByColumns[t],n=this._columnHeadersView.getHeaderElement(i.columnIndex+1),n&&n.length>0&&(i.x=n.offset().left+(r?n.outerWidth():0))},init:function(){var n=this,i,t,r=function(t){n._scrollLeft!==t.left&&(n._scrollLeft=t.left,n._generatePointsByColumns())},u=function(){n._generatePointsByColumns()};n.callBase(),o(n)&&(n._columnsSeparatorView=n.getView("columnsSeparatorView"),n._columnHeadersView=n.getView("columnHeadersView"),n._trackerView=n.getView("trackerView"),n._rowsView=n.getView("rowsView"),n._columnsController=n.getController("columns"),n._tablePositionController=n.getController("tablePosition"),n._$parentContainer=n._columnsSeparatorView.component.element(),n._columnHeadersView.renderCompleted.add(u),n._columnHeadersView.resizeCompleted.add(u),n._columnsSeparatorView.renderCompleted.add(function(){n._unsubscribeFromEvents(),n._subscribeToEvents()}),n._rowsView.renderCompleted.add(function(){n._rowsView.scrollOffsetChanged.remove(r),n._rowsView.scrollOffsetChanged.add(r)}),i=n.getView("gridView"),t=n._rowsView.getScrollbarWidth()!==0,n.getController("tablePosition").positionChanged.add(function(){if(n._isResizing&&!n._rowsView.isResizing){var r=n._rowsView.getScrollbarWidth()!==0;t!==r?(t=r,i.resize()):(n._rowsView.updateFreeSpaceRowHeight(),n._columnHeadersView.processSizeChanged())}}))},dispose:function(){this._unsubscribeFromEvents()}}),i.TablePositionViewController=i.ViewController.inherit({update:function(){var n=this._columnHeadersView.element(),t=this._columnHeadersView?this._columnHeadersView.getHeight():0,i=this._rowsView?this._rowsView.height()-this._rowsView.getScrollbarWidth(!0):0;this.positionChanged.fire({height:t+i,headersRowHeight:this._columnHeadersView?this._columnHeadersView.getHeadersRowHeight():0,top:n&&n.length>0?Math.floor(n[0].offsetTop):0})},init:function(){var n=this;n.callBase(),n._columnHeadersView=this.getView("columnHeadersView"),n._rowsView=this.getView("rowsView"),n._pagerView=this.getView("pagerView"),n._rowsView.resizeCompleted.add(function(){n.update()})},ctor:function(t){this.callBase(t),this.positionChanged=n.Callbacks()}}),i.DraggingHeaderViewController=i.ViewController.inherit({_subscribeToEvent:function(t,i){var e=this;n.each(i,function(o,h){if(h){var l=h.getColumnElements()||[],a=h.getName(),c=h.getColumns()||[];n.each(l,function(o,l){if(n(l).off(r("dxpointerdown",u)),n(l).removeClass(s),h.allowDragging(c[o],i)){n(l).addClass(s);n(l).on(r("dxpointerdown",u),e.createAction(function(r){var u=r.jQueryEvent,e=f.eventData(u);u.preventDefault(),t.drag({deltaX:e.x-n(u.currentTarget).offset().left,deltaY:e.y-n(u.currentTarget).offset().top,sourceColumn:c[o],columnIndex:o,columnElement:n(l),sourceLocation:h.getName(),draggingPanels:i})}))}})}})},_getSeparator:function(n){return n==="headers"?this._columnsSeparatorView:this._blockSeparatorView},hideSeparators:function(){var n=this._blockSeparatorView,t=this._columnsSeparatorView;this._animationColumnIndex=null,n&&n.hide(),t&&t.hide()},init:function(){var n=this,t;n.callBase(),n._columnsController=n.getController("columns"),n._columnHeadersView=n.getView("columnHeadersView"),n._columnsSeparatorView=n.getView("columnsSeparatorView"),n._draggingHeaderView=n.getView("draggingHeaderView"),n._rowsView=n.getView("rowsView"),n._blockSeparatorView=n.getView("blockSeparatorView"),n._headerPanelView=n.getView("headerPanel"),n._columnChooserView=n.getView("columnChooserView"),t=function(){n._draggingHeaderView&&n._subscribeToEvent(n._draggingHeaderView,[n._columnChooserView,n._columnHeadersView,n._headerPanelView])},n._columnHeadersView.renderCompleted.add(t),n._headerPanelView.renderCompleted.add(t),n._columnChooserView&&n._columnChooserView.renderCompleted.add(t)},allowDrop:function(n){return this._columnsController.allowMoveColumn(n.sourceColumnIndex,n.targetColumnIndex,n.sourceLocation,n.targetLocation)},allowDragColumn:function(n,t,i){var r=n[t],u,f=0,e=function(n){return n.allowReordering||n.allowGrouping||n.allowHiding};if(!r)return!1;switch(i){case"headers":for(u=0;u<n.length;u++)e(n[u])&&f++;return f>1&&e(r);case"group":return r.allowGrouping;case"columnChooser":return r.allowHiding}},dock:function(n){var t=this,u=n.targetColumnIndex,f=n.sourceLocation,s=n.sourceColumnIndex,e=n.sourceColumnElement,r=n.targetLocation,i=t._getSeparator(r),o=u>=0,h=function(){t._animationColumnIndex!==u&&(t.hideSeparators(),i.element()[n.isLast?"insertAfter":"insertBefore"](n.targetColumnElement),t._animationColumnIndex=u,i.show(r))};t._columnHeadersView.element().find("."+w).first().toggleClass(p,f!=="headers"&&r==="headers"&&!o),i&&(e&&(e.css({opacity:.5}),f==="headers"&&t._rowsView.setRowsOpacity(s,.5)),t.allowDrop(n)&&o?r==="group"||r==="columnChooser"?h():(t.hideSeparators(),i.moveByX(n.posX-i.width()),i.show()):t.hideSeparators())},drop:function(n){var i=n.sourceColumnElement,t;i&&(i.css({opacity:""}),this._rowsView.setRowsOpacity(n.sourceColumnIndex,""),this._columnHeadersView.element().find("."+w).first().removeClass(p)),this.allowDrop(n)&&(t=this._getSeparator(n.targetLocation),t&&t.hide(),this._columnsController.moveColumn(n.sourceColumnIndex,n.targetColumnIndex,n.sourceLocation,n.targetLocation))}}),i.registerModule("columnsResizingReordering",{views:{columnsSeparatorView:i.ColumnsSeparatorView,blockSeparatorView:i.BlockSeparatorView,draggingHeaderView:i.DraggingHeaderView,trackerView:i.TrackerView},controllers:{draggingHeader:i.DraggingHeaderViewController,tablePosition:i.TablePositionViewController,columnsResizer:i.ColumnsResizerViewController}})}(jQuery,DevExpress),function(n,t){var r=t.ui,e=t.utils,i=r.dxDataGrid,u="dx-datagrid",f="dx-context-menu";i.ContextMenuController=i.ViewController.inherit({getContextMenuItems:function(t){var i;return n.each(this.getViews(),function(){if(this.getContextMenuItems&&(i=this.getContextMenuItems(t),i))return!1}),i}}),i.ContextMenuView=i.View.inherit({viewNames:function(){return["columnHeadersView"]},_renderCore:function(){var t=this;t.element().addClass(f).dxContextMenu({onPositioning:function(i){var u=i.jQueryEvent,f=n(u.target),e=i.component,r=r=t.getController("contextMenu").getContextMenuItems(f);r?e.option("items",r):i.canceled=!0},onItemClick:function(n){n.itemData.onItemClick&&n.itemData.onItemClick(n)},rtlEnabled:t.option("rtlEnabled"),cssClass:u,target:t.component.element()})}}),i.registerModule("contextMenu",{controllers:{contextMenu:i.ContextMenuController},views:{contextMenuView:i.ContextMenuView}})}(jQuery,DevExpress),function(n,t){var u=t.ui,e=t.utils,i=u.events,r=u.dxDataGrid,o="dx-row",s="dx-group-row",h="dx-datagrid-rowsview",c="dx-master-detail-row",l="dx-datagrid-group-footer",a="dx-command-expand",v=["rowsView"],f="row";r.KeyboardNavigationController=r.ViewController.inherit({_focusView:function(n,t){this._focusedViews.viewIndex=t,this._focusedView=n},_initFocusedViews:function(){var t=this,r,u,f=t.createAction(function(i){var r=i.jQueryEvent,u=n(r.currentTarget);t._editingController.isEditing()||(t._isCellValid(u)?(u.focus(),t._focusView(r.data.view,r.data.viewIndex),t._updateFocusedCellPosition(u)):t._resetFocusedCell(t))});t._focusedViews=[],n.each(v,function(n,i){var r=t.getView(i);r.isVisible()&&t._focusedViews.push(r)}),n.each(t._focusedViews,function(n,e){e&&e.renderCompleted.add(function(){var s=e.element();s.off(i.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),f);s.on(i.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),"."+o+" td",{viewIndex:n,view:e},f);t._initKeyDownProcessor(t,s,t._keyDownHandler),t._focusedView&&t._focusedView.name===e.name&&t._isKeyDown&&(r=t._getFocusedCell(),r&&r.length>0&&(t._focusView(e,n),setTimeout(function(){if(t._editingController.isEditing())u=r.find("input").first(),u.focus();else{var n=r.parent(),i=t._isGroupRow(n)?n:r;i.attr("tabindex",0),i.focus()}t.getController("editorFactory").focus()&&t._focus(r)})))})})},_initKeyDownProcessor:function(n,t,i){this._keyDownProcessor&&(this._keyDownProcessor.dispose(),this._keyDownProcessor=null),this._keyDownProcessor=new u.KeyboardProcessor({element:t,context:n,handler:i})},_focusCell:function(n){var t=this;n&&(t.getController("editorFactory").focus(n),t._updateFocusedCellPosition(n))},_focusGroupRow:function(n){n&&(this.getController("editorFactory").focus(n),this._focusedCellPosition.rowIndex=this._focusedView.getRowIndex(n))},_getFocusedCell:function(){if(this._focusedView&&this._focusedCellPosition)return this._focusedView.getCell(this._focusedCellPosition.columnIndex,this._focusedCellPosition.rowIndex)},_updateFocusedCellPosition:function(n){var t=this;n.length>0&&(this._focusedCellPosition={columnIndex:n[0].cellIndex,rowIndex:n.parent().length>0&&t._focusedView?t._focusedView.getRowIndex(n.parent()):null})},_isCellValid:function(n){var t=this._columnsController.getVisibleColumns(),i=n[0].cellIndex;if(t.length>i&&!e.isDefined(t[i].groupIndex))return!e.isDefined(t[i].command)||t[i].command==="expand"},_isGroupRow:function(n){return n&&n.hasClass(s)},_focus:function(n){var t=n&&n.parent();this._isGroupRow(t)?this._focusGroupRow(t):this._focusCell(n)},_hasSkipRow:function(n){return n&&(n.hasClass(c)||n.hasClass(l))},_keyDownHandler:function(t){var c=this.option("editing"),l=this.option("scrolling.mode"),v=l==="virtual"||l==="infinite",u=this._editingController.isEditing(),o=this._dataController.pageIndex(),y=this._dataController.pageCount(),r=this._focusedCellPosition?this._focusedCellPosition.rowIndex:null,e=this._focusedView&&this._focusedView.getRow(r),i,s,h;this._isKeyDown=!0;switch(t.key){case"leftArrow":case"rightArrow":u||this._isGroupRow(e)||(i=this._getNextCell(t.key),i&&this._isCellValid(i)&&this._focusCell(i),t.originalEvent.preventDefault());break;case"upArrow":case"downArrow":if(!u){if(r===0||this._focusedView&&r===this._focusedView.getRowsCount()-1,i=this._getNextCell(t.key),i){for(e=i.parent();this._hasSkipRow(e)&&this._focusedCellPosition;)if(r=this._focusedView.getRowIndex(e),this._isLastRow(r)){i=null;break}else i=this._getNextCell(t.key,n.extend({},this._focusedCellPosition,{rowIndex:r})),e=i.parent();i&&this._isCellValid(i)&&this._focus(i)}t.originalEvent.preventDefault()}break;case"pageUp":o>0&&!v&&(this._dataController.pageIndex(o-1),t.originalEvent.preventDefault());break;case"pageDown":o<y-1&&!v&&(this._dataController.pageIndex(o+1),t.originalEvent.preventDefault());break;case"space":this.option("selection")&&this.option("selection").mode!=="none"&&!u&&this._selectionController.changeItemSelection(r,{shift:t.shift,control:t.ctrl});break;case"A":t.ctrl&&this.option("selection.mode")==="multiple"&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),t.originalEvent.preventDefault());break;case"tab":u&&this._editingController.getEditMode()!==f&&t.originalEvent.target&&(this._updateFocusedCellPosition(n(t.originalEvent.target).closest("td")),i=this._getNextCell("rightArrow"),this._isCellValid(i)&&(this._focusCell(i),this._editingController.editCell(this._focusedCellPosition.rowIndex,this._focusedCellPosition.columnIndex)),t.originalEvent.preventDefault());break;case"enter":i=this._getFocusedCell(),this.option("grouping.allowCollapsing")&&this._isGroupRow(e)||this.option("masterDetail.enabled")&&i.hasClass(a)?(s=this._dataController.getKeyByRowIndex(r),s!==undefined&&this._dataController.changeRowExpand(s)):(h=this._editingController.getEditMode()===f,c.editEnabled&&(u?(this._updateFocusedCellPosition(n(t.originalEvent.target).closest("td")),h?setTimeout(n.proxy(this._editingController.saveEditData,this._editingController)):this._editingController.closeEditCell()):h?this._editingController.editRow(r):this._focusedCellPosition&&this._editingController.editCell(r,this._focusedCellPosition.columnIndex)));break;case"escape":c.editEnabled&&u&&(this._updateFocusedCellPosition(n(t.originalEvent.target).closest("td")),this._editingController.getEditMode()!==f?this._editingController.closeEditCell():this._editingController.cancelEditData(),t.originalEvent.preventDefault());break;case"F":t.ctrl&&this.option("searchPanel")&&this.option("searchPanel").visible&&(this._headerPanel.focus(),t.originalEvent.preventDefault())}t.originalEvent.stopPropagation()},_isLastRow:function(n){return n===this._dataController.items().length-1},_getNextCell:function(n,t){var u=t||this._focusedCellPosition,i=u.columnIndex,r=u.rowIndex,f;if(this._focusedView&&u){f=this.getController("columns").getVisibleColumns().length;switch(n){case"rightArrow":i=i<f-1?i+1:i;break;case"leftArrow":i=i>0?i-1:i;break;case"upArrow":r=r>0?r-1:r;break;case"downArrow":r=this._isLastRow(r)?r:r+1}return this._focusedView.getCell(i,r)}return null},_resetFocusedCell:function(n){var t=n._getFocusedCell();t&&t.attr("tabindex",null),n._focusedCellPosition=null,n._isKeyDown=!1},init:function(){var t=this;if(t.option("useKeyboard")){t._dataController=t.getController("data"),t._selectionController=t.getController("selection"),t._editingController=t.getController("editing"),t._headerPanel=t.getView("headerPanel"),t._pagerView=t.getView("pagerView"),t._columnsController=t.getController("columns"),t._focusedCellPosition={columnIndex:0,rowIndex:0},t._dataController.changed.add(function(n){t._focusedCellPosition&&n&&n.changeType==="prepend"&&(t._focusedCellPosition.rowIndex+=n.items.length)}),t._initFocusedViews(),t._documentClickHandler=t.createAction(function(i){n(i.jQueryEvent.target).closest("."+h).length||t._resetFocusedCell(t)});n(document).on(i.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),t._documentClickHandler)}},dispose:function(){this.callBase(),this._focusedView=null,this._focusedViews=null,this._keyDownProcessor&&this._keyDownProcessor.dispose(),n(document).off(i.addNamespace("dxpointerdown","dxDataGridKeyboardNavigation"),this._documentClickHandler)}}),r.registerModule("keyboardNavigation",{defaultOptions:function(){return{useKeyboard:!0}},controllers:{keyboardNavigation:r.KeyboardNavigationController},extenders:{views:{rowsView:{_renderCore:function(n){this.callBase(n),this.element().attr("tabindex",this.option("useKeyboard")?0:null)}}}}})}(jQuery,DevExpress),function(n,t){var u=t.ui,s=t.utils,i=u.dxDataGrid,r="dx-error-row",h="dx-row",f="dx-data-row",e="dx-closebutton",o="dx-datagrid-action";i.ErrorHandlingController=i.ViewController.inherit({init:function(){var n=this;n._columnHeadersView=n.getView("columnHeadersView"),n._rowsView=n.getView("rowsView")},renderErrorRow:function(t,i){var u=this,a=i>=0?u._rowsView:u._columnHeadersView,s=a.tableElement(),h=n("<tr />").addClass(r),c=s.find("."+f).eq(i),l=n("<div/>").addClass(e).addClass(o);i>=0?(u.removeErrorRow(s.find("tr").eq(c.index()+1)),h.insertAfter(c)):(u.removeErrorRow(s.find("tr").last()),s.append(h));l.on("dxclick",u.createAction(function(t){var i=t.jQueryEvent,f=n(i.currentTarget).closest("."+r);i.stopPropagation(),u.removeErrorRow(f)}));n("<td/>").attr("colspan",u._columnHeadersView.getHeadersLength()).text(t).append(l).appendTo(h)},removeErrorRow:function(n){n.hasClass(r)&&n.remove()}}),i.registerModule("errorHandling",{defaultOptions:function(){return{errorRowEnabled:!0}},controllers:{errorHandling:i.ErrorHandlingController},extenders:{controllers:{data:{init:function(){var n=this,t=n.getController("errorHandling");n.callBase(),n.dataErrorOccurred.add(function(i){var r=i&&i.message||i;n.option("errorRowEnabled")&&t.renderErrorRow(r)})}},validating:{_rowValidating:function(n,t){var r=this,u=r.getController("errorHandling"),i=r.callBase(n,t);return!i.isValid&&i.errorText&&u.renderErrorRow(i.errorText,i.rowIndex),i}}}}})}(jQuery,DevExpress),function(n,t){var s=t.ui,r=t.utils,i=s.dxDataGrid,h=t.data.utils.normalizeSortingInfo,c="dx-datagrid-total-footer",l="dx-datagrid-summary-item",a="dx-datagrid-text-content",v="dx-datagrid-group-footer",f="groupFooter",e=function(t,r,u){var f,o=n("<td>"),e,s=[];if(t){for(f=0;f<t.length;f++)e=t[f],s.push(n("<div>").css("text-align",e.alignment||r.alignment).addClass(l).addClass(a).addClass(e.cssClass).text(i.getSummaryText(e,u)));o.append(s)}return o},u,o;i.FooterView=i.ColumnsView.inherit(function(){return{_renderTable:function(n){var u=this._createTable(),f=this._createRow(),t,s=this.option("summary.texts"),o,r=this._columnsController.getVisibleColumns(),h=r.length;for(u.append(i.createColGroup(r)),t=0;t<h;t++)o=r[t],f.append(e(n.summaryCells[t],o,s));return u.append(f)},_renderCore:function(){var n=this._dataController.footerItems()[0];this.element().empty().addClass(c),n&&n.summaryCells&&n.summaryCells.length&&(this._tableElement=this._renderTable(n),this.wrapTableInScrollContainer(this._tableElement).appendTo(this.element()))},_columnOptionChanged:function(n){var t=n.optionNames;(t.width||t.visibleWidth)&&this.callBase(n)},getHeight:function(){var n=this.element();return n?n.outerHeight():0},isVisible:function(){return!!this._dataController.footerItems().length},init:function(){var n=this;n.callBase(),n._dataController.changed.add(function(){n.render()})}}}()),u=function(){return{init:function(){this.callBase.apply(this,arguments),this._totalAggregates=[]},summary:function(n){if(!arguments.length)return this._summary;this._summary=n},totalAggregates:function(){return this._totalAggregates}}}(),o=function(){var r=function(n,i,r,u){var f;i&&(f=new t.data.AggregateCalculator({totalAggregates:i.totalAggregates,groupAggregates:i.groupAggregates,data:r,groupLevel:u}),f.calculate()),n._totalAggregates=f?f.totalAggregates():[]},i=function(r,u,f){if(!r||!u.length)return r;var s=u[0],o=f[0],e;return s&&o&&o.length&&(e=t.data.query(r),n.each(o,function(n){e=n===0?e.sortBy(this.selector,this.desc):e.thenBy(this.selector,this.desc)}),e.enumerate().done(function(n){r=n})),u=u.slice(1),f=f.slice(1),u.length&&f.length&&n.each(r,function(){this.items=i(this.items,u,f)}),r},u=function(n,t,r){var u=r&&r.sortByGroups&&r.sortByGroups();return u&&u.length?i(n,t,u):n};return{_handleDataLoadedCore:function(n){var t=this,i=h(n.loadOptions.group||[]),f=t.summary();r(t,f,n.data,i.length),n.data=u(n.data,i,f),t.callBase(n)}}}(),i.DataSourceAdapterServer=i.DataSourceAdapterServer.inherit(u),i.DataSourceAdapterClient=i.DataSourceAdapterClient.inherit(u).inherit(o),i.registerModule("summary",{defaultOptions:function(){return{summary:{groupItems:undefined,totalItems:undefined,calculateCustomSummary:undefined,texts:{sum:Globalize.localize("dxDataGrid-summarySum"),sumOtherColumn:Globalize.localize("dxDataGrid-summarySumOtherColumn"),min:Globalize.localize("dxDataGrid-summaryMin"),minOtherColumn:Globalize.localize("dxDataGrid-summaryMinOtherColumn"),max:Globalize.localize("dxDataGrid-summaryMax"),maxOtherColumn:Globalize.localize("dxDataGrid-summaryMaxOtherColumn"),avg:Globalize.localize("dxDataGrid-summaryAvg"),avgOtherColumn:Globalize.localize("dxDataGrid-summaryAvgOtherColumn"),count:Globalize.localize("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:undefined}},views:{footerView:i.FooterView},extenders:{controllers:{data:function(){return{_isGroupFooterVisible:function(){for(var t=this.option("summary.groupItems")||[],n=0;n<t.length;n++)if(t[n].showInGroupFooter)return!0;return!1},_processGroupItems:function(n,t,i){var r=this.callBase.apply(this,arguments);return i&&(i.isGroupFooterVisible===undefined&&(i.isGroupFooterVisible=this._isGroupFooterVisible()),i.data&&i.data.items&&i.isGroupFooterVisible&&r.push({rowType:"groupFooter",data:i.data,groupIndex:i.path.length-1,values:i.path})),r},_processGroupItem:function(t,i){var f=this,u;return i.summaryGroupItems||(i.summaryGroupItems=f.option("summary.groupItems")||[]),t.rowType==="group"&&(u=-1,n.each(i.visibleColumns,function(){if(t.groupIndex===this.groupIndex)return u=this.index,!1}),t.summaryCells=this._calculateSummaryCells(i.summaryGroupItems,t.data.aggregates||[],i.visibleColumns,function(n,t){return n.showInGroupFooter?-1:n.groupRowDisplayMode==="alignByColumn"&&t&&!r.isDefined(t.groupIndex)?t.index:u})),t.rowType==="groupFooter"&&(t.summaryCells=this._calculateSummaryCells(i.summaryGroupItems,t.data.aggregates||[],i.visibleColumns,function(n,t){return n.showInGroupFooter&&t&&!r.isDefined(t.groupIndex)?t.index:-1})),t},_calculateSummaryCells:function(t,i,u,f){var o=this,s=[],e={};return n.each(t,function(t,u){var h=o._columnsController.columnOption(u.column),l=u.showInColumn&&o._columnsController.columnOption(u.showInColumn)||h,s=f(u,l),c;s>=0&&(e[s]||(e[s]=[]),c=i[t],r.isDefined(c)&&!isNaN(c)&&e[s].push(n.extend({},u,{value:c,columnCaption:h&&h.index!==s?h.caption:undefined})))}),n.each(u,function(){s.push(e[this.index]||[])}),s},_updateItemsCore:function(n){var t=this,u,f,e,s=t._columnsController,o=t._dataSource,i=t.option("summary.totalItems");t.callBase(n),t._footerItems=[],o&&i&&i.length&&(e=o.totalAggregates(),f=s.getVisibleColumns(),u=t._calculateSummaryCells(i,e,f,function(n,t){return t&&!r.isDefined(t.groupIndex)?t.index:-1}),t._footerItems.push({rowType:"totalFooter",summaryCells:u}))},_getAggregates:function(i){var u=this,f=u.getController("columns"),r=u.option("summary.calculateCustomSummary");return n.map(i||[],function(i){var o=f.columnOption(i.column),h=o&&o.calculateCellValue?n.proxy(o,"calculateCellValue"):t.data.utils.compileGetter(o?o.dataField:i.column),s=i.summaryType||"count",c=h,e;return(s==="avg"||s==="sum")&&(c=function(n){return Number(h(n))}),s==="custom"&&(r||(t.log("E1026"),r=function(){}),e={component:u.component,name:i.name,summaryProcess:"start",totalValue:undefined},r(e),e.summaryProcess="calculate",s={seed:e.totalValue,step:function(n,t){return e.summaryProcess="calculate",e.totalValue=n,e.value=t,r(e),e.totalValue},finalize:function(n){return e.summaryProcess="finalize",e.totalValue=n,delete e.value,r(e),e.totalValue}}),{selector:c,aggregator:s}})},_addSortInfo:function(n,t,i,u){var f;t&&(f=t.groupIndex,u=u||t.sortOrder,r.isDefined(f)&&(n[f]=n[f]||[],n[f].push({selector:i,desc:u==="desc"})))},_findSummaryItem:function(t,i){var u=-1,f=function(n){var t=n.summaryType,i=n.column;return t&&i&&t+"_"+i};return r.isDefined(i)&&n.each(t||[],function(n){if(this.name===i||n===i||this.summaryType===i||this.column===i||f(this)===i)return u=n,!1}),u},_getSummarySortByGroups:function(t,i){var u=this,e=u._columnsController,o=e.getGroupColumns(),f=[];if(i&&i.length)return n.each(t||[],function(){var l,h=this.sortOrder,t=this.groupColumn,c=u._findSummaryItem(i,this.summaryItem),a,s;c<0||(s=function(n){return n.aggregates[c]},r.isDefined(t)?(t=e.columnOption(t),u._addSortInfo(f,t,s,h)):n.each(o,function(n,t){u._addSortInfo(f,t,s,h)}))}),f},_createDataSourceAdapterCore:function(n,t){var r=this._getSummaryOptions(),i;return t==="auto"&&r&&(t={filtering:!0,sorting:!0,paging:!1}),i=this.callBase(n,t),i.summary(r),i},_getSummaryOptions:function(){var n=this,t=n.option("summary.groupItems"),u=n.option("summary.totalItems"),f=n.option("sortByGroupSummaryInfo"),i=n._getAggregates(t),r=n._getAggregates(u),e=function(){return n._getSummarySortByGroups(f,t)};if(i.length||r.length)return{groupAggregates:i,totalAggregates:r,sortByGroups:e}},publicMethods:function(){var n=this.callBase();return n.push("getTotalSummaryValue"),n},getTotalSummaryValue:function(n){var t=this._findSummaryItem(this.option("summary.totalItems"),n),i=this._dataSource.totalAggregates();if(i.length&&t>-1)return i[t]},optionChanged:function(n){n.name==="summary"&&(n.name="dataSource"),this.callBase(n)},init:function(){this._footerItems=[],this.callBase()},footerItems:function(){return this._footerItems}}}()},views:{rowsView:function(){return{_createRow:function(n){var t=this.callBase(n);return n&&t.addClass(n.rowType===f?v:""),t},_renderCells:function(n,t){var r=t.columns,u,o=[],s=this.option("summary.texts"),i;if(n.rowType===f){for(u=n.summaryCells,i=0;i<r.length;i++)o.push(e(u[i],r[i],s));return o}return this.callBase(n,t)}}}()}}})}(jQuery,DevExpress),function(n,t){var u=t.ui,i=t.utils,r=u.dxDataGrid,f="dx-master-detail-cell",e="dx-master-detail-row",o="dx-row-lines";r.registerModule("masterDetail",{defaultOptions:function(){return{masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}},extenders:{controllers:{columns:{_getExpandColumnsCore:function(){var n=this.callBase();return this.option("masterDetail.enabled")&&n.push({}),n}},data:function(){var t=function(n){n._expandedItems=[],n._isExpandAll=n.option("masterDetail.autoExpandAll")};return{init:function(){t(this),this.callBase()},expandAll:function(n){var t=this;n<0?(t._isExpandAll=!0,t._expandedItems=[],t.updateItems()):t.callBase.apply(t,arguments)},collapseAll:function(n){var t=this;n<0?(t._isExpandAll=!1,t._expandedItems=[],t.updateItems()):t.callBase.apply(t,arguments)},isRowExpanded:function(n){var t=this;return i.isArray(n)?t.callBase.apply(t,arguments):!!(t._isExpandAll^r.getIndexByKey(n,t._expandedItems)>=0)},changeRowExpand:function(n){var t=this,u,f;if(i.isArray(n))return t.callBase.apply(t,arguments);u=r.getIndexByKey(n,t._expandedItems),u>=0?t._expandedItems.splice(u,1):t._expandedItems.push({key:n}),f=t.getRowIndexByKey(n),t.updateItems({changeType:"update",rowIndices:[f,f+1]})},_processDataItem:function(t,r){var f=this,u=f.callBase.apply(f,arguments);return u.isExpanded=f.isRowExpanded(u.key),r.detailColumnIndex===undefined&&(r.detailColumnIndex=-1,n.each(r.visibleColumns,function(n,t){if(t.command==="expand"&&!i.isDefined(t.groupIndex))return r.detailColumnIndex=n,!1})),r.detailColumnIndex>=0&&(u.values[r.detailColumnIndex]=u.isExpanded),u},_processItems:function(){var i=this,r=i.callBase.apply(i,arguments),t=[];return n.each(r,function(n,i){t.push(i),i.rowType==="data"&&i.isExpanded&&t.push({rowType:"detail",key:i.key,data:i.data,values:[]})}),t},optionChanged:function(n){var e=this,i,r,u,f;if(n.name==="masterDetail"){n.name="columns";switch(n.fullName){case"masterDetail":i=n.value||{},r=n.previousValue||{},u=i.enabled!==r.enabled,f=i.autoExpandAll!==r.autoExpandAll;break;case"masterDetail.enabled":u=!0;break;case"masterDetail.autoExpandAll":f=!0}(u||f)&&t(e)}e.callBase(n)},refresh:function(){var n=this;return t(n),n.callBase.apply(n,arguments)}}}()},views:{rowsView:function(){return{_getColumnTemplate:function(n){var t=this,r=n.column,i;return r.command==="detail"?(i=t.option("masterDetail.template")||t._getDefaultTemplate(r),n.denyRenderToDetachedContainer=!0):i=t.callBase.apply(t,arguments),i},_createRow:function(n){var t=this.callBase(n);return n&&n.rowType==="detail"&&(this.option("showRowLines")&&t.addClass(o),t.addClass(e)),t},_renderCells:function(n,t){var u,e,i,o,r;if(n.rowType==="detail"){for(i=[],u=t.groupColumns.length+t.columnsCountBeforeGroups,o=u+Number(this.option("masterDetail.enabled")),r=0;r<o;r++)i.push(this._createCell(null,n,n.rowIndex,t.columns[r]));e=this._createCell(null,n,n.rowIndex,{command:"detail"},u),e.addClass(f).attr("colspan",t.columns.length-o),i.push(e)}else i=this.callBase.apply(this,arguments);return i}}}()}}})}(jQuery,DevExpress),DevExpress.MOD_WIDGETS_WEB=!0}